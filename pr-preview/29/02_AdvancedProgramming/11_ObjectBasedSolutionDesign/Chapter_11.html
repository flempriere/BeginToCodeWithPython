<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 11: Object-based Solution Design – Beginning to Code with Python: Notes, Examples and Exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-fd21d93db373728c2f8fcda4b672d2ec.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Beginning to Code with Python: Notes, Examples and Exercises</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html">Advanced Programming</a></li><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/11_ObjectBasedSolutionDesign/Chapter_11.html">Chapter 11: Object-based Solution Design</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Programming Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/02_PythonAndProgramming/Chapter_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 2: Python and Programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/03_PythonProgramStructure/Chapter_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 3: Python Program Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/04_WorkingWithVariables/Chapter_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 4: Working With Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/05_MakingDecisions/Chapter_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 5: Making Decisions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/06_RepeatingActionsWithLoops/Chapter_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 6: Repeating Actions with Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/07_UsingFunctions/Chapter_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 7: Using Functions to Simplify Programs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/08_StoringCollectionsOfData/Chapter_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 8: Storing Collections of Data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 9: Use Classes to Store Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09_ExtensionExercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extended Exercises for Chapter 9</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../02_AdvancedProgramming/10_UseClassesToCreateActiveObjects/Chapter_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 10: Using Classes to Create Active Objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../02_AdvancedProgramming/11_ObjectBasedSolutionDesign/Chapter_11.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Chapter 11: Object-based Solution Design</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#notes" id="toc-notes" class="nav-link active" data-scroll-target="#notes">Notes</a>
  <ul>
  <li><a href="#fashion-shop-application" id="toc-fashion-shop-application" class="nav-link" data-scroll-target="#fashion-shop-application">Fashion Shop Application</a>
  <ul>
  <li><a href="#application-data-design" id="toc-application-data-design" class="nav-link" data-scroll-target="#application-data-design">Application Data Design</a></li>
  <li><a href="#object-oriented-design" id="toc-object-oriented-design" class="nav-link" data-scroll-target="#object-oriented-design">Object-oriented Design</a></li>
  <li><a href="#creating-superclasses-and-subclasses" id="toc-creating-superclasses-and-subclasses" class="nav-link" data-scroll-target="#creating-superclasses-and-subclasses">Creating superclasses and subclasses</a>
  <ul>
  <li><a href="#abstraction-in-software-design" id="toc-abstraction-in-software-design" class="nav-link" data-scroll-target="#abstraction-in-software-design">Abstraction in Software Design</a></li>
  <li><a href="#code-analysis-understanding-inheritance" id="toc-code-analysis-understanding-inheritance" class="nav-link" data-scroll-target="#code-analysis-understanding-inheritance">Code Analysis: Understanding Inheritance</a></li>
  <li><a href="#storing-data-in-a-class-hierarchy" id="toc-storing-data-in-a-class-hierarchy" class="nav-link" data-scroll-target="#storing-data-in-a-class-hierarchy">Storing Data in a Class Hierarchy</a></li>
  <li><a href="#manage-the-item-name-in-the-fashion-shop-program" id="toc-manage-the-item-name-in-the-fashion-shop-program" class="nav-link" data-scroll-target="#manage-the-item-name-in-the-fashion-shop-program">Manage the Item Name in the Fashion Shop Program</a>
  <ul class="collapse">
  <li><a href="#abstract-methods" id="toc-abstract-methods" class="nav-link" data-scroll-target="#abstract-methods">Abstract Methods</a></li>
  </ul></li>
  <li><a href="#add-a-__str__-method-to-classes" id="toc-add-a-__str__-method-to-classes" class="nav-link" data-scroll-target="#add-a-__str__-method-to-classes">Add a <code>__str__</code> Method to Classes</a>
  <ul class="collapse">
  <li><a href="#make-something-happen-method-overriding-in-classes" id="toc-make-something-happen-method-overriding-in-classes" class="nav-link" data-scroll-target="#make-something-happen-method-overriding-in-classes">Make Something Happen: Method Overriding in Classes</a></li>
  </ul></li>
  <li><a href="#code-analysis-understanding-method-overriding" id="toc-code-analysis-understanding-method-overriding" class="nav-link" data-scroll-target="#code-analysis-understanding-method-overriding">Code Analysis: Understanding Method Overriding</a></li>
  <li><a href="#version-management-in-the-fashion-shop-program" id="toc-version-management-in-the-fashion-shop-program" class="nav-link" data-scroll-target="#version-management-in-the-fashion-shop-program">Version Management in the Fashion Shop Program</a></li>
  <li><a href="#polymorphism-in-software-design" id="toc-polymorphism-in-software-design" class="nav-link" data-scroll-target="#polymorphism-in-software-design">Polymorphism in Software Design</a>
  <ul class="collapse">
  <li><a href="#code-analysis-understanding-polymorphism" id="toc-code-analysis-understanding-polymorphism" class="nav-link" data-scroll-target="#code-analysis-understanding-polymorphism">Code Analysis: Understanding Polymorphism</a></li>
  </ul></li>
  <li><a href="#protect-data-in-a-class-hierarchy" id="toc-protect-data-in-a-class-hierarchy" class="nav-link" data-scroll-target="#protect-data-in-a-class-hierarchy">Protect Data in a Class Hierarchy</a></li>
  </ul></li>
  <li><a href="#data-design-recap" id="toc-data-design-recap" class="nav-link" data-scroll-target="#data-design-recap">Data Design Recap</a>
  <ul>
  <li><a href="#code-analysis-data-design" id="toc-code-analysis-data-design" class="nav-link" data-scroll-target="#code-analysis-data-design">Code Analysis: Data Design</a></li>
  <li><a href="#make-something-happen-instrumented-stock-items" id="toc-make-something-happen-instrumented-stock-items" class="nav-link" data-scroll-target="#make-something-happen-instrumented-stock-items">Make Something Happen: Instrumented Stock Items</a></li>
  </ul></li>
  <li><a href="#implement-application-behaviours" id="toc-implement-application-behaviours" class="nav-link" data-scroll-target="#implement-application-behaviours">Implement Application Behaviours</a>
  <ul>
  <li><a href="#create-a-new-stock-item" id="toc-create-a-new-stock-item" class="nav-link" data-scroll-target="#create-a-new-stock-item">Create a New Stock Item</a></li>
  <li><a href="#add-stock-to-an-existing-item" id="toc-add-stock-to-an-existing-item" class="nav-link" data-scroll-target="#add-stock-to-an-existing-item">Add Stock to an Existing Item</a></li>
  <li><a href="#sell-a-stock-item" id="toc-sell-a-stock-item" class="nav-link" data-scroll-target="#sell-a-stock-item">Sell a Stock Item</a></li>
  </ul></li>
  <li><a href="#objects-as-components" id="toc-objects-as-components" class="nav-link" data-scroll-target="#objects-as-components">Objects as Components</a></li>
  </ul></li>
  <li><a href="#create-a-fashionshop-component" id="toc-create-a-fashionshop-component" class="nav-link" data-scroll-target="#create-a-fashionshop-component">Create a <code>FashionShop</code> Component</a>
  <ul>
  <li><a href="#create-a-fashionship-object-instance" id="toc-create-a-fashionship-object-instance" class="nav-link" data-scroll-target="#create-a-fashionship-object-instance">Create a <code>FashionShip</code> Object Instance</a></li>
  <li><a href="#save-the-fashionshop-object" id="toc-save-the-fashionshop-object" class="nav-link" data-scroll-target="#save-the-fashionshop-object">Save the <code>FashionShop</code> Object</a></li>
  <li><a href="#load-the-fashionshop-object" id="toc-load-the-fashionshop-object" class="nav-link" data-scroll-target="#load-the-fashionshop-object">Load the <code>FashionShop</code> Object</a></li>
  <li><a href="#store-a-new-item" id="toc-store-a-new-item" class="nav-link" data-scroll-target="#store-a-new-item">Store a New Item</a></li>
  <li><a href="#find-a-stock-item" id="toc-find-a-stock-item" class="nav-link" data-scroll-target="#find-a-stock-item">Find a Stock Item</a></li>
  <li><a href="#list-the-stock-data" id="toc-list-the-stock-data" class="nav-link" data-scroll-target="#list-the-stock-data">List the Stock Data</a></li>
  <li><a href="#exercise-create-a-banking-application" id="toc-exercise-create-a-banking-application" class="nav-link" data-scroll-target="#exercise-create-a-banking-application">Exercise: Create a Banking Application</a></li>
  </ul></li>
  <li><a href="#create-a-user-interface-class" id="toc-create-a-user-interface-class" class="nav-link" data-scroll-target="#create-a-user-interface-class">Create a User Interface Class</a>
  <ul>
  <li><a href="#initialise-the-user-interface" id="toc-initialise-the-user-interface" class="nav-link" data-scroll-target="#initialise-the-user-interface">Initialise the User Interface</a></li>
  <li><a href="#implementing-the-user-menu" id="toc-implementing-the-user-menu" class="nav-link" data-scroll-target="#implementing-the-user-menu">Implementing the User Menu</a></li>
  <li><a href="#implement-the-user-interface-behaviours" id="toc-implement-the-user-interface-behaviours" class="nav-link" data-scroll-target="#implement-the-user-interface-behaviours">Implement the User Interface Behaviours</a></li>
  <li><a href="#exercise-completing-the-banking-application" id="toc-exercise-completing-the-banking-application" class="nav-link" data-scroll-target="#exercise-completing-the-banking-application">Exercise: Completing the Banking Application</a>
  <ul>
  <li><a href="#design-review" id="toc-design-review" class="nav-link" data-scroll-target="#design-review">Design Review</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#design-with-classes" id="toc-design-with-classes" class="nav-link" data-scroll-target="#design-with-classes">Design With Classes</a></li>
  <li><a href="#python-sets" id="toc-python-sets" class="nav-link" data-scroll-target="#python-sets">Python Sets</a>
  <ul>
  <li><a href="#make-something-happen-investigating-sets" id="toc-make-something-happen-investigating-sets" class="nav-link" data-scroll-target="#make-something-happen-investigating-sets">Make Something Happen: Investigating Sets</a></li>
  <li><a href="#sets-and-tags" id="toc-sets-and-tags" class="nav-link" data-scroll-target="#sets-and-tags">Sets and Tags</a>
  <ul>
  <li><a href="#create-a-set-from-a-string-of-text" id="toc-create-a-set-from-a-string-of-text" class="nav-link" data-scroll-target="#create-a-set-from-a-string-of-text">Create a set from a String of Text</a></li>
  <li><a href="#filter-on-tags" id="toc-filter-on-tags" class="nav-link" data-scroll-target="#filter-on-tags">Filter on Tags</a></li>
  </ul></li>
  <li><a href="#sets-versus-class-hierarchies" id="toc-sets-versus-class-hierarchies" class="nav-link" data-scroll-target="#sets-versus-class-hierarchies">Sets versus Class Hierarchies</a>
  <ul>
  <li><a href="#advantages-of-using-sets-and-tags" id="toc-advantages-of-using-sets-and-tags" class="nav-link" data-scroll-target="#advantages-of-using-sets-and-tags">Advantages of Using Sets and Tags</a></li>
  <li><a href="#disadvantages-of-using-classes" id="toc-disadvantages-of-using-classes" class="nav-link" data-scroll-target="#disadvantages-of-using-classes">Disadvantages of using Classes</a></li>
  <li><a href="#code-analysis-design-decisions" id="toc-code-analysis-design-decisions" class="nav-link" data-scroll-target="#code-analysis-design-decisions">Code Analysis: Design Decisions</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#questions-and-answers" id="toc-questions-and-answers" class="nav-link" data-scroll-target="#questions-and-answers">Questions and Answers</a></li>
  </ul>
<div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/flempriere/BeginToCodeWithPython/" target="_blank"><i class="bi bi-github"></i>GitHub Repo</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html">Advanced Programming</a></li><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/11_ObjectBasedSolutionDesign/Chapter_11.html">Chapter 11: Object-based Solution Design</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Chapter 11: Object-based Solution Design</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<ul>
<li>The <a href="../../02_AdvancedProgramming/10_UseClassesToCreateActiveObjects/Chapter_10.html">previous chapter</a> looked at creating useful objects</li>
<li>In this chapter we’ll explore how to create systems comprising large numbers of different but related objects</li>
<li>We’ll also look at connecting objects via their methods</li>
</ul>
<section id="fashion-shop-application" class="level3">
<h3 class="anchored" data-anchor-id="fashion-shop-application">Fashion Shop Application</h3>
<ul>
<li>Consider the following scenario</li>
</ul>
<blockquote class="blockquote">
<p>A friend who runs a fashion shop would like you to build an application to help manage her stock. She sells a large range of clothing items and wants to be able to track inventory. Her workflow is as follows, stock arrives from suppliers, the details are entered in the system. When an item is sold it should be removed from the stock. She would also like to be produce reports indicating how many of each item are in stock.</p>
</blockquote>
<ul>
<li><p>Working with the client you define the following information about how her stock operates</p></li>
<li><p>Each item has a unique reference</p></li>
<li><p>Each reference contains:</p>
<ul>
<li>A description</li>
<li>A price</li>
<li>A number in stock</li>
<li>A list of delivery amounts and dates, and sales</li>
</ul></li>
<li><p>For now the client is happy to just print out the entire stock list</p></li>
<li><p>Has indicated in future they may wish to have more analytics, e.g.</p>
<ul>
<li>determine which item has the lowest stock</li>
</ul></li>
<li><p>Our prototype interface is then,</p>
<pre class="text"><code>  Mary's Fashion Shop

  1. Create a new stock item
  2. Add stock to an existing item
  3. Sell stock
  4. Stock report
  5. Exit

  Enter your command:</code></pre></li>
<li><p>The above options are all pretty straightforward for now</p></li>
</ul>
<section id="application-data-design" class="level4">
<h4 class="anchored" data-anchor-id="application-data-design">Application Data Design</h4>
<ul>
<li><p>Before designing the program we need to understand the data we have to represent</p></li>
<li><p>Our client tells us that each stock item requires,</p>
<ol type="1">
<li>Stock reference id</li>
<li>Price</li>
<li>Colour</li>
<li>Number in stock</li>
</ol></li>
<li><p>The client also has specifics for different types of stock items</p>
<ul>
<li><p>For Dresses we require</p>
<ol type="1">
<li>Size</li>
<li>Style</li>
<li>Pattern</li>
</ol></li>
<li><p>For pants we require</p>
<ol type="1">
<li>Length</li>
<li>Waist size</li>
<li>Style</li>
<li>Pattern</li>
</ol></li>
<li><p>For hats we require</p>
<ol type="1">
<li>Size</li>
</ol></li>
<li><p>For blouses we require</p>
<ol type="1">
<li>Size</li>
<li>Style</li>
<li>Pattern</li>
</ol></li>
</ul></li>
<li><p>We can map out some descriptions</p>
<pre class="text"><code>  Dress: stock reference: 'D0001' price: 100.0 colour: red pattern: swirly size: 12
  Pants: stock reference: 'TR12327'price: 50 colour: black pattern: plain length: 30 waist: 30</code></pre></li>
<li><p>Now that we have our <em>data requirements</em> and some mock items, we want to carry out <em>data design</em></p></li>
<li><p>Data design is the process of specifying how we represent a programs data</p></li>
</ul>
</section>
<section id="object-oriented-design" class="level4">
<h4 class="anchored" data-anchor-id="object-oriented-design">Object-oriented Design</h4>
<ul>
<li>A design paradigm we could use is to represent each data object as a class
<ul>
<li>This object-centric approach is called <em>object-oriented programming</em></li>
</ul></li>
<li>Solution elements are mapped to software objects</li>
<li>A way to formulate classes is to break a problem statement down into <em>nouns</em></li>
<li><em>nouns</em> describe <em>things</em> which naturally translate to <em>objects</em>
<ul>
<li><p>e.g.&nbsp;a food service point-of-sale system might be described as</p>
<div id="2ddc5244" class="cell" data-execution_count="1">
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre>The <span class="ansi-red-fg">customer </span>will select a <span class="ansi-red-fg">dish</span> from the <span class="ansi-red-fg">menu</span> and add it to his <span class="ansi-red-fg">order</span>.
</pre>
</div>
</div>
</div></li>
<li><p>The four nouns above (written in red) could map to classes in the application</p>
<ul>
<li>This is only a starting point</li>
<li>We would have to dive deeper into the design requirements with the client</li>
</ul></li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Don’t write any code before you have completed your data design</strong></p>
<p>Design mistakes are easiest to correct early in a project’s lifecycle. For this reason data design is almost always carried out and completed before we actually starting to right code.</p>
<p>If we were to continue developing the restaurant point of sale system above, we would have to work through the data requirements with the client. For example if we were developing a <code>Customer</code> class, we might map out paper variants of the class, and work through usage scenarios with the client to ensure all the details are captured.</p>
<p>For example if a customer needed to provide a telephone number we would want to capture this design requirement early.</p>
</div>
</div>
<ul>
<li>For our first design we could implement all these different stock items as different classes, (you can find the code in <a href="./Examples/01_SeparateClasses/SeparateClasses.py">SeparateClasses.py</a>)</li>
</ul>
<div id="062929a2" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 11.1 Fashion Items as Separate Classes</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Mocks out the class-based implementation of the fashion items, treating</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># each different item type as it's own standalone class</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dress:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a Dress</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size):</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Dress` instance</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference code</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress colour</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress pattern</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">        size : int</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">            dress size</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> price(<span class="va">self</span>):</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__price</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> stock_level(<span class="va">self</span>):</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_level : int</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="co">            amount of stock in inventory</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__stock_level</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Pants:</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a pair of Pants</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, length, waist):</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Pants` instance</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference code</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a><span class="co">            pants price</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the pants colour</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the pants pattern</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a><span class="co">        length: int</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="co">            length of the pants</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a><span class="co">        waist : int</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a><span class="co">            pants waist size</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.length <span class="op">=</span> length</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.waist <span class="op">=</span> waist</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> price(<span class="va">self</span>):</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__price</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> stock_level(<span class="va">self</span>):</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_level : int</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a><span class="co">            amount of stock in inventory</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__stock_level</span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> Dress(stock_ref<span class="op">=</span><span class="st">"D001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"Red"</span>, pattern<span class="op">=</span><span class="st">"Swirly"</span>, size<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> Pants(</span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>    stock_ref<span class="op">=</span><span class="st">"TR12327"</span>, price<span class="op">=</span><span class="dv">50</span>, colour<span class="op">=</span><span class="st">"Black"</span>, pattern<span class="op">=</span><span class="st">"Plain"</span>, length<span class="op">=</span><span class="dv">30</span>, waist<span class="op">=</span><span class="dv">25</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x.price)</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y.stock_level)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>100
0</code></pre>
</div>
</div>
<ul>
<li>We define a <code>Dress</code> and a <code>Pants</code> class</li>
<li>Each class has to have an <code>__init__</code> to set them up</li>
<li>Both classes have private price and stock levels
<ul>
<li>These are important parts of the inventory system that should have controlled modification</li>
<li>We don’t want the price being modified and overcharging customers</li>
<li>We don’t want the stock level being off causing us to mis-order</li>
</ul></li>
<li>Both classes have properties to access price and stock levels
<ul>
<li>Later we’ll make methods to control these</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Avoid overusing block-copy</strong></p>
<p>Using a text editor it might seem convenient to copy a large block of code when we have to reuse it elsewhere. Whenever you feel yourself copying lets of code to different sections this is usually a good indicator that something is not right. You should aim to write a piece of code <em>once</em>. Code written once is more maintainable, as we only need to modify it in one place. If the code is used multiple times, it is a good candidate to be converted into a function or a method</p>
<p>As mentioned block copying is liable to introduce bugs. If we need to slightly modify the code in the new section we have to make sure we do it correctly (which might be hard if you’ve copied a big chunk). Additionally if you latter find a bug, you may have to fix <em>all</em> the copies (which requires you to remember where they are).</p>
<p>Use this as advice, if you find yourself copying lots of code, its a good time to take a step back at look at your overall design</p>
</div>
</div>
</section>
<section id="creating-superclasses-and-subclasses" class="level4">
<h4 class="anchored" data-anchor-id="creating-superclasses-and-subclasses">Creating superclasses and subclasses</h4>
<ul>
<li><p>Many languages (including python) let us use <em>inheritance</em></p></li>
<li><p>Inheritance allows one class to <em>base</em> itself on another</p>
<ul>
<li>i.e.&nbsp;it <em>inherits</em> the behaviour of another class</li>
</ul></li>
<li><p>The original class is called the <em>superclass</em></p></li>
<li><p>Creating this new class is called <em>extending the superclass</em></p></li>
<li><p>By default all python classes extend the <code>object</code> class</p></li>
<li><p>We could write this explicitly</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Contact(<span class="bu">object</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We can replace the <code>object</code> in the above with the class we want to use as a superclass</p></li>
<li><p>Looking at our data design we can see there is a bunch of behaviour common to all stock items</p></li>
<li><p>We can start by defining a <code>StockItem</code> to act as a superclass</p>
<ul>
<li><p><code>StockItem</code> stores all common attributes</p>
<ol type="1">
<li>Stock reference</li>
<li>Price</li>
<li>Colour</li>
<li>Stock level</li>
</ol></li>
</ul></li>
<li><p><code>Dress</code> and <code>Pants</code> now extend <code>StockItem</code></p>
<ul>
<li>The other stock items will do so as well</li>
</ul></li>
<li><p>The diagram below shows what’s called a <em>class diagram</em> or <em>inheritance hierarchy</em></p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
title: Fashion Shop Class Diagram
---

classDiagram
    class object

    class StockItem {
        str stock_ref
        str item_name
        str colour
        number price
        int stock_level
    }

    class Dress {
        str pattern
        int size
    }

    class Pants {
        int length
        str pattern
        int waist
    }

    object &lt;|-- StockItem
    StockItem &lt;|-- Dress
    StockItem &lt;|--  Pants
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>We can see that <em>both</em> <code>Pants</code> and <code>Dress</code> are <em>subclasses</em> of <code>StockItem</code></li>
<li>The inverse relationship is <code>StockItem</code> is the <em>superclass</em> of <code>Pants</code> and <code>Dress</code></li>
<li>We call this inheritance because the subclasses inherit the attributes of the superclass</li>
<li>When building an inheritance hierarchy you need to focus on your data
<ul>
<li>Here we have a collection of related data items</li>
<li>The basic behaviour of a data item is the same</li>
<li>The related items also have some common data attributes</li>
</ul></li>
<li>We capture the common behaviour and data in a superclass
<ul>
<li>Then <em>extend</em> with subclasses the specific behaviour of different data items</li>
</ul></li>
<li>Also means that if we add <em>new</em> common behaviour we only have to add it in one place
<ul>
<li>i.e.&nbsp;the superclass</li>
<li>Otherwise we would have to put it in all the classes</li>
</ul></li>
</ul>
<section id="abstraction-in-software-design" class="level5">
<h5 class="anchored" data-anchor-id="abstraction-in-software-design">Abstraction in Software Design</h5>
<ul>
<li>Abstraction is a term used to describe attempting to capture behaviours and data of a system at a higher level</li>
<li>Here by introducing a <code>StockItem</code> class we are attempting to talk about the behaviour of stock items in generality as opposed to any specific type of stock item
<ul>
<li><p>i.e.&nbsp;We know that a stock item should be,</p>
<ol type="1">
<li>Able to be added</li>
<li>Able to be sold</li>
<li>Find out what stock items we have</li>
</ol></li>
<li><p>We do not capture the specifics of <em>how</em> these processes occur</p>
<ul>
<li>Just know that we need to capture them in our program</li>
</ul></li>
</ul></li>
<li>Abstract lets us look at processes without getting caught up in the details</li>
<li>Later we can go and fill those details in</li>
<li>Typically as we move <em>down</em> a class hierarchy, we should move from the <em>more abstract</em> to the <em>more concrete</em>
<ul>
<li>At the highest level a class or interface might just say what methods an object should have</li>
<li>The next level down might implement some common attributes and methods (<code>StockItem</code>)</li>
<li>The next level down might provide specialised attributes and specific methods (<code>Dress</code> and <code>Pants</code>)</li>
</ul></li>
</ul>
</section>
<section id="code-analysis-understanding-inheritance" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-understanding-inheritance">Code Analysis: Understanding Inheritance</h5>
<p><em>Work through the following questions on object-oriented design and inheritance. It’s a good idea to consider your own thoughts on the topic</em></p>
<ol type="1">
<li><p><em>Why don’t we put all the attributes in one class and not bother with subclasses?</em></p>
<ul>
<li>We could add every possible attribute to <em>one</em> class</li>
<li>However then we would have to handle the fact that some attributes are not defined for certain types
<ul>
<li>e.g.&nbsp;<code>Dress</code> has no <code>waist</code> attribute and <code>Pants</code> has no <code>size</code></li>
</ul></li>
<li>As we add more classes we would have to consider all the valid possible combinations of attributes and manage them
<ul>
<li>Exactly the kind of thing that the subclass approach does naturally</li>
</ul></li>
<li>Additionally if we want to customise behaviour by type, we would have to add an attribute to track this
<ul>
<li>Inheritance provides <em>polymorphism</em> as a way to do this naturally</li>
</ul></li>
</ul></li>
<li><p><em>Why is the superclass called super?</em></p>
<ul>
<li>It is derived from mathematical terminology around sets</li>
<li>In maths <span class="math inline">\(A\)</span> is a subset of <span class="math inline">\(B\)</span> if <span class="math inline">\(A\)</span> is entirely contained in <span class="math inline">\(B\)</span></li>
<li><span class="math inline">\(A\)</span> is a superset of <span class="math inline">\(B\)</span> if <span class="math inline">\(A\)</span> contains <span class="math inline">\(B\)</span></li>
<li>The idea carries onto the language of classes, where the superclass is called super because every <em>subclass</em> <strong>is</strong> also an instance of the superclass.</li>
</ul></li>
<li><p><em>Which is most abstract, a superclass or a subclass?</em></p>
<ul>
<li>Recall, the concept of the class hierarchy</li>
<li>Moving <em>down</em> into subclasses is getting more concrete (less abstract)</li>
<li>Moving <em>up</em> into superclasses is getting more abstract</li>
</ul></li>
<li><p><em>Can you extend a subclass?</em></p>
<ul>
<li>Yes</li>
<li>We can see this in the class hierarchy</li>
<li><code>StockItem</code> is a subclass of <code>Object</code></li>
<li><code>Dress</code> <em>extends</em> <code>StockItem</code> to create a new subclass</li>
</ul></li>
<li><p><em>Why is the</em> <code>pattern</code> <em>attribute not in the</em> <code>StockItem</code> <em>class?</em></p>
<ul>
<li>Looking at our current class diagram this does make sense
<ul>
<li>Both <code>Dress</code> and <code>Pants</code> have a pattern attribute</li>
</ul></li>
<li>However our client had other types of items e.g.&nbsp;Hat that didn’t have a pattern attribute</li>
<li>If we wanted to remove the duplication we might introduce a <code>PatternedItem</code> between <code>StockItem</code> and the <code>Dress</code> and <code>Pants</code> classes
<ul>
<li>However for one specific attribute this is probably not necessary right now</li>
<li>Especially as the <code>PatternedItem</code> seems partially arbitrary rather than reflecting an actual category of item</li>
</ul></li>
</ul></li>
<li><p><em>Will our system ever create a</em> <code>StockItem</code> <em>object?</em></p>
<ul>
<li>Nothing prevents us from doing so</li>
<li>However, in practice we there’s no real use case
<ul>
<li><code>StockItem</code> is not representing an actual physical item</li>
<li>It represents the concept of a stock item</li>
</ul></li>
<li>If we wanted to do we could define <code>StockItem</code> as an <em>abstract class</em>
<ul>
<li>Abstract classes can’t be instantiated</li>
<li>They are good for defining the structure and behaviour of a class</li>
<li>Implementation left to the subclasses</li>
</ul></li>
</ul></li>
<li><p><em>The client decides in future she may like to track which customers have bought which stock items. Here are three potential implementations. Which implementation makes the most sense?</em></p>
<ol type="1">
<li>Extend the <code>StockItem</code> class to make a <code>Customer</code> subclass that contains the customer details because customers buy <code>StockItems</code></li>
<li>Add <code>Customer</code> details to each <code>StockItem</code></li>
<li>Create a new <code>Customer</code> class that contains a list of the <code>StockItems</code> that the <code>Customer</code> has bought</li>
</ol>
<ul>
<li>Class hierarchies should reflect an <em>is-a</em> relationship</li>
<li>A Customer <em>is not</em> a Stock item</li>
<li>So option 1 is out</li>
<li>Multiple customers might buy the same stock item</li>
<li>The stock item also represents a category of stock as opposed to one specific item</li>
<li>So we don’t want to have a <code>Customer</code> field
<ul>
<li>We could have a list of customers if we wanted to do it this way</li>
</ul></li>
<li>However, in the future we might want to add more behaviour for interacting with a customer itself
<ul>
<li>Thus makes sense to define a <code>Customer</code> class</li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="storing-data-in-a-class-hierarchy" class="level5">
<h5 class="anchored" data-anchor-id="storing-data-in-a-class-hierarchy">Storing Data in a Class Hierarchy</h5>
<ul>
<li>Now lets refactor our code to use a class hierarchy</li>
<li>The naive implementation looks like,</li>
</ul>
<div id="bf0a8e1d" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> abc <span class="im">import</span> ABC</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockItem(ABC):</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Abstract base class representing a single inventory item.</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">        reference id of the stock item</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the item's colour</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour):</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `StockItem` instance</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference id</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="co">            stock price</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co">            description of stock item's colour</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> price(<span class="va">self</span>):</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__price</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> stock_level(<span class="va">self</span>):</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_level : int</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="co">            amount of stock in inventory</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__stock_level</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>The <code>StockItem</code> looks pretty standard for a class</p></li>
<li><p>You may observe that we import <code>ABC</code> from the <code>abc</code> module</p>
<ul>
<li><code>abc</code> is a python module to provide abstract classes</li>
<li><code>ABC</code> is the superclass for abstract classes</li>
</ul></li>
<li><p>We inherit from <code>ABC</code> to make <code>StockItem</code> abstract</p>
<ul>
<li>For now this only indicates that the user should not directly instantiate it</li>
<li>We’ll see later the concept of <a href="#abstract-methods">abstract methods</a> which can be used to prevent instantiation of an abstract class</li>
</ul></li>
<li><p>We move the common attributes and properties to the class</p></li>
<li><p>Define an <code>__init__</code> as usual</p></li>
<li><p>Now lets define our <code>Dress</code> class, naively you might write,</p>
<div id="1176f2ca" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Dress(StockItem):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory details for a Dress</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Inherits from `StockItem`</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">          dress reference id</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">          dress price</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">          description of dress's colour</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">      pattern : str</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the dress pattern</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">      size : int</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">          dress size</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co">      `StockItem` : Parent Class</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size):</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `Dress` instance</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference code</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="co">              dress price</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the dress colour</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="co">          pattern : str</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the dress pattern</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co">          size : int</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co">              dress size</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.size <span class="op">=</span> size</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p><code>Dress</code> subclasses <code>StockItem</code></p></li>
<li><p>We add the unique attributes</p></li>
<li><p>Currently no need to define any new behaviour</p></li>
<li><p>However, when we try to create a <code>Dress</code> instance and use it we see</p>
<div id="2798a06b" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> Dress(stock_ref<span class="op">=</span><span class="st">"D0001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"red"</span>, pattern<span class="op">=</span><span class="st">"swirly"</span>, size<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x.pattern)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x.price)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>swirly</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[5]</span><span class="ansi-green-fg">, line 3</span>
<span class="ansi-green-fg">      1</span> x = Dress(stock_ref=<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">D0001</span><span class="ansi-yellow-fg">"</span>, price=<span class="ansi-green-fg">100</span>, colour=<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">red</span><span class="ansi-yellow-fg">"</span>, pattern=<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">swirly</span><span class="ansi-yellow-fg">"</span>, size=<span class="ansi-green-fg">12</span>)
<span class="ansi-green-fg">      2</span> <span style="color:rgb(0,135,0)">print</span>(x.pattern)
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">3</span> <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">x</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">price</span>)

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[3]</span><span class="ansi-green-fg">, line 41</span>, in <span class="ansi-cyan-fg">StockItem.price</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-fg">     35</span> <span style="color:rgb(175,0,255)">@property</span>
<span class="ansi-green-fg">     36</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">price</span>(<span style="color:rgb(0,135,0)">self</span>):
<span class="ansi-green-fg">     37</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic" class="ansi-yellow-fg">"""</span>
<span class="ansi-green-fg">     38</span> <span style="font-style:italic" class="ansi-yellow-fg">    price : int | float</span>
<span class="ansi-green-fg">     39</span> <span style="font-style:italic" class="ansi-yellow-fg">        dress price</span>
<span class="ansi-green-fg">     40</span> <span style="font-style:italic" class="ansi-yellow-fg">    """</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">41</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__price</span>

<span class="ansi-red-fg">AttributeError</span>: 'Dress' object has no attribute '_StockItem__price'</pre>
</div>
</div>
</div></li>
<li><p>We see that we have no issue creating the object</p></li>
<li><p>Can also access the attributes defined in the subclass (<code>pattern</code>)</p></li>
<li><p>But we get an error, when we try to access a property on the superclass (<code>price</code>)</p></li>
<li><p>In fact the error tells us that we can’t find the attribute <code>_StockItem__price</code></p></li>
<li><p>Why? Well if we look at the initializer we never seem to have set up the stock level, price, stock reference or colour</p>
<ul>
<li>We can’t just write <code>self.colour = colour</code> etc</li>
<li>Because this adds an attribute on the subclass</li>
<li>Also basically means we’ve rewritten the superclass <code>__init__</code> again</li>
</ul></li>
<li><p>Need a way to pass arguments to the <code>__init__</code> method of the superclass</p></li>
<li><p>We can do this using <code>super()</code></p>
<ul>
<li><code>super()</code> is like <code>self</code></li>
<li>Used to return a reference to the superclass instance</li>
</ul></li>
</ul>
<div id="deb1c73a" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dress(StockItem):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a Dress</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Inherits from `StockItem`</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">        dress reference id</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">    price : int | float</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co">        dress price</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co">        description of dress's colour</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co">    pattern : str</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the dress pattern</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">    size : int</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="co">        dress size</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">    `StockItem` : Parent Class</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size):</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Dress` instance</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference code</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress colour</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress pattern</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="co">        size : int</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="co">            dress size</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour)</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> Dress(stock_ref<span class="op">=</span><span class="st">"D0001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"red"</span>, pattern<span class="op">=</span><span class="st">"swirly"</span>, size<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x.pattern)</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x.price)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>swirly
100</code></pre>
</div>
</div>
<ul>
<li>We use <code>super()</code> to get a reference to the super object</li>
<li>Then call the <code>__init__</code> object on the instance and pass the required parameters</li>
<li><strong>Key Takeaway:</strong> When initialising a subclass you must explicitly initialise the superclass too</li>
<li>The complete code for our class hierarchy incorporating <code>Pants</code> can be found in <a href="./Examples/02_ClassHierarchy/ClassHierarchy.py">ClassHierarchy.py</a></li>
</ul>
</section>
<section id="manage-the-item-name-in-the-fashion-shop-program" class="level5">
<h5 class="anchored" data-anchor-id="manage-the-item-name-in-the-fashion-shop-program">Manage the Item Name in the Fashion Shop Program</h5>
<ul>
<li><p>So far each class name matches the stock type being stored</p></li>
<li><p>We might not want to maintain this relationship</p></li>
<li><p>e.g.&nbsp;if we introduced an “Evening Dress” we can’t create a <code>Evening Dress</code> class</p>
<ul>
<li>Since class names must be contiguous</li>
</ul></li>
<li><p>The client thus wants us to provide a way of giving a user friendly string description off the item name</p></li>
<li><p>In the class diagram we defined a property called an <code>Item Name</code> in the <code>Stock Item</code></p>
<ul>
<li>Intended to hold the item name</li>
</ul></li>
<li><p>Provides a user friendly string name</p></li>
<li><p>Implement as a class property</p>
<div id="dff0a0b4" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem(<span class="bu">object</span>):</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_level : int</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">              amount of stock in inventory</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Stock Item"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>We can then override this attribute in the subclasses</p>
<ul>
<li>Overridden attributes are used inplace of the superclass implementation</li>
</ul></li>
<li><p>e.g.&nbsp;For the <code>Dress</code> class we might write</p>
<div id="03dd07ba" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Dress(StockItem):</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Dress"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>Then calling <code>item_name</code> on a <code>Dress</code> instance should return <code>"Dress"</code> instead of <code>"Stock Item"</code> as demonstrated below</p>
<div id="d21dcd00" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>    item <span class="op">=</span> StockItem()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"item name is"</span>, item.item_name)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    dress <span class="op">=</span> Dress()</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"dress name is"</span>, dress.item_name)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>item name is Stock Item
dress name is Dress</code></pre>
</div>
</div></li>
</ul></li>
</ul>
<section id="abstract-methods" class="level6">
<h6 class="anchored" data-anchor-id="abstract-methods">Abstract Methods</h6>
<ul>
<li>We’ve just seen how <code>StockItem</code> defines a property <code>item_name</code> which returns a string</li>
<li>However, the intention is that this is overwritten by a subclass</li>
<li>It would be good if we could force a subclass to define this method</li>
<li>We saw that the <code>abc</code> module allowed us to inherit a class <code>ABC</code> that meant the class should not be directly instantiated
<ul>
<li>Is there something similar for methods</li>
</ul></li>
<li>Turns out there is!
<ul>
<li><code>abc</code> contains a <code>abstractmethod</code> decorator</li>
<li>If a class has methods decorated with <code>@abstractmethod</code> subclasses can’t be instantiated unless they override all the abstract methods</li>
</ul></li>
<li>We can see this in practice below</li>
</ul>
<div id="7956a7c1" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> abc</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">@property</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">@abc.abstractmethod</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>            <span class="co">"""</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">            stock_level : int</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">                amount of stock in inventory</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">            """</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> Dress(StockItem):</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">@property</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="st">"Dress"</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> Pants(StockItem):</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>Here we define <code>StockItem</code> with <code>item_name</code> as an abstract property</p>
<ul>
<li>We do this by using both the <code>@property</code> and <code>@abstractmethod</code> decorators on the method</li>
</ul></li>
<li><p>Since <code>item_name</code> is always overridden, rather than return a value, we simply use <code>pass</code> to indicate a placeholder</p></li>
<li><p>We next define <code>Dress</code> and <code>Pants</code> as two subclasses</p>
<ul>
<li><code>Dress</code> overrides the <code>item_name</code> method</li>
<li><code>Pants</code> does not</li>
</ul></li>
<li><p>Let’s see what happens when we try to instantiate these</p>
<div id="66dab432" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>  d <span class="op">=</span> Dress()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(d.item_name)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  p <span class="op">=</span> Pants()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(p.item_name)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dress</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[11]</span><span class="ansi-green-fg">, line 4</span>
<span class="ansi-green-fg">      1</span> d = Dress()
<span class="ansi-green-fg">      2</span> <span style="color:rgb(0,135,0)">print</span>(d.item_name)
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">4</span> p = <span class="ansi-yellow-bg">Pants</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">      5</span> <span style="color:rgb(0,135,0)">print</span>(p.item_name)

<span class="ansi-red-fg">TypeError</span>: Can't instantiate abstract class Pants without an implementation for abstract method 'item_name'</pre>
</div>
</div>
</div></li>
<li><p>We can see that the <code>Dress</code> instantiation works as expected</p></li>
<li><p>We can call <code>Dress</code> and access the overridden <code>item_name</code> property</p></li>
<li><p>However, when we try to instantiate <code>p</code> as <code>Pants</code> we get a <code>TypeError</code>!</p>
<ul>
<li>The message tells us we need to implement the abstract method <code>item_name</code></li>
</ul></li>
</ul>
</section>
</section>
<section id="add-a-__str__-method-to-classes" class="level5">
<h5 class="anchored" data-anchor-id="add-a-__str__-method-to-classes">Add a <code>__str__</code> Method to Classes</h5>
<ul>
<li>As <a href="../../02_AdvancedProgramming/10_UseClassesToCreateActiveObjects/Chapter_10.html#the-__str__-method-in-a-class">seen earlier</a> objects can use the <code>__str__</code> method to define a string representation</li>
<li>We should add these to <code>StockItem</code> and it’s derived classes</li>
<li>Defining a <code>__str__</code> method is technically overriding the <code>__str__</code> method on the parent
<ul>
<li>Including the <code>object</code> class</li>
</ul></li>
</ul>
<section id="make-something-happen-method-overriding-in-classes" class="level6">
<h6 class="anchored" data-anchor-id="make-something-happen-method-overriding-in-classes">Make Something Happen: Method Overriding in Classes</h6>
<p><em>Open the python interpreter and work through the following steps to understand method overriding</em></p>
<p><em>Enter the following statement</em></p>
<div id="0085b581" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>o <span class="op">=</span> <span class="bu">object</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>This creates an <code>object</code> instance referenced by <code>o</code>. If we print the value of <code>o</code> we are calling the <code>__str__</code> method on the <code>object</code> class</p>
<p><em>Run the print statement as below</em></p>
<div id="f72961c6" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(o)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;object object at 0x7f78a8d26be0&gt;</code></pre>
</div>
</div>
<p><code>print</code> requires a <code>str</code> argument, so <code>o</code> is converted to a string by calling its <code>__str__</code> method. In this case the <code>__str__</code> method of the <code>object</code> class. We can see the result is a message that indicates the type of the object and the memory address where the instance is stored.</p>
<p>This should be familiar to what we see in the earlier <code>Contact</code> class before we defined a <code>__str__</code> method. What happened there was that when <code>__str__</code> was called to convert a <code>Contact</code> to an string, it deferred to the superclass <code>__str__</code> method which was <code>object</code></p>
<p>To define different behaviour we have to provide our own <code>__str__</code> method which is said to <em>override</em> the superclass <code>__str__</code> method.</p>
<p><em>Define a new class</em> <code>StrTest</code> <em>by entering the statements below</em></p>
<div id="58e182fc" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StrTest(<span class="bu">object</span>):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"string from StrTest"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Remember that we don’t have to explicitly inherit from <code>object</code> we’ve just done it to be clear</p>
<p>If we now print this new <code>StrTest</code> object, we can see that the new <code>__str__</code> method on the <code>StrTest</code> is used.</p>
<p><em>Test this by running the line below</em></p>
<div id="33e8c456" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(StrTest())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>string from StrTest</code></pre>
</div>
</div>
<p>But what if we want to use the <code>__str__</code> method from the superclass as part of the <code>__str__</code> method of the subclass? Well we can do so by using <code>super()</code> to access the superclass instance associated with the subclass instance. We can then directly reference the <code>__str__</code> method</p>
<p><em>Demonstrate this by defining a new class, as below</em></p>
<div id="f2e3cf79" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StrTestSub(StrTest):</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">super</span>().<span class="fu">__str__</span>() <span class="op">+</span> <span class="st">"..with sub"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The <code>__str__</code> method still overrides the superclass, but <code>super()</code> lets us incorporate the <code>__str__</code> result from the <code>StrTest</code> superclass. We can see this behaviour if we try to print the object.</p>
<p><em>Call print on an instance of</em> <code>StrTestSub</code> <em>as below</em></p>
<div id="f33d99ce" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(StrTestSub())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>string from StrTest..with sub</code></pre>
</div>
</div>
<ul>
<li><p>Now let’s define <code>__str__</code> methods for our <code>StockItem</code> and <code>Subclasses</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""Stock Reference: </span><span class="sc">{0}</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="st">Type: </span><span class="sc">{1}</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="st">Price: </span><span class="sc">{2}</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="st">Stock level: </span><span class="sc">{3}</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="st">Colour: </span><span class="sc">{4}</span><span class="st">"""</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.stock_ref, <span class="va">self</span>.item_name, <span class="va">self</span>.price, <span class="va">self</span>.stock_level, <span class="va">self</span>.colour</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>          )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>This <code>__str__</code> item uses a template string which is formatted</p></li>
<li><p><code>StockItem</code> attributes are printed one per line</p></li>
<li><p>Why are we making a <code>__str__</code> method for the <code>StockItem</code> when we’re going to override this?</p></li>
<li><p>Well the subclasses all have to refer to the common attributes in the <code>StockItem</code></p></li>
<li><p>Makes sense to use the <code>__str__</code> method for the superclass to handle how we represent these common attributes</p></li>
<li><p>Let’s see how we put this into practice with the <code>Dress</code> subclass</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dress(StockItem):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="st">Pattern: </span><span class="sc">{1}</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="st">Size: </span><span class="sc">{2}</span><span class="st">"""</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.pattern, <span class="va">self</span>.size)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>We use the <code>super()</code> to get the initial part of the string</li>
<li>Then again use a template string
<ul>
<li>First inject the superclasses string</li>
<li>Then add on the new attributes in the same style</li>
</ul></li>
<li>Let us look at this in practice</li>
</ul>
<div id="de38b319" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> Dress(stock_ref<span class="op">=</span><span class="st">"D001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"red"</span>, pattern<span class="op">=</span><span class="st">"swirly"</span>, size<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stock Reference: D001
Type: Dress
Price: 100
Stock level: 0
Colour: red
Pattern: swirly
Size: 12</code></pre>
</div>
</div>
<ul>
<li>We can the final result merges the superclasses string with the added attributes of the <code>Dress</code> class. You can see the complete code in <a href="./Examples/03_StockItemsWithStr/StockItemsWithStr.py">Stock Items with Str</a></li>
</ul>
</section>
</section>
<section id="code-analysis-understanding-method-overriding" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-understanding-method-overriding">Code Analysis: Understanding Method Overriding</h5>
<p><em>Consider the following questions about method overriding</em></p>
<ol type="1">
<li><p><em>How does method overriding work?</em></p>
<ul>
<li>When a method is called, python looks at the object to see if the method exists</li>
<li>If it doesn’t python looks up the class hierarchy to see if it can find a matching method</li>
<li>First matching method found is called</li>
<li>If all the superclasses are exhausted then an <code>AttributeError</code> is raised</li>
</ul></li>
<li><p><em>Is an overriding method forced to call the method it is overriding?</em></p>
<ul>
<li>No</li>
<li>You only need to do it, if you need to access the superclasses implementation</li>
<li><code>__str__</code> method in the <code>Dress</code> class calls the <code>__str__</code> in the <code>super</code> because the functionality is useful
<ul>
<li>Means if <code>StockItem</code> is updated, we can update the <code>__str__</code> method and it automatically propagates through to the <code>Dress</code> class</li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="version-management-in-the-fashion-shop-program" class="level5">
<h5 class="anchored" data-anchor-id="version-management-in-the-fashion-shop-program">Version Management in the Fashion Shop Program</h5>
<ul>
<li>Recall in the <a href="../../02_AdvancedProgramming/10_UseClassesToCreateActiveObjects/Chapter_10.html#manage-class-versions">Time Tracker</a> we versioned our <code>Session</code> and <code>Contact</code> classes</li>
<li>There the goal was to keep old data files usable
<ul>
<li>We want to do the same for our Fashion Shop</li>
</ul></li>
<li>Where should the version numbers go?
<ul>
<li><p>For example <code>Dress</code> is a subclass of <code>StockItem</code>, so we could</p>
<ol type="1">
<li>Version in the <code>StockItem</code> superclass</li>
<li>Version in the <code>Dress</code> superclass</li>
<li>Version in both the <code>StockItem</code> and the <code>Dress</code> superclass</li>
</ol></li>
<li><p>We want both, why?</p>
<ul>
<li><code>StockItem</code> might change, but the subclasses don’t
<ul>
<li>We don’t want to bump every subclass version</li>
</ul></li>
<li><code>Dress</code> might change
<ul>
<li><code>StockItem</code> doesn’t, so don’t want to bump it because then that would propagate through to all the other subclasses</li>
</ul></li>
</ul></li>
</ul></li>
<li>So we need to implement a <code>version</code> and <code>check_version</code> for both</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour):</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a StockItem instance and upgrades it if required</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span>  <span class="co"># for version 1, no need to check</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>For <code>StockItem</code> we add a version attribute labelled <code>__StockItem_version</code> to distinguish from the version numbers of the subclasses
<ul>
<li>Version number is hard-coded by the constructor</li>
<li>When we create a new version of the <code>StockItem</code> this is where we bump the version</li>
</ul></li>
<li>Currently there is only one version of the <code>StockItem</code> class, so the corresponding <code>check_version</code> method doesn’t need to do anything
<ul>
<li>We still need to include it for the future API</li>
<li>We just use <code>pass</code> to make it a placeholder method for now</li>
</ul></li>
<li>We can now define versions and version checking for our subclasses, e.g.&nbsp;for <code>Dress</code></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dress(StockItem):</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size):</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__Dress_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a `Dress` instance and upgrades it if required</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().check_version()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>As before we add a version attribute (here <code>__Dress_version</code>)</li>
<li>We define a new <code>check_version</code>
<ul>
<li>Again, right now there is only one version of the <code>Dress</code> so we don’t need to do any self upgrades</li>
<li>However, <code>Dress</code> doesn’t know about the version of <code>StockItem</code> so we have to call <code>super</code> to run <code>check_version</code> for the superclass instance</li>
</ul></li>
<li>Together this means we can update <code>Dress</code> and <code>StockItem</code> independently and saved objects will still be synchronised across both class definitions</li>
<li>The implementation for <code>Pants</code> is similar and can be found along with the complete implementation in <a href="./Examples/04_VersionedStockItems/VersionedStockItems.py">Versioned Stock Items</a></li>
</ul>
</section>
<section id="polymorphism-in-software-design" class="level5">
<h5 class="anchored" data-anchor-id="polymorphism-in-software-design">Polymorphism in Software Design</h5>
<ul>
<li>Overriding methods is an example of a more broader concept of <em>polymorphism</em></li>
<li>Polymorphism refers to the same behaviour being able to be applied differently depending on the specific context or object
<ul>
<li>e.g.&nbsp;all python objects have a <code>__str__</code> method</li>
<li>defines how they are converted to a string representation</li>
<li>We can override the <code>__str__</code> method to make different objects have different behaviours
<ul>
<li>e.g.&nbsp;default <code>object</code> prints the memory address, an <code>int</code> gives a string representation of its number, and our <code>StockItem</code> class prints its attributes as a newline separated list</li>
</ul></li>
<li>This behaviour is said to be polymorphic, because different objects have different responses to the same behaviour (string conversion)</li>
</ul></li>
<li>Software is frequently polymorphic
<ul>
<li>e.g.&nbsp;a Play button might be used to start playback of music, video or a slide show
<ul>
<li>Same concept (play button)</li>
<li>Different outcome</li>
</ul></li>
</ul></li>
<li>Polymorphism and Abstraction are typically a partnership
<ul>
<li>At an abstract level one might define a general set of behaviours a group of similar objects or classes need to do (e.g.&nbsp;“be played”)</li>
<li>Then use polymorphic behaviour to capture that common concept in one function, say <code>play</code> that is implemented differently for each class e.g.&nbsp;music, video, slide show</li>
</ul></li>
</ul>
<section id="code-analysis-understanding-polymorphism" class="level6">
<h6 class="anchored" data-anchor-id="code-analysis-understanding-polymorphism">Code Analysis: Understanding Polymorphism</h6>
<p><em>Try and work through the following questions about polymorphism before reading the answers</em></p>
<ol type="1">
<li><p><em>Is polymorphism all about providing methods in a class hierarchy?</em></p>
<ul>
<li>No</li>
<li>In this example we’ve used a class hierarchy
<ul>
<li><code>__str__</code> behaves differently, but all objects have a <code>__str__</code></li>
<li>However we have defined a <code>check_version</code></li>
<li><code>StockItem</code> and <code>Dress</code> both behave differently when <code>check_version</code> is called
<ul>
<li><em>But</em> another object say <code>Book</code> might also have a <code>check_version</code> function</li>
<li>Again behaves completely differently</li>
<li>But no direct method overwrite chain</li>
<li>Would still say this behaviour is polymorphic</li>
</ul></li>
</ul></li>
<li>Polymorphism is a broader concept that a class hierarchy
<ul>
<li>Though we’ve seen, a class hierarchy is one way of structuring polymorphic behaviour</li>
</ul></li>
</ul></li>
<li><p><em>How do I know which methods in my application should be polymorphic?</em></p>
<ul>
<li>This is part of the design process</li>
<li>Identify the similar behaviours performed by different objects that work differently for each</li>
<li>e.g.&nbsp;in a video game all enemies might <em>attack</em> but different enemy types might do so differently
<ul>
<li>Could then define a class hierarchy with some base enemy type</li>
<li>This could then define <code>attack</code>, etc.
<ul>
<li>Subclasses then override the behaviour polymorphically</li>
<li>But we can still talk about “enemies” as a whole</li>
</ul></li>
</ul></li>
</ul></li>
</ol>
</section>
</section>
<section id="protect-data-in-a-class-hierarchy" class="level5">
<h5 class="anchored" data-anchor-id="protect-data-in-a-class-hierarchy">Protect Data in a Class Hierarchy</h5>
<ul>
<li><p>When constructing our classes we made some attributes private</p></li>
<li><p>How does this carry through the class hierarchy? e.g.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Abstract base class representing a single inventory item.</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Subclasses are expected to overwrite the `item_name` abstract</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">      property with a user friendly string description</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">          reference id of the stock item</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the item's colour</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour):</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `StockItem` instance</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference id</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a><span class="co">              stock price</span></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a><span class="co">              description of stock item's colour</span></span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>The above shows the <code>__init__</code> method for <code>StockItem</code></p></li>
<li><p>We can see some public attributes</p>
<ol type="1">
<li><code>stock_ref</code></li>
<li><code>colour</code></li>
</ol></li>
<li><p>These can be accessed by anyone</p>
<ul>
<li>Including subclasses</li>
</ul></li>
<li><p>Also some private ones</p>
<ol type="1">
<li><code>__price</code></li>
<li><code>__stock_level</code></li>
<li><code>__StockItem_version</code></li>
</ol></li>
<li><p>Private means restricted to the class in which it was declared</p>
<ul>
<li>Subclasses are still regarded as other classes</li>
<li>Private variables are thus not accessible in subclasses</li>
</ul></li>
<li><p>Sometimes people refer to variables marked with <code>_</code> i.e.&nbsp;one underscore as <em>Protected</em></p>
<ul>
<li>A protected variable is one that can be accessed by the class it is defined in, <em>or</em> any subclasses of that class</li>
</ul></li>
<li><p>When designing a class hierarchy you should think about how the data may be used by subclasses</p></li>
<li><p>If you think you might need to customise behaviour on an attribute</p>
<ul>
<li>Consider a read-only property, or making it protected/public</li>
</ul></li>
</ul>
</section>
</section>
<section id="data-design-recap" class="level4">
<h4 class="anchored" data-anchor-id="data-design-recap">Data Design Recap</h4>
<ul>
<li><p>Let’s recap our design</p></li>
<li><p>The client owns a fashion shop</p></li>
<li><p>She sells several different clothing types</p></li>
<li><p>She needs a stock management system</p></li>
<li><p>All clothing items have</p>
<ol type="1">
<li>A stock reference</li>
<li>Price</li>
<li>Stock level</li>
<li>Colour</li>
</ol></li>
<li><p>Specific clothing items define additional attributes</p></li>
<li><p>To avoid duplicate code we define a <code>StockItem</code> class</p>
<ul>
<li><p>We define subclasses for specific items</p>
<ol type="1">
<li><code>Dress</code></li>
<li><code>Pants</code></li>
<li><code>Hat</code></li>
<li><code>Blouse</code></li>
</ol></li>
<li><p>subclasses extend the attributes on a <code>StockItem</code></p></li>
</ul></li>
<li><p>Each class has an <code>__init__</code> to initialise it</p>
<ul>
<li>Each subclass calls the superclass <code>__init__</code></li>
<li>Sets up the superclass instance</li>
</ul></li>
<li><p>We independently version the sub and super classes</p></li>
</ul>
<section id="code-analysis-data-design" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-data-design">Code Analysis: Data Design</h5>
<p><em>Try to answer the following questions about data design</em></p>
<ol type="1">
<li><p><em>Is the data design process now complete?</em></p>
<ul>
<li>No</li>
<li>To account for this we’ve introduced versioning to a our data objects
<ul>
<li>the version attributes and <code>check_version</code> should allow us to add new attributes or modify the objects</li>
</ul></li>
</ul></li>
<li><p><em>What happens if the fashion shop owner decides to sell a new kind of stock item? Suppose that she wanted to start selling Jeans, which are a type of pants that also has a style, which can be flared, bootleg or straight. What’s the best way to do this?</em></p>
<ul>
<li><p>We can add a new subclass</p>
<ol type="1">
<li>We could subclass <code>StockItem</code> as before
<ul>
<li>But then would have to duplicate the <code>Pants</code> code</li>
</ul></li>
<li>We can subclass <code>Pants</code></li>
</ol></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">class</span> Jeans(Pants):</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>     <span class="co">"""</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">     Represents the inventory details for a pair of Jeans</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">     Inherits from `Pants`</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">     Attributes</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">     ----------</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">     stock_ref : str</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">         pants reference id</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">     price : int | float</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">         pants price</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">     colour : str</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">         description of pants's colour</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">     pattern : str</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">         description of the pants pattern</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">     length : int</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">         length of the pants</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co">     waist : int</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co">         waist size of the pants</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co">     style : str</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="co">         style of the pants</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="co">     See Also</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co">     --------</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="co">     Pants : Parent Class</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="co">     """</span></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_level, price, colour, pattern, length, waist, style):</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>         <span class="co">"""</span></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="co">         Creates a `Jeans` instance</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a><span class="co">         Parameters</span></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a><span class="co">         ----------</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a><span class="co">         stock_ref : str</span></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a><span class="co">             stock reference code</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="co">         price : int | float</span></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a><span class="co">             pants price</span></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="co">         colour : str</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a><span class="co">             description of the pants colour</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a><span class="co">         pattern : str</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a><span class="co">             description of the pants pattern</span></span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a><span class="co">         length: int</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a><span class="co">             length of the pants</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a><span class="co">         waist : int</span></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a><span class="co">             pants waist size</span></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a><span class="co">         style : str</span></span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a><span class="co">             jeans style</span></span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a><span class="co">         """</span></span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>         <span class="co"># pants constructor</span></span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>         <span class="bu">super</span>().<span class="fu">__init__</span>(stock_level, price, colour, pattern, length, waist)</span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.style <span class="op">=</span> style <span class="co"># new attribute</span></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.__Jeans_version <span class="op">=</span> <span class="dv">1</span> <span class="co"># versioning</span></span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a>         pants_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a>         template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a><span class="st"> Style: </span><span class="sc">{1}</span><span class="st">"""</span></span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a>         <span class="cf">return</span> template.<span class="bu">format</span>(pants_details, <span class="va">self</span>.style)</span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a>     <span class="at">@property</span></span>
<span id="cb35-62"><a href="#cb35-62" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb35-63"><a href="#cb35-63" aria-hidden="true" tabindex="-1"></a>         <span class="cf">return</span> <span class="st">"Jeans"</span></span>
<span id="cb35-64"><a href="#cb35-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-65"><a href="#cb35-65" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb35-66"><a href="#cb35-66" aria-hidden="true" tabindex="-1"></a>         <span class="co">"""</span></span>
<span id="cb35-67"><a href="#cb35-67" aria-hidden="true" tabindex="-1"></a><span class="co">         Checks the version of a `Pants` instance and upgrades it if required</span></span>
<span id="cb35-68"><a href="#cb35-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-69"><a href="#cb35-69" aria-hidden="true" tabindex="-1"></a><span class="co">         Returns</span></span>
<span id="cb35-70"><a href="#cb35-70" aria-hidden="true" tabindex="-1"></a><span class="co">         -------</span></span>
<span id="cb35-71"><a href="#cb35-71" aria-hidden="true" tabindex="-1"></a><span class="co">         None</span></span>
<span id="cb35-72"><a href="#cb35-72" aria-hidden="true" tabindex="-1"></a><span class="co">         """</span></span>
<span id="cb35-73"><a href="#cb35-73" aria-hidden="true" tabindex="-1"></a>         <span class="bu">super</span>().check_version()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p><em>What happens if the fashion shop owner decides to store something new about the stock? For example suppose the client now adds a location attribute to stock items. Location is a string description of where in the store the stock item is stocked. She tells your her plan is to later provide a program that will allow customers to find where items are located in the store. How can we add this attribute and to which class would we add it?</em></p>
<ul>
<li>All items need this property so most appropriate to add to <code>StockItem</code></li>
<li>Should be added to the <code>__init__</code></li>
</ul>
<div id="159748d7" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, location):</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.location <span class="op">=</span> location</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">2</span> <span class="co"># we have to bump the version number</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>This has a problem that it breaks our program!</p></li>
<li><p>If we try create a new <code>Dress</code> we find</p>
<div id="cb74af8f" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>   d <span class="op">=</span> Dress(<span class="st">"D001"</span>, <span class="dv">100</span>, <span class="st">"red"</span>, <span class="st">"swirly"</span>, <span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[23]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> d = <span class="ansi-yellow-bg">Dress</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">D001</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-green-fg ansi-yellow-bg">100</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">red</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">swirly</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-green-fg ansi-yellow-bg">12</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[22]</span><span class="ansi-green-fg">, line 3</span>, in <span class="ansi-cyan-fg">Dress.__init__</span><span class="ansi-blue-fg">(self, stock_ref, price, colour, pattern, size)</span>
<span class="ansi-green-fg">      2</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span><span style="color:rgb(188,188,188)"> </span><span class="ansi-blue-fg">__init__</span>(<span style="color:rgb(0,135,0)">self</span>, stock_ref, price, colour, pattern, size):
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">3</span>     <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">super</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">.</span><span class="ansi-blue-fg ansi-yellow-bg">__init__</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">stock_ref</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">price</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">colour</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">      4</span>     <span style="color:rgb(0,135,0)">self</span>.pattern = pattern
<span class="ansi-green-fg">      5</span>     <span style="color:rgb(0,135,0)">self</span>.size = size

<span class="ansi-red-fg">TypeError</span>: StockItem.__init__() missing 1 required positional argument: 'location'</pre>
</div>
</div>
</div></li>
<li><p><code>Dress</code> does not know about the new <code>location</code> argument to the <code>StockItem</code> constructor</p>
<ul>
<li>Thus generates an error when trying to call the constructor</li>
</ul></li>
<li><p>To fix this we have to update the <code>Dress</code> <code>__init__</code> method</p>
<ul>
<li>Same for every other subclass</li>
</ul>
<div id="5297da1e" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Dress(StockItem):</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, location, pattern, size):</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, location)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__Dress_version <span class="op">=</span> <span class="dv">1</span> <span class="co"># no attribute changes to `Dress`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>Now the instantiation should work</p>
<div id="62b47d9f" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>  d <span class="op">=</span> Dress(<span class="st">"D001"</span>, <span class="dv">100</span>, <span class="st">"red"</span>, <span class="st">"front shelf"</span>, <span class="st">"swirly"</span>, <span class="dv">12</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(d)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;__main__.Dress object at 0x7f78b8367d70&gt;</code></pre>
</div>
</div></li>
<li><p>The takeaway is that class hierarchies are <em>very</em> brittle to changes</p>
<ul>
<li>Especially changes high up in the abstraction hierarchy</li>
</ul></li>
<li><p>Hence you should aim to be very sure of the design of your high level classes</p></li>
<li><p>An alternative approach is to use <em>properties</em>, e.g.</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">@property</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> location(<span class="va">self</span>):</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>         <span class="co">"""</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">         location : str</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">             location in the store where the stock item is stored</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co">         """</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>         result <span class="op">=</span> <span class="bu">getattr</span>(<span class="va">self</span>, <span class="st">"_location"</span>, <span class="va">None</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>         <span class="cf">return</span> result</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">@location.setter</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>     <span class="kw">def</span> location(<span class="va">self</span>, location):</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>         <span class="va">self</span>._location <span class="op">=</span> location</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><p>We define a getter and setter pair as usual. The setter looks pretty much as we would expect</p></li>
<li><p>The <code>location</code> get method is interesting though</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>  result <span class="op">=</span> <span class="bu">getattr</span>(<span class="va">self</span>, <span class="st">"_location"</span>, <span class="va">None</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p><code>getattr</code> is a python built-in function</p></li>
<li><p>Takes three arguments</p>
<ol type="1">
<li>An object to get the attribute from</li>
<li>The attribute to get (as a string)</li>
<li>A default value to return if the attribute is not found</li>
</ol></li>
<li><p>The default value is returned if the attribute has not been set yet</p>
<ul>
<li>Attempting to read the location from a <code>StockItem</code> without one will thus return <code>None</code></li>
</ul></li>
<li><p><code>None</code> is discussed in <a href="../../01_ProgrammingFundamentals/07_UsingFunctions/Chapter_07.html#code-analysis-functions-and-return">Chapter 7</a></p></li>
<li><p>This approach is good because we can dynamically update objects</p>
<ul>
<li>However it has the downside of we now need to find a new in our program to make sure that the location is set</li>
</ul></li>
<li><p>A third option would be to just dynamically add the attribute directly, e.g.</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a> d <span class="op">=</span> Dress(<span class="st">"D001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"red"</span>, pattern<span class="op">=</span><span class="st">"swirly"</span>, size<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a> d.location <span class="op">=</span> <span class="st">"Front of Shop"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><p>If we use this approach we would probably want to pair it with <code>hasattr</code></p></li>
<li><p><code>hasattr</code> is a similar function to <code>getattr</code></p></li>
<li><p>Takes two arguments</p>
<ol type="1">
<li>An object to check for the attribute</li>
<li>name of the attribute (as a string)</li>
</ol></li>
<li><p><code>hasattr</code> returns <code>True</code> if the attribute exists, else <code>False</code></p></li>
</ul>
<div id="f0bacaaa" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a> d <span class="op">=</span> Dress(<span class="st">"D001"</span>, <span class="dv">100</span>, <span class="st">"red"</span>, <span class="st">"swirly"</span>, <span class="dv">12</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a> d.location <span class="op">=</span> <span class="st">"Front of Shop"</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a> e <span class="op">=</span> Dress(<span class="st">"D002"</span>, <span class="dv">100</span>, <span class="st">"green"</span>, <span class="st">"swirly"</span>, <span class="dv">12</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a> <span class="kw">def</span> demo_hasattr(obj):</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span> <span class="bu">hasattr</span>(obj, <span class="st">"location"</span>):</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>         <span class="bu">print</span>(<span class="st">"The dress is location: "</span>, d.location)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span>:</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>         <span class="bu">print</span>(<span class="st">"The dress does not have location information"</span>)</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a> demo_hasattr(d)</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a> demo_hasattr(e)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>The dress is location:  Front of Shop
The dress does not have location information</code></pre>
</div>
</div>
<ul>
<li><p>Of the three methods, what are the pros and cons of each?</p>
<ol type="1">
<li>Adding <code>location</code> to the <code>__init__</code> is the most robust, but requires the most changes to the class hierarchy
<ul>
<li>Enforces <code>location</code> defined</li>
</ul></li>
<li>Is robust, and still maintains a cohesive well-defined class via properties, but requires external management of when to define a location
<ul>
<li>Provides sensible behaviour if an attribute has not been set</li>
<li>This behaviour is also hidden from the user</li>
</ul></li>
<li>Is simple and easy to write, but fragile since it relies on python’s dynamic attributes
<ul>
<li>Requires a mental model of how we add those attributes</li>
<li>Likely breaks a lot of tooling</li>
</ul></li>
</ol></li>
<li><p>The third approach is easy and probably fine for small personal projects</p>
<ul>
<li>Not suitable for large professional applications</li>
<li>Liable to break and hard to maintain</li>
</ul></li>
<li><p>Generally when in doubt, the best approach is to use the <code>__init__</code></p>
<ul>
<li>Makes it easy to follow since all the attribute code is in the same place</li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="make-something-happen-instrumented-stock-items" class="level5">
<h5 class="anchored" data-anchor-id="make-something-happen-instrumented-stock-items">Make Something Happen: Instrumented Stock Items</h5>
<p><em>A technique for following the flow of a program is to add instrumentation to code. The most basic form of instrumentation is to add print statements that show the flow of the program. Work through the following exercise to see how this works.</em></p>
<p>For example the below code demonstrates adding instrumentation to the <code>StockItem</code> class. We add a class level variable <code>show_instrumentation</code> that lets us toggle on or off the instrumentation. The most basic implementation just adds print statements that let us know which classes are called.</p>
<div id="745fbdfc" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> abc</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    show_instrumentation <span class="op">=</span> <span class="va">True</span> <span class="co"># make it optional</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, location):</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem __init__ called"</span>)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.location <span class="op">=</span> location</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Each instrumentation call string is given by the <code>**</code> prefix to distinguish it from the normal code.</p>
<p><em>The code for the instrumentation is replicated below, and can be found in</em> <a href="./Examples/05_InstrumentedStockItems/InstrumentedStockItems.py">Instrumented Stock Items</a><em>. Work through the following code and consider the examples below</em></p>
<div id="e3d4eb48" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 11.5 Fashion Items using Instrumentation</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Adds optional instrumentation to the StockItem hierarchy to demonstrate the</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># control flow</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> abc</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="co">    Abstract base class representing a single inventory item.</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Subclasses are expected to overwrite the `item_name` abstract</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">    property with a user friendly string description</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="co">        reference id of the stock item</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the item's colour</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a><span class="co">    Class Attributes</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------------</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a><span class="co">    show_instrumentation : bool</span></span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a><span class="co">        Indicates if instrumentation should be printed</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>    show_instrumentation <span class="op">=</span> <span class="va">True</span></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour):</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `StockItem` instance</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference id</span></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a><span class="co">            stock price</span></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a><span class="co">            description of stock item's colour</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem __init__ called"</span>)</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem __str__ called"</span>)</span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""Stock Reference: </span><span class="sc">{0}</span></span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a><span class="st">Type: </span><span class="sc">{1}</span></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a><span class="st">Price: </span><span class="sc">{2}</span></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a><span class="st">Stock level: </span><span class="sc">{3}</span></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a><span class="st">Colour: </span><span class="sc">{4}</span><span class="st">"""</span></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(</span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.stock_ref, <span class="va">self</span>.item_name, <span class="va">self</span>.price, <span class="va">self</span>.stock_level, <span class="va">self</span>.colour</span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">@abc.abstractmethod</span></span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a><span class="co">        item_name : str</span></span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a><span class="co">            the stock item's name as a user friendly string</span></span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem item_name called"</span>)</span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> price(<span class="va">self</span>):</span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem get price called"</span>)</span>
<span id="cb47-83"><a href="#cb47-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__price</span>
<span id="cb47-84"><a href="#cb47-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-85"><a href="#cb47-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb47-86"><a href="#cb47-86" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> stock_level(<span class="va">self</span>):</span>
<span id="cb47-87"><a href="#cb47-87" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-88"><a href="#cb47-88" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_level : int</span></span>
<span id="cb47-89"><a href="#cb47-89" aria-hidden="true" tabindex="-1"></a><span class="co">            amount of stock in inventory</span></span>
<span id="cb47-90"><a href="#cb47-90" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-91"><a href="#cb47-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-92"><a href="#cb47-92" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem get stock_level called"</span>)</span>
<span id="cb47-93"><a href="#cb47-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__stock_level</span>
<span id="cb47-94"><a href="#cb47-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-95"><a href="#cb47-95" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb47-96"><a href="#cb47-96" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-97"><a href="#cb47-97" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a StockItem instance and upgrades it if required</span></span>
<span id="cb47-98"><a href="#cb47-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-99"><a href="#cb47-99" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb47-100"><a href="#cb47-100" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb47-101"><a href="#cb47-101" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb47-102"><a href="#cb47-102" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-103"><a href="#cb47-103" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-104"><a href="#cb47-104" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem check_version called"</span>)</span>
<span id="cb47-105"><a href="#cb47-105" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span>  <span class="co"># for version 1, no need to check</span></span>
<span id="cb47-106"><a href="#cb47-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-107"><a href="#cb47-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-108"><a href="#cb47-108" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dress(StockItem):</span>
<span id="cb47-109"><a href="#cb47-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb47-110"><a href="#cb47-110" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a Dress</span></span>
<span id="cb47-111"><a href="#cb47-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-112"><a href="#cb47-112" aria-hidden="true" tabindex="-1"></a><span class="co">    Inherits from `StockItem`</span></span>
<span id="cb47-113"><a href="#cb47-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-114"><a href="#cb47-114" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb47-115"><a href="#cb47-115" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb47-116"><a href="#cb47-116" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb47-117"><a href="#cb47-117" aria-hidden="true" tabindex="-1"></a><span class="co">        dress reference id</span></span>
<span id="cb47-118"><a href="#cb47-118" aria-hidden="true" tabindex="-1"></a><span class="co">    price : int | float</span></span>
<span id="cb47-119"><a href="#cb47-119" aria-hidden="true" tabindex="-1"></a><span class="co">        dress price</span></span>
<span id="cb47-120"><a href="#cb47-120" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb47-121"><a href="#cb47-121" aria-hidden="true" tabindex="-1"></a><span class="co">        description of dress's colour</span></span>
<span id="cb47-122"><a href="#cb47-122" aria-hidden="true" tabindex="-1"></a><span class="co">    pattern : str</span></span>
<span id="cb47-123"><a href="#cb47-123" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the dress pattern</span></span>
<span id="cb47-124"><a href="#cb47-124" aria-hidden="true" tabindex="-1"></a><span class="co">    size : int</span></span>
<span id="cb47-125"><a href="#cb47-125" aria-hidden="true" tabindex="-1"></a><span class="co">        dress size</span></span>
<span id="cb47-126"><a href="#cb47-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-127"><a href="#cb47-127" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb47-128"><a href="#cb47-128" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb47-129"><a href="#cb47-129" aria-hidden="true" tabindex="-1"></a><span class="co">    StockItem : Parent Class</span></span>
<span id="cb47-130"><a href="#cb47-130" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb47-131"><a href="#cb47-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-132"><a href="#cb47-132" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size):</span>
<span id="cb47-133"><a href="#cb47-133" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-134"><a href="#cb47-134" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Dress` instance</span></span>
<span id="cb47-135"><a href="#cb47-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-136"><a href="#cb47-136" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb47-137"><a href="#cb47-137" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb47-138"><a href="#cb47-138" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb47-139"><a href="#cb47-139" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference code</span></span>
<span id="cb47-140"><a href="#cb47-140" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb47-141"><a href="#cb47-141" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb47-142"><a href="#cb47-142" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb47-143"><a href="#cb47-143" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress colour</span></span>
<span id="cb47-144"><a href="#cb47-144" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb47-145"><a href="#cb47-145" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress pattern</span></span>
<span id="cb47-146"><a href="#cb47-146" aria-hidden="true" tabindex="-1"></a><span class="co">        size : int</span></span>
<span id="cb47-147"><a href="#cb47-147" aria-hidden="true" tabindex="-1"></a><span class="co">            dress size</span></span>
<span id="cb47-148"><a href="#cb47-148" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-149"><a href="#cb47-149" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-150"><a href="#cb47-150" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress __init__ called"</span>)</span>
<span id="cb47-151"><a href="#cb47-151" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour)</span>
<span id="cb47-152"><a href="#cb47-152" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb47-153"><a href="#cb47-153" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb47-154"><a href="#cb47-154" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__Dress_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb47-155"><a href="#cb47-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-156"><a href="#cb47-156" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb47-157"><a href="#cb47-157" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-158"><a href="#cb47-158" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress __str__ called"</span>)</span>
<span id="cb47-159"><a href="#cb47-159" aria-hidden="true" tabindex="-1"></a>        stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb47-160"><a href="#cb47-160" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb47-161"><a href="#cb47-161" aria-hidden="true" tabindex="-1"></a><span class="st">Pattern: </span><span class="sc">{1}</span></span>
<span id="cb47-162"><a href="#cb47-162" aria-hidden="true" tabindex="-1"></a><span class="st">Size: </span><span class="sc">{2}</span><span class="st">"""</span></span>
<span id="cb47-163"><a href="#cb47-163" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.pattern, <span class="va">self</span>.size)</span>
<span id="cb47-164"><a href="#cb47-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-165"><a href="#cb47-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb47-166"><a href="#cb47-166" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb47-167"><a href="#cb47-167" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-168"><a href="#cb47-168" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress get item_name called"</span>)</span>
<span id="cb47-169"><a href="#cb47-169" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Dress"</span></span>
<span id="cb47-170"><a href="#cb47-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-171"><a href="#cb47-171" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb47-172"><a href="#cb47-172" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-173"><a href="#cb47-173" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a `Dress` instance and upgrades it if required</span></span>
<span id="cb47-174"><a href="#cb47-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-175"><a href="#cb47-175" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb47-176"><a href="#cb47-176" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb47-177"><a href="#cb47-177" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb47-178"><a href="#cb47-178" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-179"><a href="#cb47-179" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-180"><a href="#cb47-180" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress check_version called"</span>)</span>
<span id="cb47-181"><a href="#cb47-181" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().check_version()</span>
<span id="cb47-182"><a href="#cb47-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-183"><a href="#cb47-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-184"><a href="#cb47-184" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Pants(StockItem):</span>
<span id="cb47-185"><a href="#cb47-185" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb47-186"><a href="#cb47-186" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a pair of Pants</span></span>
<span id="cb47-187"><a href="#cb47-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-188"><a href="#cb47-188" aria-hidden="true" tabindex="-1"></a><span class="co">    Inherits from `StockItem`</span></span>
<span id="cb47-189"><a href="#cb47-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-190"><a href="#cb47-190" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb47-191"><a href="#cb47-191" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb47-192"><a href="#cb47-192" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb47-193"><a href="#cb47-193" aria-hidden="true" tabindex="-1"></a><span class="co">        pants reference id</span></span>
<span id="cb47-194"><a href="#cb47-194" aria-hidden="true" tabindex="-1"></a><span class="co">    price : int | float</span></span>
<span id="cb47-195"><a href="#cb47-195" aria-hidden="true" tabindex="-1"></a><span class="co">        pants price</span></span>
<span id="cb47-196"><a href="#cb47-196" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb47-197"><a href="#cb47-197" aria-hidden="true" tabindex="-1"></a><span class="co">        description of pants's colour</span></span>
<span id="cb47-198"><a href="#cb47-198" aria-hidden="true" tabindex="-1"></a><span class="co">    pattern : str</span></span>
<span id="cb47-199"><a href="#cb47-199" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the pants pattern</span></span>
<span id="cb47-200"><a href="#cb47-200" aria-hidden="true" tabindex="-1"></a><span class="co">    length : int</span></span>
<span id="cb47-201"><a href="#cb47-201" aria-hidden="true" tabindex="-1"></a><span class="co">        length of the pants</span></span>
<span id="cb47-202"><a href="#cb47-202" aria-hidden="true" tabindex="-1"></a><span class="co">    waist : int</span></span>
<span id="cb47-203"><a href="#cb47-203" aria-hidden="true" tabindex="-1"></a><span class="co">        waist size of the pants</span></span>
<span id="cb47-204"><a href="#cb47-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-205"><a href="#cb47-205" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb47-206"><a href="#cb47-206" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb47-207"><a href="#cb47-207" aria-hidden="true" tabindex="-1"></a><span class="co">    StockItem : Parent Class</span></span>
<span id="cb47-208"><a href="#cb47-208" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb47-209"><a href="#cb47-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-210"><a href="#cb47-210" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, length, waist):</span>
<span id="cb47-211"><a href="#cb47-211" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-212"><a href="#cb47-212" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Pants` instance</span></span>
<span id="cb47-213"><a href="#cb47-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-214"><a href="#cb47-214" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb47-215"><a href="#cb47-215" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb47-216"><a href="#cb47-216" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb47-217"><a href="#cb47-217" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference code</span></span>
<span id="cb47-218"><a href="#cb47-218" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb47-219"><a href="#cb47-219" aria-hidden="true" tabindex="-1"></a><span class="co">            pants price</span></span>
<span id="cb47-220"><a href="#cb47-220" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb47-221"><a href="#cb47-221" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the pants colour</span></span>
<span id="cb47-222"><a href="#cb47-222" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb47-223"><a href="#cb47-223" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the pants pattern</span></span>
<span id="cb47-224"><a href="#cb47-224" aria-hidden="true" tabindex="-1"></a><span class="co">        length: int</span></span>
<span id="cb47-225"><a href="#cb47-225" aria-hidden="true" tabindex="-1"></a><span class="co">            length of the pants</span></span>
<span id="cb47-226"><a href="#cb47-226" aria-hidden="true" tabindex="-1"></a><span class="co">        waist : int</span></span>
<span id="cb47-227"><a href="#cb47-227" aria-hidden="true" tabindex="-1"></a><span class="co">            pants waist size</span></span>
<span id="cb47-228"><a href="#cb47-228" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-229"><a href="#cb47-229" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-230"><a href="#cb47-230" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Pants __init__ called"</span>)</span>
<span id="cb47-231"><a href="#cb47-231" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour)</span>
<span id="cb47-232"><a href="#cb47-232" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb47-233"><a href="#cb47-233" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.length <span class="op">=</span> length</span>
<span id="cb47-234"><a href="#cb47-234" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.waist <span class="op">=</span> waist</span>
<span id="cb47-235"><a href="#cb47-235" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__Pants_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb47-236"><a href="#cb47-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-237"><a href="#cb47-237" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb47-238"><a href="#cb47-238" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-239"><a href="#cb47-239" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Pants __str__ called"</span>)</span>
<span id="cb47-240"><a href="#cb47-240" aria-hidden="true" tabindex="-1"></a>        stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb47-241"><a href="#cb47-241" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb47-242"><a href="#cb47-242" aria-hidden="true" tabindex="-1"></a><span class="st">Pattern: </span><span class="sc">{1}</span></span>
<span id="cb47-243"><a href="#cb47-243" aria-hidden="true" tabindex="-1"></a><span class="st">Length: </span><span class="sc">{2}</span></span>
<span id="cb47-244"><a href="#cb47-244" aria-hidden="true" tabindex="-1"></a><span class="st">Waist: </span><span class="sc">{3}</span><span class="st">"""</span></span>
<span id="cb47-245"><a href="#cb47-245" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.pattern, <span class="va">self</span>.length, <span class="va">self</span>.waist)</span>
<span id="cb47-246"><a href="#cb47-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-247"><a href="#cb47-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb47-248"><a href="#cb47-248" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb47-249"><a href="#cb47-249" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-250"><a href="#cb47-250" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Pants get item_name called"</span>)</span>
<span id="cb47-251"><a href="#cb47-251" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Pants"</span></span>
<span id="cb47-252"><a href="#cb47-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-253"><a href="#cb47-253" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb47-254"><a href="#cb47-254" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-255"><a href="#cb47-255" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a `Pants` instance and upgrades it if required</span></span>
<span id="cb47-256"><a href="#cb47-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-257"><a href="#cb47-257" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb47-258"><a href="#cb47-258" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb47-259"><a href="#cb47-259" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb47-260"><a href="#cb47-260" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-261"><a href="#cb47-261" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"**Pants check_version called"</span>)</span>
<span id="cb47-262"><a href="#cb47-262" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().check_version()</span>
<span id="cb47-263"><a href="#cb47-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-264"><a href="#cb47-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-265"><a href="#cb47-265" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Jeans(Pants):</span>
<span id="cb47-266"><a href="#cb47-266" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb47-267"><a href="#cb47-267" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a pair of Jeans</span></span>
<span id="cb47-268"><a href="#cb47-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-269"><a href="#cb47-269" aria-hidden="true" tabindex="-1"></a><span class="co">    Inherits from `Pants`</span></span>
<span id="cb47-270"><a href="#cb47-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-271"><a href="#cb47-271" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb47-272"><a href="#cb47-272" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb47-273"><a href="#cb47-273" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb47-274"><a href="#cb47-274" aria-hidden="true" tabindex="-1"></a><span class="co">        jeans reference id</span></span>
<span id="cb47-275"><a href="#cb47-275" aria-hidden="true" tabindex="-1"></a><span class="co">    price : int | float</span></span>
<span id="cb47-276"><a href="#cb47-276" aria-hidden="true" tabindex="-1"></a><span class="co">        jeans price</span></span>
<span id="cb47-277"><a href="#cb47-277" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb47-278"><a href="#cb47-278" aria-hidden="true" tabindex="-1"></a><span class="co">        description of jeans colour</span></span>
<span id="cb47-279"><a href="#cb47-279" aria-hidden="true" tabindex="-1"></a><span class="co">    pattern : str</span></span>
<span id="cb47-280"><a href="#cb47-280" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the jeans pattern</span></span>
<span id="cb47-281"><a href="#cb47-281" aria-hidden="true" tabindex="-1"></a><span class="co">    length : int</span></span>
<span id="cb47-282"><a href="#cb47-282" aria-hidden="true" tabindex="-1"></a><span class="co">        length of the jeans</span></span>
<span id="cb47-283"><a href="#cb47-283" aria-hidden="true" tabindex="-1"></a><span class="co">    waist : int</span></span>
<span id="cb47-284"><a href="#cb47-284" aria-hidden="true" tabindex="-1"></a><span class="co">        waist size of the jeans</span></span>
<span id="cb47-285"><a href="#cb47-285" aria-hidden="true" tabindex="-1"></a><span class="co">    style : str</span></span>
<span id="cb47-286"><a href="#cb47-286" aria-hidden="true" tabindex="-1"></a><span class="co">        style of the jeans</span></span>
<span id="cb47-287"><a href="#cb47-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-288"><a href="#cb47-288" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb47-289"><a href="#cb47-289" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb47-290"><a href="#cb47-290" aria-hidden="true" tabindex="-1"></a><span class="co">    Pants : Parent Class</span></span>
<span id="cb47-291"><a href="#cb47-291" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb47-292"><a href="#cb47-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-293"><a href="#cb47-293" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, length, waist, style):</span>
<span id="cb47-294"><a href="#cb47-294" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb47-295"><a href="#cb47-295" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Jeans` instance</span></span>
<span id="cb47-296"><a href="#cb47-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-297"><a href="#cb47-297" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb47-298"><a href="#cb47-298" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb47-299"><a href="#cb47-299" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb47-300"><a href="#cb47-300" aria-hidden="true" tabindex="-1"></a><span class="co">            jeans reference id</span></span>
<span id="cb47-301"><a href="#cb47-301" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb47-302"><a href="#cb47-302" aria-hidden="true" tabindex="-1"></a><span class="co">            jeans price</span></span>
<span id="cb47-303"><a href="#cb47-303" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb47-304"><a href="#cb47-304" aria-hidden="true" tabindex="-1"></a><span class="co">            description of jeans colour</span></span>
<span id="cb47-305"><a href="#cb47-305" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb47-306"><a href="#cb47-306" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the jeans pattern</span></span>
<span id="cb47-307"><a href="#cb47-307" aria-hidden="true" tabindex="-1"></a><span class="co">        length : int</span></span>
<span id="cb47-308"><a href="#cb47-308" aria-hidden="true" tabindex="-1"></a><span class="co">            length of the jeans</span></span>
<span id="cb47-309"><a href="#cb47-309" aria-hidden="true" tabindex="-1"></a><span class="co">        waist : int</span></span>
<span id="cb47-310"><a href="#cb47-310" aria-hidden="true" tabindex="-1"></a><span class="co">            waist size of the jeans</span></span>
<span id="cb47-311"><a href="#cb47-311" aria-hidden="true" tabindex="-1"></a><span class="co">        style : str</span></span>
<span id="cb47-312"><a href="#cb47-312" aria-hidden="true" tabindex="-1"></a><span class="co">            style of the jeans</span></span>
<span id="cb47-313"><a href="#cb47-313" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb47-314"><a href="#cb47-314" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-315"><a href="#cb47-315" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Jeans __init__ called"</span>)</span>
<span id="cb47-316"><a href="#cb47-316" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, pattern, length, waist)</span>
<span id="cb47-317"><a href="#cb47-317" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.style <span class="op">=</span> style</span>
<span id="cb47-318"><a href="#cb47-318" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__Jeans_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb47-319"><a href="#cb47-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-320"><a href="#cb47-320" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb47-321"><a href="#cb47-321" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-322"><a href="#cb47-322" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Jeans __str__ called"</span>)</span>
<span id="cb47-323"><a href="#cb47-323" aria-hidden="true" tabindex="-1"></a>        pants_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb47-324"><a href="#cb47-324" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb47-325"><a href="#cb47-325" aria-hidden="true" tabindex="-1"></a><span class="st">Style: </span><span class="sc">{1}</span><span class="st">"""</span></span>
<span id="cb47-326"><a href="#cb47-326" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(pants_details, <span class="va">self</span>.style)</span>
<span id="cb47-327"><a href="#cb47-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-328"><a href="#cb47-328" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb47-329"><a href="#cb47-329" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb47-330"><a href="#cb47-330" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-331"><a href="#cb47-331" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Jeans get item_name called"</span>)</span>
<span id="cb47-332"><a href="#cb47-332" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Jeans"</span></span>
<span id="cb47-333"><a href="#cb47-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-334"><a href="#cb47-334" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb47-335"><a href="#cb47-335" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb47-336"><a href="#cb47-336" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Jeans check_version called"</span>)</span>
<span id="cb47-337"><a href="#cb47-337" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().check_version()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><em>First define a new</em> <code>Dress</code> <em>item as described</em></p>
<div id="58beb6ae" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>dress <span class="op">=</span> Dress(stock_ref<span class="op">=</span><span class="st">"D001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"Red"</span>, pattern<span class="op">=</span><span class="st">"Swirly"</span>, size<span class="op">=</span><span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Dress __init__ called
**StockItem __init__ called</code></pre>
</div>
</div>
<ul>
<li>We can see that first the <code>Dress</code> <code>__init__</code> is called</li>
<li>Then the <code>StockItem</code> <code>__init__</code> is called (from within the previous <code>__init__</code>)</li>
</ul>
<p><em>Now define a new</em> <code>Jeans</code> <em>item as below</em></p>
<div id="6eadb98f" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>jeans <span class="op">=</span> Jeans(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    stock_ref<span class="op">=</span><span class="st">"TR12327"</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    price<span class="op">=</span><span class="dv">50</span>,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    colour<span class="op">=</span><span class="st">"Black"</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    pattern<span class="op">=</span><span class="st">"Plain"</span>,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    length<span class="op">=</span><span class="dv">30</span>,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    waist<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    style<span class="op">=</span><span class="st">"flared"</span>,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Jeans __init__ called
**Pants __init__ called
**StockItem __init__ called</code></pre>
</div>
</div>
<ul>
<li><p>We can see this time there are three <code>__init__</code> calls, in order they are</p>
<ol type="1">
<li><code>Jeans</code></li>
<li><code>Pants</code></li>
<li><code>StockItem</code></li>
</ol></li>
<li><p>Now lets see what happens when we try to print a <code>Jeans</code> item</p></li>
</ul>
<div id="ad3c5e2c" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(jeans)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Jeans __str__ called
**Pants __str__ called
**StockItem __str__ called
**Jeans get item_name called
**StockItem get price called
**StockItem get stock_level called
Stock Reference: TR12327
Type: Jeans
Price: 50
Stock level: 0
Colour: Black
Pattern: Plain
Length: 30
Waist: 25
Style: flared</code></pre>
</div>
</div>
<ul>
<li>We can see that when we the <code>__str__</code> method is called from the <code>Jeans</code> subclass</li>
<li>We propagate up the class hierarchy calling <code>__str__</code> for <code>Pants</code> then <code>StockItem</code></li>
<li>Within the <code>StockItem</code> <code>__str__</code> we see that the getter for <code>item_name</code> is called
<ul>
<li><em>But</em> it resolves to the method on the <code>Jeans</code> object</li>
<li>This is because <code>Jeans</code> overrides the <code>item_name</code> property</li>
</ul></li>
<li>Within the <code>StockItem</code> we also call the getters for
<ul>
<li><code>price</code> and <code>stock_level</code></li>
<li>These are not overwritten by <code>Jeans</code> and so resolve to the original <code>StockItem</code></li>
</ul></li>
<li>If we want to turn off the instrumentation we can change the value of <code>StockItem.show_instrumentation</code> e.g.</li>
</ul>
<div id="380e986d" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>StockItem.show_instrumentation <span class="op">=</span> <span class="va">False</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(jeans)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stock Reference: TR12327
Type: Jeans
Price: 50
Stock level: 0
Colour: Black
Pattern: Plain
Length: 30
Waist: 25
Style: flared</code></pre>
</div>
</div>
<ul>
<li>We can see now there is no instrumentation printed</li>
<li>A more advanced form of instrumentation is called <em>logging</em>
<ul>
<li>Logs are typically stored in a separate file</li>
<li>Can provide more detailed information and triage of problems</li>
</ul></li>
</ul>
</section>
</section>
<section id="implement-application-behaviours" class="level4">
<h4 class="anchored" data-anchor-id="implement-application-behaviours">Implement Application Behaviours</h4>
<ul>
<li>We use our standard menu structure for the Fashion Shop</li>
</ul>
<pre class="text"><code>    Mary's Fashion Shop

    1: Create a new stock item
    2: Add stock to an existing structure
    3: Sell stock
    4: Stock report
    5: Exit

Enter your command:</code></pre>
<section id="create-a-new-stock-item" class="level5">
<h5 class="anchored" data-anchor-id="create-a-new-stock-item">Create a New Stock Item</h5>
<ul>
<li><p>If a user selects to create a new stock item we then need to decide what stock item to create</p></li>
<li><p>We do this by using a sub menu</p>
<pre class="text"><code>  Create a new stock item

  1. Dress
  2. Pants
  3. Hat
  4. Blouse
  5. Jeans

  Enter item to add:</code></pre></li>
<li><p>The full code is given in <a href="./Examples/06_CreatingStockItems/CreatingStockItems.py">Creating Stock Items</a></p>
<div id="9b2bd59b" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Abstract base class representing a single inventory item.</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Subclasses are expected to overwrite the `item_name` abstract</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">      property with a user friendly string description</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="co">          reference id of the stock item</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the item's colour</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">      location : str</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a><span class="co">          description of where the pants are located</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="co">      Class Attributes</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------------</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a><span class="co">      show_instrumentation : bool</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a><span class="co">          Indicates if instrumentation should be printed</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a><span class="co">      min_price : int | float</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a><span class="co">          minimum price of any stock item</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a><span class="co">      max_price : int | float</span></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a><span class="co">          maximum price of any stock item</span></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a>      show_instrumentation <span class="op">=</span> <span class="va">True</span></span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a>      min_price <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>      max_price <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, location):</span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `StockItem` instance</span></span>
<span id="cb58-37"><a href="#cb58-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-38"><a href="#cb58-38" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb58-39"><a href="#cb58-39" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb58-40"><a href="#cb58-40" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb58-41"><a href="#cb58-41" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference id</span></span>
<span id="cb58-42"><a href="#cb58-42" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-43"><a href="#cb58-43" aria-hidden="true" tabindex="-1"></a><span class="co">              stock price</span></span>
<span id="cb58-44"><a href="#cb58-44" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb58-45"><a href="#cb58-45" aria-hidden="true" tabindex="-1"></a><span class="co">              description of stock item's colour</span></span>
<span id="cb58-46"><a href="#cb58-46" aria-hidden="true" tabindex="-1"></a><span class="co">          location : str</span></span>
<span id="cb58-47"><a href="#cb58-47" aria-hidden="true" tabindex="-1"></a><span class="co">              description of where the pants are located</span></span>
<span id="cb58-48"><a href="#cb58-48" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-49"><a href="#cb58-49" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-50"><a href="#cb58-50" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**StockItem __init__ called"</span>)</span>
<span id="cb58-51"><a href="#cb58-51" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb58-52"><a href="#cb58-52" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb58-53"><a href="#cb58-53" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb58-54"><a href="#cb58-54" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.location <span class="op">=</span> location</span>
<span id="cb58-55"><a href="#cb58-55" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb58-56"><a href="#cb58-56" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb58-57"><a href="#cb58-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-58"><a href="#cb58-58" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb58-59"><a href="#cb58-59" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-60"><a href="#cb58-60" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**StockItem __str__ called"</span>)</span>
<span id="cb58-61"><a href="#cb58-61" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""Stock Reference: </span><span class="sc">{0}</span></span>
<span id="cb58-62"><a href="#cb58-62" aria-hidden="true" tabindex="-1"></a><span class="st">  Type: </span><span class="sc">{1}</span></span>
<span id="cb58-63"><a href="#cb58-63" aria-hidden="true" tabindex="-1"></a><span class="st">  Price: </span><span class="sc">{2}</span></span>
<span id="cb58-64"><a href="#cb58-64" aria-hidden="true" tabindex="-1"></a><span class="st">  Stock level: </span><span class="sc">{3}</span></span>
<span id="cb58-65"><a href="#cb58-65" aria-hidden="true" tabindex="-1"></a><span class="st">  Location: </span><span class="sc">{4}</span></span>
<span id="cb58-66"><a href="#cb58-66" aria-hidden="true" tabindex="-1"></a><span class="st">  Colour: </span><span class="sc">{5}</span><span class="st">"""</span></span>
<span id="cb58-67"><a href="#cb58-67" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(</span>
<span id="cb58-68"><a href="#cb58-68" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.stock_ref,</span>
<span id="cb58-69"><a href="#cb58-69" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.item_name,</span>
<span id="cb58-70"><a href="#cb58-70" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.price,</span>
<span id="cb58-71"><a href="#cb58-71" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.stock_level,</span>
<span id="cb58-72"><a href="#cb58-72" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.location,</span>
<span id="cb58-73"><a href="#cb58-73" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.colour,</span>
<span id="cb58-74"><a href="#cb58-74" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb58-75"><a href="#cb58-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-76"><a href="#cb58-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-77"><a href="#cb58-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">@abc.abstractmethod</span></span>
<span id="cb58-78"><a href="#cb58-78" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb58-79"><a href="#cb58-79" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-80"><a href="#cb58-80" aria-hidden="true" tabindex="-1"></a><span class="co">          item_name : str</span></span>
<span id="cb58-81"><a href="#cb58-81" aria-hidden="true" tabindex="-1"></a><span class="co">              the stock item's name as a user friendly string</span></span>
<span id="cb58-82"><a href="#cb58-82" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-83"><a href="#cb58-83" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-84"><a href="#cb58-84" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**StockItem item_name called"</span>)</span>
<span id="cb58-85"><a href="#cb58-85" aria-hidden="true" tabindex="-1"></a>          <span class="cf">pass</span></span>
<span id="cb58-86"><a href="#cb58-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-87"><a href="#cb58-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-88"><a href="#cb58-88" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> price(<span class="va">self</span>):</span>
<span id="cb58-89"><a href="#cb58-89" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-90"><a href="#cb58-90" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-91"><a href="#cb58-91" aria-hidden="true" tabindex="-1"></a><span class="co">              dress price</span></span>
<span id="cb58-92"><a href="#cb58-92" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-93"><a href="#cb58-93" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-94"><a href="#cb58-94" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**StockItem get price called"</span>)</span>
<span id="cb58-95"><a href="#cb58-95" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="va">self</span>.__price</span>
<span id="cb58-96"><a href="#cb58-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-97"><a href="#cb58-97" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-98"><a href="#cb58-98" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> stock_level(<span class="va">self</span>):</span>
<span id="cb58-99"><a href="#cb58-99" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-100"><a href="#cb58-100" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_level : int</span></span>
<span id="cb58-101"><a href="#cb58-101" aria-hidden="true" tabindex="-1"></a><span class="co">              amount of stock in inventory</span></span>
<span id="cb58-102"><a href="#cb58-102" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-103"><a href="#cb58-103" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-104"><a href="#cb58-104" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**StockItem get stock_level called"</span>)</span>
<span id="cb58-105"><a href="#cb58-105" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="va">self</span>.__stock_level</span>
<span id="cb58-106"><a href="#cb58-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-107"><a href="#cb58-107" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb58-108"><a href="#cb58-108" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-109"><a href="#cb58-109" aria-hidden="true" tabindex="-1"></a><span class="co">          Checks the version of a `StockItem` instance and upgrades it if required</span></span>
<span id="cb58-110"><a href="#cb58-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-111"><a href="#cb58-111" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb58-112"><a href="#cb58-112" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb58-113"><a href="#cb58-113" aria-hidden="true" tabindex="-1"></a><span class="co">          None</span></span>
<span id="cb58-114"><a href="#cb58-114" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-115"><a href="#cb58-115" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-116"><a href="#cb58-116" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**StockItem check_version called"</span>)</span>
<span id="cb58-117"><a href="#cb58-117" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> <span class="va">self</span>.__StockItem_version <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb58-118"><a href="#cb58-118" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.location <span class="op">=</span> <span class="va">None</span></span>
<span id="cb58-119"><a href="#cb58-119" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb58-120"><a href="#cb58-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-121"><a href="#cb58-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-122"><a href="#cb58-122" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Dress(StockItem):</span>
<span id="cb58-123"><a href="#cb58-123" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb58-124"><a href="#cb58-124" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory details for a Dress</span></span>
<span id="cb58-125"><a href="#cb58-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-126"><a href="#cb58-126" aria-hidden="true" tabindex="-1"></a><span class="co">      Inherits from `StockItem`</span></span>
<span id="cb58-127"><a href="#cb58-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-128"><a href="#cb58-128" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb58-129"><a href="#cb58-129" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb58-130"><a href="#cb58-130" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb58-131"><a href="#cb58-131" aria-hidden="true" tabindex="-1"></a><span class="co">          dress reference id</span></span>
<span id="cb58-132"><a href="#cb58-132" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb58-133"><a href="#cb58-133" aria-hidden="true" tabindex="-1"></a><span class="co">          dress price</span></span>
<span id="cb58-134"><a href="#cb58-134" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb58-135"><a href="#cb58-135" aria-hidden="true" tabindex="-1"></a><span class="co">          description of dress's colour</span></span>
<span id="cb58-136"><a href="#cb58-136" aria-hidden="true" tabindex="-1"></a><span class="co">      pattern : str</span></span>
<span id="cb58-137"><a href="#cb58-137" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the dress pattern</span></span>
<span id="cb58-138"><a href="#cb58-138" aria-hidden="true" tabindex="-1"></a><span class="co">      size : int</span></span>
<span id="cb58-139"><a href="#cb58-139" aria-hidden="true" tabindex="-1"></a><span class="co">          dress size</span></span>
<span id="cb58-140"><a href="#cb58-140" aria-hidden="true" tabindex="-1"></a><span class="co">      location : str</span></span>
<span id="cb58-141"><a href="#cb58-141" aria-hidden="true" tabindex="-1"></a><span class="co">          place where the dress is located</span></span>
<span id="cb58-142"><a href="#cb58-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-143"><a href="#cb58-143" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb58-144"><a href="#cb58-144" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb58-145"><a href="#cb58-145" aria-hidden="true" tabindex="-1"></a><span class="co">      StockItem : Parent Class</span></span>
<span id="cb58-146"><a href="#cb58-146" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb58-147"><a href="#cb58-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-148"><a href="#cb58-148" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size, location):</span>
<span id="cb58-149"><a href="#cb58-149" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-150"><a href="#cb58-150" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `Dress` instance</span></span>
<span id="cb58-151"><a href="#cb58-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-152"><a href="#cb58-152" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb58-153"><a href="#cb58-153" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb58-154"><a href="#cb58-154" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb58-155"><a href="#cb58-155" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference code</span></span>
<span id="cb58-156"><a href="#cb58-156" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-157"><a href="#cb58-157" aria-hidden="true" tabindex="-1"></a><span class="co">              dress price</span></span>
<span id="cb58-158"><a href="#cb58-158" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb58-159"><a href="#cb58-159" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the dress colour</span></span>
<span id="cb58-160"><a href="#cb58-160" aria-hidden="true" tabindex="-1"></a><span class="co">          pattern : str</span></span>
<span id="cb58-161"><a href="#cb58-161" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the dress pattern</span></span>
<span id="cb58-162"><a href="#cb58-162" aria-hidden="true" tabindex="-1"></a><span class="co">          size : int</span></span>
<span id="cb58-163"><a href="#cb58-163" aria-hidden="true" tabindex="-1"></a><span class="co">              dress size</span></span>
<span id="cb58-164"><a href="#cb58-164" aria-hidden="true" tabindex="-1"></a><span class="co">          location : str</span></span>
<span id="cb58-165"><a href="#cb58-165" aria-hidden="true" tabindex="-1"></a><span class="co">              place where the dress is located</span></span>
<span id="cb58-166"><a href="#cb58-166" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-167"><a href="#cb58-167" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-168"><a href="#cb58-168" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Dress __init__ called"</span>)</span>
<span id="cb58-169"><a href="#cb58-169" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, location)</span>
<span id="cb58-170"><a href="#cb58-170" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb58-171"><a href="#cb58-171" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb58-172"><a href="#cb58-172" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__Dress_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb58-173"><a href="#cb58-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-174"><a href="#cb58-174" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb58-175"><a href="#cb58-175" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-176"><a href="#cb58-176" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Dress __str__ called"</span>)</span>
<span id="cb58-177"><a href="#cb58-177" aria-hidden="true" tabindex="-1"></a>          stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb58-178"><a href="#cb58-178" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb58-179"><a href="#cb58-179" aria-hidden="true" tabindex="-1"></a><span class="st">  Pattern: </span><span class="sc">{1}</span></span>
<span id="cb58-180"><a href="#cb58-180" aria-hidden="true" tabindex="-1"></a><span class="st">  Size: </span><span class="sc">{2}</span><span class="st">"""</span></span>
<span id="cb58-181"><a href="#cb58-181" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.pattern, <span class="va">self</span>.size)</span>
<span id="cb58-182"><a href="#cb58-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-183"><a href="#cb58-183" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-184"><a href="#cb58-184" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb58-185"><a href="#cb58-185" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-186"><a href="#cb58-186" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Dress get item_name called"</span>)</span>
<span id="cb58-187"><a href="#cb58-187" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Dress"</span></span>
<span id="cb58-188"><a href="#cb58-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-189"><a href="#cb58-189" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb58-190"><a href="#cb58-190" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-191"><a href="#cb58-191" aria-hidden="true" tabindex="-1"></a><span class="co">          Checks the version of a `Dress` instance and upgrades it if required</span></span>
<span id="cb58-192"><a href="#cb58-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-193"><a href="#cb58-193" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb58-194"><a href="#cb58-194" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb58-195"><a href="#cb58-195" aria-hidden="true" tabindex="-1"></a><span class="co">          None</span></span>
<span id="cb58-196"><a href="#cb58-196" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-197"><a href="#cb58-197" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-198"><a href="#cb58-198" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Dress check_version called"</span>)</span>
<span id="cb58-199"><a href="#cb58-199" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().check_version()</span>
<span id="cb58-200"><a href="#cb58-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-201"><a href="#cb58-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-202"><a href="#cb58-202" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Pants(StockItem):</span>
<span id="cb58-203"><a href="#cb58-203" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb58-204"><a href="#cb58-204" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory details for a pair of Pants</span></span>
<span id="cb58-205"><a href="#cb58-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-206"><a href="#cb58-206" aria-hidden="true" tabindex="-1"></a><span class="co">      Inherits from `StockItem`</span></span>
<span id="cb58-207"><a href="#cb58-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-208"><a href="#cb58-208" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb58-209"><a href="#cb58-209" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb58-210"><a href="#cb58-210" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb58-211"><a href="#cb58-211" aria-hidden="true" tabindex="-1"></a><span class="co">          pants reference id</span></span>
<span id="cb58-212"><a href="#cb58-212" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb58-213"><a href="#cb58-213" aria-hidden="true" tabindex="-1"></a><span class="co">          pants price</span></span>
<span id="cb58-214"><a href="#cb58-214" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb58-215"><a href="#cb58-215" aria-hidden="true" tabindex="-1"></a><span class="co">          description of pants's colour</span></span>
<span id="cb58-216"><a href="#cb58-216" aria-hidden="true" tabindex="-1"></a><span class="co">      pattern : str</span></span>
<span id="cb58-217"><a href="#cb58-217" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the pants pattern</span></span>
<span id="cb58-218"><a href="#cb58-218" aria-hidden="true" tabindex="-1"></a><span class="co">      length : int</span></span>
<span id="cb58-219"><a href="#cb58-219" aria-hidden="true" tabindex="-1"></a><span class="co">          length of the pants</span></span>
<span id="cb58-220"><a href="#cb58-220" aria-hidden="true" tabindex="-1"></a><span class="co">      waist : int</span></span>
<span id="cb58-221"><a href="#cb58-221" aria-hidden="true" tabindex="-1"></a><span class="co">          waist size of the pants</span></span>
<span id="cb58-222"><a href="#cb58-222" aria-hidden="true" tabindex="-1"></a><span class="co">      location : str</span></span>
<span id="cb58-223"><a href="#cb58-223" aria-hidden="true" tabindex="-1"></a><span class="co">          description of where the pants are located</span></span>
<span id="cb58-224"><a href="#cb58-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-225"><a href="#cb58-225" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb58-226"><a href="#cb58-226" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb58-227"><a href="#cb58-227" aria-hidden="true" tabindex="-1"></a><span class="co">      StockItem : Parent Class</span></span>
<span id="cb58-228"><a href="#cb58-228" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb58-229"><a href="#cb58-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-230"><a href="#cb58-230" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, length, waist, location):</span>
<span id="cb58-231"><a href="#cb58-231" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-232"><a href="#cb58-232" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `Pants` instance</span></span>
<span id="cb58-233"><a href="#cb58-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-234"><a href="#cb58-234" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb58-235"><a href="#cb58-235" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb58-236"><a href="#cb58-236" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb58-237"><a href="#cb58-237" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference code</span></span>
<span id="cb58-238"><a href="#cb58-238" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-239"><a href="#cb58-239" aria-hidden="true" tabindex="-1"></a><span class="co">              pants price</span></span>
<span id="cb58-240"><a href="#cb58-240" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb58-241"><a href="#cb58-241" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the pants colour</span></span>
<span id="cb58-242"><a href="#cb58-242" aria-hidden="true" tabindex="-1"></a><span class="co">          pattern : str</span></span>
<span id="cb58-243"><a href="#cb58-243" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the pants pattern</span></span>
<span id="cb58-244"><a href="#cb58-244" aria-hidden="true" tabindex="-1"></a><span class="co">          length: int</span></span>
<span id="cb58-245"><a href="#cb58-245" aria-hidden="true" tabindex="-1"></a><span class="co">              length of the pants</span></span>
<span id="cb58-246"><a href="#cb58-246" aria-hidden="true" tabindex="-1"></a><span class="co">          waist : int</span></span>
<span id="cb58-247"><a href="#cb58-247" aria-hidden="true" tabindex="-1"></a><span class="co">              pants waist size</span></span>
<span id="cb58-248"><a href="#cb58-248" aria-hidden="true" tabindex="-1"></a><span class="co">          location : str</span></span>
<span id="cb58-249"><a href="#cb58-249" aria-hidden="true" tabindex="-1"></a><span class="co">              description of where the pants are located</span></span>
<span id="cb58-250"><a href="#cb58-250" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-251"><a href="#cb58-251" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-252"><a href="#cb58-252" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Pants __init__ called"</span>)</span>
<span id="cb58-253"><a href="#cb58-253" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, location)</span>
<span id="cb58-254"><a href="#cb58-254" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb58-255"><a href="#cb58-255" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.length <span class="op">=</span> length</span>
<span id="cb58-256"><a href="#cb58-256" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.waist <span class="op">=</span> waist</span>
<span id="cb58-257"><a href="#cb58-257" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__Pants_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb58-258"><a href="#cb58-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-259"><a href="#cb58-259" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb58-260"><a href="#cb58-260" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-261"><a href="#cb58-261" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Pants __str__ called"</span>)</span>
<span id="cb58-262"><a href="#cb58-262" aria-hidden="true" tabindex="-1"></a>          stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb58-263"><a href="#cb58-263" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb58-264"><a href="#cb58-264" aria-hidden="true" tabindex="-1"></a><span class="st">  Pattern: </span><span class="sc">{1}</span></span>
<span id="cb58-265"><a href="#cb58-265" aria-hidden="true" tabindex="-1"></a><span class="st">  Length: </span><span class="sc">{2}</span></span>
<span id="cb58-266"><a href="#cb58-266" aria-hidden="true" tabindex="-1"></a><span class="st">  Waist: </span><span class="sc">{3}</span><span class="st">"""</span></span>
<span id="cb58-267"><a href="#cb58-267" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.pattern, <span class="va">self</span>.length, <span class="va">self</span>.waist)</span>
<span id="cb58-268"><a href="#cb58-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-269"><a href="#cb58-269" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-270"><a href="#cb58-270" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb58-271"><a href="#cb58-271" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-272"><a href="#cb58-272" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Pants get item_name called"</span>)</span>
<span id="cb58-273"><a href="#cb58-273" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Pants"</span></span>
<span id="cb58-274"><a href="#cb58-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-275"><a href="#cb58-275" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb58-276"><a href="#cb58-276" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-277"><a href="#cb58-277" aria-hidden="true" tabindex="-1"></a><span class="co">          Checks the version of a `Pants` instance and upgrades it if required</span></span>
<span id="cb58-278"><a href="#cb58-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-279"><a href="#cb58-279" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb58-280"><a href="#cb58-280" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb58-281"><a href="#cb58-281" aria-hidden="true" tabindex="-1"></a><span class="co">          None</span></span>
<span id="cb58-282"><a href="#cb58-282" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-283"><a href="#cb58-283" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"**Pants check_version called"</span>)</span>
<span id="cb58-284"><a href="#cb58-284" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().check_version()</span>
<span id="cb58-285"><a href="#cb58-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-286"><a href="#cb58-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-287"><a href="#cb58-287" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Jeans(Pants):</span>
<span id="cb58-288"><a href="#cb58-288" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb58-289"><a href="#cb58-289" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory details for a pair of Jeans</span></span>
<span id="cb58-290"><a href="#cb58-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-291"><a href="#cb58-291" aria-hidden="true" tabindex="-1"></a><span class="co">      Inherits from `Pants`</span></span>
<span id="cb58-292"><a href="#cb58-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-293"><a href="#cb58-293" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb58-294"><a href="#cb58-294" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb58-295"><a href="#cb58-295" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb58-296"><a href="#cb58-296" aria-hidden="true" tabindex="-1"></a><span class="co">          jeans reference id</span></span>
<span id="cb58-297"><a href="#cb58-297" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb58-298"><a href="#cb58-298" aria-hidden="true" tabindex="-1"></a><span class="co">          jeans price</span></span>
<span id="cb58-299"><a href="#cb58-299" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb58-300"><a href="#cb58-300" aria-hidden="true" tabindex="-1"></a><span class="co">          description of jeans colour</span></span>
<span id="cb58-301"><a href="#cb58-301" aria-hidden="true" tabindex="-1"></a><span class="co">      pattern : str</span></span>
<span id="cb58-302"><a href="#cb58-302" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the jeans pattern</span></span>
<span id="cb58-303"><a href="#cb58-303" aria-hidden="true" tabindex="-1"></a><span class="co">      length : int</span></span>
<span id="cb58-304"><a href="#cb58-304" aria-hidden="true" tabindex="-1"></a><span class="co">          length of the jeans</span></span>
<span id="cb58-305"><a href="#cb58-305" aria-hidden="true" tabindex="-1"></a><span class="co">      waist : int</span></span>
<span id="cb58-306"><a href="#cb58-306" aria-hidden="true" tabindex="-1"></a><span class="co">          waist size of the jeans</span></span>
<span id="cb58-307"><a href="#cb58-307" aria-hidden="true" tabindex="-1"></a><span class="co">      style : str</span></span>
<span id="cb58-308"><a href="#cb58-308" aria-hidden="true" tabindex="-1"></a><span class="co">          style of the jeans</span></span>
<span id="cb58-309"><a href="#cb58-309" aria-hidden="true" tabindex="-1"></a><span class="co">      location : str</span></span>
<span id="cb58-310"><a href="#cb58-310" aria-hidden="true" tabindex="-1"></a><span class="co">          description of where the pants are located</span></span>
<span id="cb58-311"><a href="#cb58-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-312"><a href="#cb58-312" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb58-313"><a href="#cb58-313" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb58-314"><a href="#cb58-314" aria-hidden="true" tabindex="-1"></a><span class="co">      Pants : Parent Class</span></span>
<span id="cb58-315"><a href="#cb58-315" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb58-316"><a href="#cb58-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-317"><a href="#cb58-317" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(</span>
<span id="cb58-318"><a href="#cb58-318" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>, stock_ref, price, colour, pattern, length, waist, style, location</span>
<span id="cb58-319"><a href="#cb58-319" aria-hidden="true" tabindex="-1"></a>      ):</span>
<span id="cb58-320"><a href="#cb58-320" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-321"><a href="#cb58-321" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `Jeans` instance</span></span>
<span id="cb58-322"><a href="#cb58-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-323"><a href="#cb58-323" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb58-324"><a href="#cb58-324" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb58-325"><a href="#cb58-325" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb58-326"><a href="#cb58-326" aria-hidden="true" tabindex="-1"></a><span class="co">              jeans reference id</span></span>
<span id="cb58-327"><a href="#cb58-327" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-328"><a href="#cb58-328" aria-hidden="true" tabindex="-1"></a><span class="co">              jeans price</span></span>
<span id="cb58-329"><a href="#cb58-329" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb58-330"><a href="#cb58-330" aria-hidden="true" tabindex="-1"></a><span class="co">              description of jeans colour</span></span>
<span id="cb58-331"><a href="#cb58-331" aria-hidden="true" tabindex="-1"></a><span class="co">          pattern : str</span></span>
<span id="cb58-332"><a href="#cb58-332" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the jeans pattern</span></span>
<span id="cb58-333"><a href="#cb58-333" aria-hidden="true" tabindex="-1"></a><span class="co">          length : int</span></span>
<span id="cb58-334"><a href="#cb58-334" aria-hidden="true" tabindex="-1"></a><span class="co">              length of the jeans</span></span>
<span id="cb58-335"><a href="#cb58-335" aria-hidden="true" tabindex="-1"></a><span class="co">          waist : int</span></span>
<span id="cb58-336"><a href="#cb58-336" aria-hidden="true" tabindex="-1"></a><span class="co">              waist size of the jeans</span></span>
<span id="cb58-337"><a href="#cb58-337" aria-hidden="true" tabindex="-1"></a><span class="co">          style : str</span></span>
<span id="cb58-338"><a href="#cb58-338" aria-hidden="true" tabindex="-1"></a><span class="co">              style of the jeans</span></span>
<span id="cb58-339"><a href="#cb58-339" aria-hidden="true" tabindex="-1"></a><span class="co">          location : str</span></span>
<span id="cb58-340"><a href="#cb58-340" aria-hidden="true" tabindex="-1"></a><span class="co">              description of where the jeans are located</span></span>
<span id="cb58-341"><a href="#cb58-341" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-342"><a href="#cb58-342" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-343"><a href="#cb58-343" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Jeans __init__ called"</span>)</span>
<span id="cb58-344"><a href="#cb58-344" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, pattern, length, waist, location)</span>
<span id="cb58-345"><a href="#cb58-345" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.style <span class="op">=</span> style</span>
<span id="cb58-346"><a href="#cb58-346" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__Jeans_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb58-347"><a href="#cb58-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-348"><a href="#cb58-348" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb58-349"><a href="#cb58-349" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-350"><a href="#cb58-350" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Jeans __str__ called"</span>)</span>
<span id="cb58-351"><a href="#cb58-351" aria-hidden="true" tabindex="-1"></a>          pants_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb58-352"><a href="#cb58-352" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb58-353"><a href="#cb58-353" aria-hidden="true" tabindex="-1"></a><span class="st">  Style: </span><span class="sc">{1}</span><span class="st">"""</span></span>
<span id="cb58-354"><a href="#cb58-354" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(pants_details, <span class="va">self</span>.style)</span>
<span id="cb58-355"><a href="#cb58-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-356"><a href="#cb58-356" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-357"><a href="#cb58-357" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb58-358"><a href="#cb58-358" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-359"><a href="#cb58-359" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Jeans get item_name called"</span>)</span>
<span id="cb58-360"><a href="#cb58-360" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Jeans"</span></span>
<span id="cb58-361"><a href="#cb58-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-362"><a href="#cb58-362" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb58-363"><a href="#cb58-363" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-364"><a href="#cb58-364" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Jeans check_version called"</span>)</span>
<span id="cb58-365"><a href="#cb58-365" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().check_version()</span>
<span id="cb58-366"><a href="#cb58-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-367"><a href="#cb58-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-368"><a href="#cb58-368" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Hat(StockItem):</span>
<span id="cb58-369"><a href="#cb58-369" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb58-370"><a href="#cb58-370" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory details for a Hat</span></span>
<span id="cb58-371"><a href="#cb58-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-372"><a href="#cb58-372" aria-hidden="true" tabindex="-1"></a><span class="co">      Inherits from `StockItem`</span></span>
<span id="cb58-373"><a href="#cb58-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-374"><a href="#cb58-374" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb58-375"><a href="#cb58-375" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb58-376"><a href="#cb58-376" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb58-377"><a href="#cb58-377" aria-hidden="true" tabindex="-1"></a><span class="co">          hat reference id</span></span>
<span id="cb58-378"><a href="#cb58-378" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb58-379"><a href="#cb58-379" aria-hidden="true" tabindex="-1"></a><span class="co">          hat price</span></span>
<span id="cb58-380"><a href="#cb58-380" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb58-381"><a href="#cb58-381" aria-hidden="true" tabindex="-1"></a><span class="co">          description of hats colour</span></span>
<span id="cb58-382"><a href="#cb58-382" aria-hidden="true" tabindex="-1"></a><span class="co">      size : int</span></span>
<span id="cb58-383"><a href="#cb58-383" aria-hidden="true" tabindex="-1"></a><span class="co">          Hat size in diameter</span></span>
<span id="cb58-384"><a href="#cb58-384" aria-hidden="true" tabindex="-1"></a><span class="co">      location : str</span></span>
<span id="cb58-385"><a href="#cb58-385" aria-hidden="true" tabindex="-1"></a><span class="co">          description of where the hat is located</span></span>
<span id="cb58-386"><a href="#cb58-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-387"><a href="#cb58-387" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb58-388"><a href="#cb58-388" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb58-389"><a href="#cb58-389" aria-hidden="true" tabindex="-1"></a><span class="co">      StockItem : Parent Class</span></span>
<span id="cb58-390"><a href="#cb58-390" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb58-391"><a href="#cb58-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-392"><a href="#cb58-392" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, size, location):</span>
<span id="cb58-393"><a href="#cb58-393" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-394"><a href="#cb58-394" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `Hat` instance</span></span>
<span id="cb58-395"><a href="#cb58-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-396"><a href="#cb58-396" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb58-397"><a href="#cb58-397" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb58-398"><a href="#cb58-398" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb58-399"><a href="#cb58-399" aria-hidden="true" tabindex="-1"></a><span class="co">              hat stock reference id</span></span>
<span id="cb58-400"><a href="#cb58-400" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-401"><a href="#cb58-401" aria-hidden="true" tabindex="-1"></a><span class="co">              hat price</span></span>
<span id="cb58-402"><a href="#cb58-402" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb58-403"><a href="#cb58-403" aria-hidden="true" tabindex="-1"></a><span class="co">              hat colour</span></span>
<span id="cb58-404"><a href="#cb58-404" aria-hidden="true" tabindex="-1"></a><span class="co">          size : int</span></span>
<span id="cb58-405"><a href="#cb58-405" aria-hidden="true" tabindex="-1"></a><span class="co">              hat size in diameter</span></span>
<span id="cb58-406"><a href="#cb58-406" aria-hidden="true" tabindex="-1"></a><span class="co">          location : str</span></span>
<span id="cb58-407"><a href="#cb58-407" aria-hidden="true" tabindex="-1"></a><span class="co">              where the hat is located in the store</span></span>
<span id="cb58-408"><a href="#cb58-408" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-409"><a href="#cb58-409" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-410"><a href="#cb58-410" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"**Hat __init__ called"</span>)</span>
<span id="cb58-411"><a href="#cb58-411" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, location)</span>
<span id="cb58-412"><a href="#cb58-412" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb58-413"><a href="#cb58-413" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__Hat_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb58-414"><a href="#cb58-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-415"><a href="#cb58-415" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb58-416"><a href="#cb58-416" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-417"><a href="#cb58-417" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Hat __str__ called"</span>)</span>
<span id="cb58-418"><a href="#cb58-418" aria-hidden="true" tabindex="-1"></a>          stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb58-419"><a href="#cb58-419" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb58-420"><a href="#cb58-420" aria-hidden="true" tabindex="-1"></a><span class="st">  Size: </span><span class="sc">{1}</span><span class="st">"""</span></span>
<span id="cb58-421"><a href="#cb58-421" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.size)</span>
<span id="cb58-422"><a href="#cb58-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-423"><a href="#cb58-423" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-424"><a href="#cb58-424" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb58-425"><a href="#cb58-425" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-426"><a href="#cb58-426" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Hat get item_name called"</span>)</span>
<span id="cb58-427"><a href="#cb58-427" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Hat"</span></span>
<span id="cb58-428"><a href="#cb58-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-429"><a href="#cb58-429" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb58-430"><a href="#cb58-430" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-431"><a href="#cb58-431" aria-hidden="true" tabindex="-1"></a><span class="co">          Checks the version and upgrades a `Hat` instance as requires</span></span>
<span id="cb58-432"><a href="#cb58-432" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-433"><a href="#cb58-433" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-434"><a href="#cb58-434" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Hat check_version called"</span>)</span>
<span id="cb58-435"><a href="#cb58-435" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().check_version()</span>
<span id="cb58-436"><a href="#cb58-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-437"><a href="#cb58-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-438"><a href="#cb58-438" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Blouse(StockItem):</span>
<span id="cb58-439"><a href="#cb58-439" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb58-440"><a href="#cb58-440" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory details for a Blouse</span></span>
<span id="cb58-441"><a href="#cb58-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-442"><a href="#cb58-442" aria-hidden="true" tabindex="-1"></a><span class="co">      Inherits from `StockItem`</span></span>
<span id="cb58-443"><a href="#cb58-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-444"><a href="#cb58-444" aria-hidden="true" tabindex="-1"></a><span class="co">      Attributes</span></span>
<span id="cb58-445"><a href="#cb58-445" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb58-446"><a href="#cb58-446" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb58-447"><a href="#cb58-447" aria-hidden="true" tabindex="-1"></a><span class="co">          stock reference code</span></span>
<span id="cb58-448"><a href="#cb58-448" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb58-449"><a href="#cb58-449" aria-hidden="true" tabindex="-1"></a><span class="co">          blouse price</span></span>
<span id="cb58-450"><a href="#cb58-450" aria-hidden="true" tabindex="-1"></a><span class="co">      colour : str</span></span>
<span id="cb58-451"><a href="#cb58-451" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the blouse colour</span></span>
<span id="cb58-452"><a href="#cb58-452" aria-hidden="true" tabindex="-1"></a><span class="co">      pattern : str</span></span>
<span id="cb58-453"><a href="#cb58-453" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the blouse pattern</span></span>
<span id="cb58-454"><a href="#cb58-454" aria-hidden="true" tabindex="-1"></a><span class="co">      style : str</span></span>
<span id="cb58-455"><a href="#cb58-455" aria-hidden="true" tabindex="-1"></a><span class="co">          description of the blouse style</span></span>
<span id="cb58-456"><a href="#cb58-456" aria-hidden="true" tabindex="-1"></a><span class="co">      size : int</span></span>
<span id="cb58-457"><a href="#cb58-457" aria-hidden="true" tabindex="-1"></a><span class="co">          blouse size</span></span>
<span id="cb58-458"><a href="#cb58-458" aria-hidden="true" tabindex="-1"></a><span class="co">      location : str</span></span>
<span id="cb58-459"><a href="#cb58-459" aria-hidden="true" tabindex="-1"></a><span class="co">          place where the blouse is located</span></span>
<span id="cb58-460"><a href="#cb58-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-461"><a href="#cb58-461" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb58-462"><a href="#cb58-462" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb58-463"><a href="#cb58-463" aria-hidden="true" tabindex="-1"></a><span class="co">      StockItem : Parent Class</span></span>
<span id="cb58-464"><a href="#cb58-464" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb58-465"><a href="#cb58-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-466"><a href="#cb58-466" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, style, size, location):</span>
<span id="cb58-467"><a href="#cb58-467" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-468"><a href="#cb58-468" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a `Blouse` instance</span></span>
<span id="cb58-469"><a href="#cb58-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-470"><a href="#cb58-470" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb58-471"><a href="#cb58-471" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb58-472"><a href="#cb58-472" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb58-473"><a href="#cb58-473" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference code</span></span>
<span id="cb58-474"><a href="#cb58-474" aria-hidden="true" tabindex="-1"></a><span class="co">          price : int | float</span></span>
<span id="cb58-475"><a href="#cb58-475" aria-hidden="true" tabindex="-1"></a><span class="co">              blouse price</span></span>
<span id="cb58-476"><a href="#cb58-476" aria-hidden="true" tabindex="-1"></a><span class="co">          colour : str</span></span>
<span id="cb58-477"><a href="#cb58-477" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the blouse colour</span></span>
<span id="cb58-478"><a href="#cb58-478" aria-hidden="true" tabindex="-1"></a><span class="co">          pattern : str</span></span>
<span id="cb58-479"><a href="#cb58-479" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the blouse pattern</span></span>
<span id="cb58-480"><a href="#cb58-480" aria-hidden="true" tabindex="-1"></a><span class="co">          style : str</span></span>
<span id="cb58-481"><a href="#cb58-481" aria-hidden="true" tabindex="-1"></a><span class="co">              description of the blouse style</span></span>
<span id="cb58-482"><a href="#cb58-482" aria-hidden="true" tabindex="-1"></a><span class="co">          size : int</span></span>
<span id="cb58-483"><a href="#cb58-483" aria-hidden="true" tabindex="-1"></a><span class="co">              blouse size</span></span>
<span id="cb58-484"><a href="#cb58-484" aria-hidden="true" tabindex="-1"></a><span class="co">          location : str</span></span>
<span id="cb58-485"><a href="#cb58-485" aria-hidden="true" tabindex="-1"></a><span class="co">              place where the blouse is located</span></span>
<span id="cb58-486"><a href="#cb58-486" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-487"><a href="#cb58-487" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-488"><a href="#cb58-488" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Blouse __init__ called"</span>)</span>
<span id="cb58-489"><a href="#cb58-489" aria-hidden="true" tabindex="-1"></a>          <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, location)</span>
<span id="cb58-490"><a href="#cb58-490" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb58-491"><a href="#cb58-491" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.style <span class="op">=</span> style</span>
<span id="cb58-492"><a href="#cb58-492" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb58-493"><a href="#cb58-493" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__Blouse_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb58-494"><a href="#cb58-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-495"><a href="#cb58-495" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb58-496"><a href="#cb58-496" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-497"><a href="#cb58-497" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Blouse __str__ called"</span>)</span>
<span id="cb58-498"><a href="#cb58-498" aria-hidden="true" tabindex="-1"></a>          stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb58-499"><a href="#cb58-499" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb58-500"><a href="#cb58-500" aria-hidden="true" tabindex="-1"></a><span class="st">  Size: </span><span class="sc">{1}</span></span>
<span id="cb58-501"><a href="#cb58-501" aria-hidden="true" tabindex="-1"></a><span class="st">  Style: </span><span class="sc">{2}</span></span>
<span id="cb58-502"><a href="#cb58-502" aria-hidden="true" tabindex="-1"></a><span class="st">  Pattern: </span><span class="sc">{3}</span><span class="st">"""</span></span>
<span id="cb58-503"><a href="#cb58-503" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.size, <span class="va">self</span>.style, <span class="va">self</span>.pattern)</span>
<span id="cb58-504"><a href="#cb58-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-505"><a href="#cb58-505" aria-hidden="true" tabindex="-1"></a>      <span class="at">@property</span></span>
<span id="cb58-506"><a href="#cb58-506" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb58-507"><a href="#cb58-507" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-508"><a href="#cb58-508" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Blouse get item_name called"</span>)</span>
<span id="cb58-509"><a href="#cb58-509" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"Blouse"</span></span>
<span id="cb58-510"><a href="#cb58-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-511"><a href="#cb58-511" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb58-512"><a href="#cb58-512" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb58-513"><a href="#cb58-513" aria-hidden="true" tabindex="-1"></a><span class="co">          Checks the version and upgrades a `Blouse` instance as required</span></span>
<span id="cb58-514"><a href="#cb58-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-515"><a href="#cb58-515" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb58-516"><a href="#cb58-516" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb58-517"><a href="#cb58-517" aria-hidden="true" tabindex="-1"></a><span class="co">          None</span></span>
<span id="cb58-518"><a href="#cb58-518" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb58-519"><a href="#cb58-519" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb58-520"><a href="#cb58-520" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"** Blouse check_version called"</span>)</span>
<span id="cb58-521"><a href="#cb58-521" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="bu">super</span>().check_version()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>We’ve implemented in all our remaining subclasses <code>Hat</code> and <code>Blouse</code></p></li>
<li><p>We’ve also added the <a href="#code-analysis-data-design"><code>location</code> variable</a></p></li>
<li><p>Our Menu looks pretty straight forward now</p></li>
<li><p>In <code>StockItem</code> we’ve also added extra class attributes</p>
<ul>
<li><code>min_price</code> and</li>
<li><code>max_price</code></li>
<li>These are designed to be used by external validators
<ul>
<li>We can add validation directly to the classes later</li>
</ul></li>
</ul></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>menu <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="st">Create a new stock item</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="st">1. Dress</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="st">2. Pants</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="st">3. Hat</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="st">4. Blouse</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="st">5. Jeans</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="st">Enter item to add: """</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>first_menu_option <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>last_menu_option <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>min_stock_item_size <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>max_stock_item_size <span class="op">=</span> <span class="dv">99</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>item <span class="op">=</span> BTCInput.read_int_ranged(menu, first_menu_option, last_menu_option)</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> item <span class="op">&lt;</span> first_menu_option <span class="kw">or</span> item <span class="op">&gt;</span> last_menu_option:</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">ValueError</span>(</span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Unexpected value </span><span class="sc">{0}</span><span class="st"> found in menu. Please raise a bug report"</span>.<span class="bu">format</span>(item)</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><p>We define our standard menu framework</p></li>
<li><p>The <code>min_stock_item_size</code> and <code>max_stock_item_size</code> are variables that store the min and max of any size related properties like size, length, waist etc.</p></li>
<li><p>We then get the user’s choice and check that it’s valid</p>
<ul>
<li>This is our usual mechanism of making the code robust to changes</li>
<li>When we add a command <code>first_menu_option</code> and/or <code>second_menu_option</code> should be updated</li>
<li>Needs to be replicated through to getting user input</li>
<li>The guard clause makes sure these align</li>
</ul></li>
<li><p>Now we have a valid item we can get the common attributes for a <code>StockItem</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># now we have a valid item so get the common attributes</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  stock_ref <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter Stock reference: "</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  price <span class="op">=</span> BTCInput.read_float_ranged(</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Enter price: "</span>, min_value<span class="op">=</span>StockItem.min_price, max_value<span class="op">=</span>StockItem.max_price</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  colour <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter colour: "</span>)</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  location <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter location: "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Then we implement the menu choices as below</p></li>
<li><p>We report to the user what object we’re creating</p></li>
<li><p>We then ask for the attributes unique to that stock item type</p></li>
<li><p>Then create the appropriate object</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> item <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Creating a Dress"</span>)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  pattern <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter pattern: "</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  size <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Enter size: "</span>, min_value<span class="op">=</span>min_stock_item_size, max_value<span class="op">=</span>max_stock_item_size</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  stock_item <span class="op">=</span> Dress(stock_ref, price, colour, pattern, size, location)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">elif</span> item <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Creating a pair of Pants"</span>)</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>      pattern <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter pattern: "</span>)</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>      length <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter length: "</span>, min_value<span class="op">=</span>min_stock_item_size, max_value<span class="op">=</span>max_stock_item_size</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>      waist <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter waist size: "</span>,</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>          min_value<span class="op">=</span>min_stock_item_size,</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>          max_value<span class="op">=</span>max_stock_item_size,</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>      stock_item <span class="op">=</span> Pants(stock_ref, price, colour, pattern, length, waist, location)</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">elif</span> item <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Creating a Hat"</span>)</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>      size <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter size: "</span>, min_value<span class="op">=</span>min_stock_item_size, max_value<span class="op">=</span>max_stock_item_size</span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a>      stock_item <span class="op">=</span> Hat(stock_ref, price, colour, size, location)</span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">elif</span> item <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Creating a Blouse"</span>)</span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>      pattern <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter pattern: "</span>)</span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>      style <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter style: "</span>)</span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>      size <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter size: "</span>, min_value<span class="op">=</span>min_stock_item_size, max_value<span class="op">=</span>max_stock_item_size</span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a>      stock_item <span class="op">=</span> Blouse(stock_ref, price, colour, pattern, style, size, location)</span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a>  <span class="cf">elif</span> item <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Creating a pair of Jeans"</span>)</span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a>      pattern <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter pattern: "</span>)</span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a>      style <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter style: "</span>)</span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a>      length <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-43"><a href="#cb61-43" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter length: "</span>, min_value<span class="op">=</span>min_stock_item_size, max_value<span class="op">=</span>max_stock_item_size</span>
<span id="cb61-44"><a href="#cb61-44" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-45"><a href="#cb61-45" aria-hidden="true" tabindex="-1"></a>      waist <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb61-46"><a href="#cb61-46" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter waist size: "</span>,</span>
<span id="cb61-47"><a href="#cb61-47" aria-hidden="true" tabindex="-1"></a>          min_value<span class="op">=</span>min_stock_item_size,</span>
<span id="cb61-48"><a href="#cb61-48" aria-hidden="true" tabindex="-1"></a>          max_value<span class="op">=</span>max_stock_item_size,</span>
<span id="cb61-49"><a href="#cb61-49" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-50"><a href="#cb61-50" aria-hidden="true" tabindex="-1"></a>      stock_item <span class="op">=</span> Jeans(</span>
<span id="cb61-51"><a href="#cb61-51" aria-hidden="true" tabindex="-1"></a>          stock_ref, price, colour, pattern, length, waist, style, location</span>
<span id="cb61-52"><a href="#cb61-52" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb61-53"><a href="#cb61-53" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb61-54"><a href="#cb61-54" aria-hidden="true" tabindex="-1"></a>      stock_item <span class="op">=</span> <span class="va">None</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>An example output from this program might then look like</p></li>
</ul>
<div id="3b8635e4" class="cell" data-execution_count="35">
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre>Create a new stock item



1. Dress

2. Pants

3. Hat

4. Blouse

5. Jeans



Enter item to add: <span class="ansi-red-fg"> 1</span>

Enter Stock reference: <span class="ansi-red-fg">DO001</span>

Enter price: <span class="ansi-red-fg">100</span>

Enter colour: <span class="ansi-red-fg">Red</span>

Enter location: <span class="ansi-red-fg">Shop Window</span>

Creating a Dress

Enter pattern: <span class="ansi-red-fg">Swirly</span>

Enter size: <span class="ansi-red-fg">12</span>

Enter location: <span class="ansi-red-fg">Front Window</span>

**Dress __init__ called

**StockItem __init__ called

**Dress __str__ called

**StockItem __str__ called

**Dress get item_name called

**StockItem get price called

**StockItem get stock_level called

Stock Reference: D001

Type: Dress

Price: 100

Stock level: 0

Location: Front Window

Colour: Red

Pattern: Swirly

Size: 12
</pre>
</div>
</div>
</div>
<ul>
<li>In the future we will look at how to wrap these user interactions in a class <code>FashionShopShellApplication</code></li>
</ul>
</section>
<section id="add-stock-to-an-existing-item" class="level5">
<h5 class="anchored" data-anchor-id="add-stock-to-an-existing-item">Add Stock to an Existing Item</h5>
<ul>
<li>When items are created they start with a default stock level of <span class="math inline">\(0\)</span></li>
<li>We need some way to increase a stock item’s stock level when an order arrives</li>
<li>We can’t directly modify <code>__stock_level</code> as it’s private</li>
<li>So we need to add a method</li>
</ul>
<div id="4ee3d217" class="cell" data-execution_count="36">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 11.7 Updating Stock Levels on an Item</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Continues demonstrating behaviours of the fashion shop, here we highlight how</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># to implement adding to stock levels</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> abc</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="co">    Abstract base class representing a single inventory item.</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Subclasses are expected to overwrite the `item_name` abstract</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="co">    property with a user friendly string description</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a><span class="co">        reference id of the stock item</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the item's colour</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a><span class="co">    location : str</span></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a><span class="co">        description of where the pants are located</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a><span class="co">    Class Attributes</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------------</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a><span class="co">    show_instrumentation : bool</span></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a><span class="co">        Indicates if instrumentation should be printed</span></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a><span class="co">    max_stock_add : int</span></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a><span class="co">        maximum amount of stock that can be added to an item's stock level at a time</span></span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a>    show_instrumentation <span class="op">=</span> <span class="va">True</span></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>    max_stock_add <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, location):</span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-40"><a href="#cb62-40" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `StockItem` instance</span></span>
<span id="cb62-41"><a href="#cb62-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-42"><a href="#cb62-42" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb62-43"><a href="#cb62-43" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb62-44"><a href="#cb62-44" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb62-45"><a href="#cb62-45" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference id</span></span>
<span id="cb62-46"><a href="#cb62-46" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb62-47"><a href="#cb62-47" aria-hidden="true" tabindex="-1"></a><span class="co">            stock price</span></span>
<span id="cb62-48"><a href="#cb62-48" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb62-49"><a href="#cb62-49" aria-hidden="true" tabindex="-1"></a><span class="co">            description of stock item's colour</span></span>
<span id="cb62-50"><a href="#cb62-50" aria-hidden="true" tabindex="-1"></a><span class="co">        location : str</span></span>
<span id="cb62-51"><a href="#cb62-51" aria-hidden="true" tabindex="-1"></a><span class="co">            description of where the pants are located</span></span>
<span id="cb62-52"><a href="#cb62-52" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-53"><a href="#cb62-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-54"><a href="#cb62-54" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem __init__ called"</span>)</span>
<span id="cb62-55"><a href="#cb62-55" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb62-56"><a href="#cb62-56" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb62-57"><a href="#cb62-57" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.colour <span class="op">=</span> colour</span>
<span id="cb62-58"><a href="#cb62-58" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.location <span class="op">=</span> location</span>
<span id="cb62-59"><a href="#cb62-59" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb62-60"><a href="#cb62-60" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb62-61"><a href="#cb62-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-62"><a href="#cb62-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb62-63"><a href="#cb62-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-64"><a href="#cb62-64" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem __str__ called"</span>)</span>
<span id="cb62-65"><a href="#cb62-65" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""Stock Reference: </span><span class="sc">{0}</span></span>
<span id="cb62-66"><a href="#cb62-66" aria-hidden="true" tabindex="-1"></a><span class="st">Type: </span><span class="sc">{1}</span></span>
<span id="cb62-67"><a href="#cb62-67" aria-hidden="true" tabindex="-1"></a><span class="st">Price: </span><span class="sc">{2}</span></span>
<span id="cb62-68"><a href="#cb62-68" aria-hidden="true" tabindex="-1"></a><span class="st">Stock level: </span><span class="sc">{3}</span></span>
<span id="cb62-69"><a href="#cb62-69" aria-hidden="true" tabindex="-1"></a><span class="st">Location: </span><span class="sc">{4}</span></span>
<span id="cb62-70"><a href="#cb62-70" aria-hidden="true" tabindex="-1"></a><span class="st">Colour: </span><span class="sc">{5}</span><span class="st">"""</span></span>
<span id="cb62-71"><a href="#cb62-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(</span>
<span id="cb62-72"><a href="#cb62-72" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.stock_ref,</span>
<span id="cb62-73"><a href="#cb62-73" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.item_name,</span>
<span id="cb62-74"><a href="#cb62-74" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.price,</span>
<span id="cb62-75"><a href="#cb62-75" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.stock_level,</span>
<span id="cb62-76"><a href="#cb62-76" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.location,</span>
<span id="cb62-77"><a href="#cb62-77" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.colour,</span>
<span id="cb62-78"><a href="#cb62-78" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb62-79"><a href="#cb62-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-80"><a href="#cb62-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb62-81"><a href="#cb62-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">@abc.abstractmethod</span></span>
<span id="cb62-82"><a href="#cb62-82" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> item_name(<span class="va">self</span>):</span>
<span id="cb62-83"><a href="#cb62-83" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-84"><a href="#cb62-84" aria-hidden="true" tabindex="-1"></a><span class="co">        item_name : str</span></span>
<span id="cb62-85"><a href="#cb62-85" aria-hidden="true" tabindex="-1"></a><span class="co">            the stock item's name as a user friendly string</span></span>
<span id="cb62-86"><a href="#cb62-86" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-87"><a href="#cb62-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-88"><a href="#cb62-88" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem item_name called"</span>)</span>
<span id="cb62-89"><a href="#cb62-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb62-90"><a href="#cb62-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-91"><a href="#cb62-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb62-92"><a href="#cb62-92" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> price(<span class="va">self</span>):</span>
<span id="cb62-93"><a href="#cb62-93" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-94"><a href="#cb62-94" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb62-95"><a href="#cb62-95" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb62-96"><a href="#cb62-96" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-97"><a href="#cb62-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-98"><a href="#cb62-98" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem get price called"</span>)</span>
<span id="cb62-99"><a href="#cb62-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__price</span>
<span id="cb62-100"><a href="#cb62-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-101"><a href="#cb62-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb62-102"><a href="#cb62-102" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> stock_level(<span class="va">self</span>):</span>
<span id="cb62-103"><a href="#cb62-103" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-104"><a href="#cb62-104" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_level : int</span></span>
<span id="cb62-105"><a href="#cb62-105" aria-hidden="true" tabindex="-1"></a><span class="co">            amount of stock in inventory</span></span>
<span id="cb62-106"><a href="#cb62-106" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-107"><a href="#cb62-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-108"><a href="#cb62-108" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem get stock_level called"</span>)</span>
<span id="cb62-109"><a href="#cb62-109" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__stock_level</span>
<span id="cb62-110"><a href="#cb62-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-111"><a href="#cb62-111" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb62-112"><a href="#cb62-112" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-113"><a href="#cb62-113" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a `StockItem` instance and upgrades it if required</span></span>
<span id="cb62-114"><a href="#cb62-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-115"><a href="#cb62-115" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb62-116"><a href="#cb62-116" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb62-117"><a href="#cb62-117" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb62-118"><a href="#cb62-118" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-119"><a href="#cb62-119" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-120"><a href="#cb62-120" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem check_version called"</span>)</span>
<span id="cb62-121"><a href="#cb62-121" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.__StockItem_version <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb62-122"><a href="#cb62-122" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.location <span class="op">=</span> <span class="va">None</span></span>
<span id="cb62-123"><a href="#cb62-123" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb62-124"><a href="#cb62-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-125"><a href="#cb62-125" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add_stock(<span class="va">self</span>, count):</span>
<span id="cb62-126"><a href="#cb62-126" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-127"><a href="#cb62-127" aria-hidden="true" tabindex="-1"></a><span class="co">        Add stock to an item</span></span>
<span id="cb62-128"><a href="#cb62-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-129"><a href="#cb62-129" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb62-130"><a href="#cb62-130" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb62-131"><a href="#cb62-131" aria-hidden="true" tabindex="-1"></a><span class="co">        count : int</span></span>
<span id="cb62-132"><a href="#cb62-132" aria-hidden="true" tabindex="-1"></a><span class="co">            amount of stock to add to an item</span></span>
<span id="cb62-133"><a href="#cb62-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-134"><a href="#cb62-134" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb62-135"><a href="#cb62-135" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb62-136"><a href="#cb62-136" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb62-137"><a href="#cb62-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-138"><a href="#cb62-138" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb62-139"><a href="#cb62-139" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb62-140"><a href="#cb62-140" aria-hidden="true" tabindex="-1"></a><span class="co">        Exception</span></span>
<span id="cb62-141"><a href="#cb62-141" aria-hidden="true" tabindex="-1"></a><span class="co">            raised if `count` &lt; 0 or `count` &gt; `StockItem.max_stock_add`</span></span>
<span id="cb62-142"><a href="#cb62-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-143"><a href="#cb62-143" aria-hidden="true" tabindex="-1"></a><span class="co">        See Also</span></span>
<span id="cb62-144"><a href="#cb62-144" aria-hidden="true" tabindex="-1"></a><span class="co">        --------</span></span>
<span id="cb62-145"><a href="#cb62-145" aria-hidden="true" tabindex="-1"></a><span class="co">        StockItem.max_stock_add : maximum amount of stock that can be added to a `StockItem`</span></span>
<span id="cb62-146"><a href="#cb62-146" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-147"><a href="#cb62-147" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-148"><a href="#cb62-148" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**StockItem add_stock called"</span>)</span>
<span id="cb62-149"><a href="#cb62-149" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> count <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">or</span> count <span class="op">&gt;</span> StockItem.max_stock_add:</span>
<span id="cb62-150"><a href="#cb62-150" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Invalid add amount"</span>)</span>
<span id="cb62-151"><a href="#cb62-151" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="va">self</span>.__stock_level <span class="op">+</span> count</span>
<span id="cb62-152"><a href="#cb62-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-153"><a href="#cb62-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-154"><a href="#cb62-154" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Dress(StockItem):</span>
<span id="cb62-155"><a href="#cb62-155" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb62-156"><a href="#cb62-156" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the inventory details for a Dress</span></span>
<span id="cb62-157"><a href="#cb62-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-158"><a href="#cb62-158" aria-hidden="true" tabindex="-1"></a><span class="co">    Inherits from `StockItem`</span></span>
<span id="cb62-159"><a href="#cb62-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-160"><a href="#cb62-160" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb62-161"><a href="#cb62-161" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb62-162"><a href="#cb62-162" aria-hidden="true" tabindex="-1"></a><span class="co">    stock_ref : str</span></span>
<span id="cb62-163"><a href="#cb62-163" aria-hidden="true" tabindex="-1"></a><span class="co">        dress reference id</span></span>
<span id="cb62-164"><a href="#cb62-164" aria-hidden="true" tabindex="-1"></a><span class="co">    price : int | float</span></span>
<span id="cb62-165"><a href="#cb62-165" aria-hidden="true" tabindex="-1"></a><span class="co">        dress price</span></span>
<span id="cb62-166"><a href="#cb62-166" aria-hidden="true" tabindex="-1"></a><span class="co">    colour : str</span></span>
<span id="cb62-167"><a href="#cb62-167" aria-hidden="true" tabindex="-1"></a><span class="co">        description of dress's colour</span></span>
<span id="cb62-168"><a href="#cb62-168" aria-hidden="true" tabindex="-1"></a><span class="co">    pattern : str</span></span>
<span id="cb62-169"><a href="#cb62-169" aria-hidden="true" tabindex="-1"></a><span class="co">        description of the dress pattern</span></span>
<span id="cb62-170"><a href="#cb62-170" aria-hidden="true" tabindex="-1"></a><span class="co">    size : int</span></span>
<span id="cb62-171"><a href="#cb62-171" aria-hidden="true" tabindex="-1"></a><span class="co">        dress size</span></span>
<span id="cb62-172"><a href="#cb62-172" aria-hidden="true" tabindex="-1"></a><span class="co">    location : str</span></span>
<span id="cb62-173"><a href="#cb62-173" aria-hidden="true" tabindex="-1"></a><span class="co">        place where the dress is located</span></span>
<span id="cb62-174"><a href="#cb62-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-175"><a href="#cb62-175" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb62-176"><a href="#cb62-176" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb62-177"><a href="#cb62-177" aria-hidden="true" tabindex="-1"></a><span class="co">    StockItem : Parent Class</span></span>
<span id="cb62-178"><a href="#cb62-178" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb62-179"><a href="#cb62-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-180"><a href="#cb62-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, colour, pattern, size, location):</span>
<span id="cb62-181"><a href="#cb62-181" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-182"><a href="#cb62-182" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a `Dress` instance</span></span>
<span id="cb62-183"><a href="#cb62-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-184"><a href="#cb62-184" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb62-185"><a href="#cb62-185" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb62-186"><a href="#cb62-186" aria-hidden="true" tabindex="-1"></a><span class="co">        stock_ref : str</span></span>
<span id="cb62-187"><a href="#cb62-187" aria-hidden="true" tabindex="-1"></a><span class="co">            stock reference code</span></span>
<span id="cb62-188"><a href="#cb62-188" aria-hidden="true" tabindex="-1"></a><span class="co">        price : int | float</span></span>
<span id="cb62-189"><a href="#cb62-189" aria-hidden="true" tabindex="-1"></a><span class="co">            dress price</span></span>
<span id="cb62-190"><a href="#cb62-190" aria-hidden="true" tabindex="-1"></a><span class="co">        colour : str</span></span>
<span id="cb62-191"><a href="#cb62-191" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress colour</span></span>
<span id="cb62-192"><a href="#cb62-192" aria-hidden="true" tabindex="-1"></a><span class="co">        pattern : str</span></span>
<span id="cb62-193"><a href="#cb62-193" aria-hidden="true" tabindex="-1"></a><span class="co">            description of the dress pattern</span></span>
<span id="cb62-194"><a href="#cb62-194" aria-hidden="true" tabindex="-1"></a><span class="co">        size : int</span></span>
<span id="cb62-195"><a href="#cb62-195" aria-hidden="true" tabindex="-1"></a><span class="co">            dress size</span></span>
<span id="cb62-196"><a href="#cb62-196" aria-hidden="true" tabindex="-1"></a><span class="co">        location : str</span></span>
<span id="cb62-197"><a href="#cb62-197" aria-hidden="true" tabindex="-1"></a><span class="co">            place where the dress is located</span></span>
<span id="cb62-198"><a href="#cb62-198" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-199"><a href="#cb62-199" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-200"><a href="#cb62-200" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress __init__ called"</span>)</span>
<span id="cb62-201"><a href="#cb62-201" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(stock_ref, price, colour, location)</span>
<span id="cb62-202"><a href="#cb62-202" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.pattern <span class="op">=</span> pattern</span>
<span id="cb62-203"><a href="#cb62-203" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.size <span class="op">=</span> size</span>
<span id="cb62-204"><a href="#cb62-204" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__Dress_version <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb62-205"><a href="#cb62-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-206"><a href="#cb62-206" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb62-207"><a href="#cb62-207" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-208"><a href="#cb62-208" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress __str__ called"</span>)</span>
<span id="cb62-209"><a href="#cb62-209" aria-hidden="true" tabindex="-1"></a>        stock_details <span class="op">=</span> <span class="bu">super</span>().<span class="fu">__str__</span>()</span>
<span id="cb62-210"><a href="#cb62-210" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb62-211"><a href="#cb62-211" aria-hidden="true" tabindex="-1"></a><span class="st">Pattern: </span><span class="sc">{1}</span></span>
<span id="cb62-212"><a href="#cb62-212" aria-hidden="true" tabindex="-1"></a><span class="st">Size: </span><span class="sc">{2}</span><span class="st">"""</span></span>
<span id="cb62-213"><a href="#cb62-213" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(stock_details, <span class="va">self</span>.pattern, <span class="va">self</span>.size)</span>
<span id="cb62-214"><a href="#cb62-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-215"><a href="#cb62-215" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb62-216"><a href="#cb62-216" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> item_name(<span class="va">self</span>):  <span class="co"># type: ignore</span></span>
<span id="cb62-217"><a href="#cb62-217" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-218"><a href="#cb62-218" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress get item_name called"</span>)</span>
<span id="cb62-219"><a href="#cb62-219" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Dress"</span></span>
<span id="cb62-220"><a href="#cb62-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-221"><a href="#cb62-221" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb62-222"><a href="#cb62-222" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb62-223"><a href="#cb62-223" aria-hidden="true" tabindex="-1"></a><span class="co">        Checks the version of a `Dress` instance and upgrades it if required</span></span>
<span id="cb62-224"><a href="#cb62-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-225"><a href="#cb62-225" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb62-226"><a href="#cb62-226" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb62-227"><a href="#cb62-227" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb62-228"><a href="#cb62-228" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb62-229"><a href="#cb62-229" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb62-230"><a href="#cb62-230" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"**Dress check_version called"</span>)</span>
<span id="cb62-231"><a href="#cb62-231" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().check_version()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>We add a new class attribute <code>max_stock_add</code> which defines the maximum amount of stock that can be added to an item in one go</p></li>
<li><p>We then define an <code>add_stock</code> method</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> add_stock(<span class="va">self</span>, count):</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Add stock to an item</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co">      count : int</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co">          amount of stock to add to an item</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co">      Raises</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="co">      ------</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="co">      Exception</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="co">          raised if `count` &lt; 0 or `count` &gt; `StockItem.max_stock_add`</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="co">      StockItem.max_stock_add : maximum amount of stock that can be added to a `StockItem`</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"**StockItem add_stock called"</span>)</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> count <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">or</span> count <span class="op">&gt;</span> StockItem.max_stock_add:</span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>          <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Invalid add amount"</span>)</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="va">self</span>.__stock_level <span class="op">+</span> count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We first validate the <code>count</code> variable</p>
<ul>
<li>Raising an <code>Exception</code> if invalid so it can be handled</li>
</ul></li>
<li><p>Once validated we can directly update the private variable</p></li>
<li><p>Let us see how this works with a <code>Dress</code> now</p>
<div id="af98498c" class="cell" data-execution_count="37">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>  d <span class="op">=</span> Dress(</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>      <span class="st">"D0001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"Red"</span>, pattern<span class="op">=</span><span class="st">"Swirly"</span>, size<span class="op">=</span><span class="dv">12</span>, location<span class="op">=</span><span class="st">"Shop Window"</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  d.add_stock(<span class="dv">5</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(d)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Dress __init__ called
**StockItem __init__ called
**StockItem add_stock called
**Dress __str__ called
**StockItem __str__ called
**Dress get item_name called
**StockItem get price called
**StockItem get stock_level called
Stock Reference: D0001
Type: Dress
Price: 100
Stock level: 5
Location: Shop Window
Colour: Red
Pattern: Swirly
Size: 12</code></pre>
</div>
</div></li>
<li><p>We can see the Stock Level is now <span class="math inline">\(5\)</span></p></li>
<li><p>What happens if we try to add more than <code>StockItem.max_stock_add</code>?</p></li>
</ul>
<div id="4c53ec80" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>d.add_stock(<span class="dv">15</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**StockItem add_stock called</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[38]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">d</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">add_stock</span><span class="ansi-yellow-bg">(</span><span class="ansi-green-fg ansi-yellow-bg">15</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[36]</span><span class="ansi-green-fg">, line 150</span>, in <span class="ansi-cyan-fg">StockItem.add_stock</span><span class="ansi-blue-fg">(self, count)</span>
<span class="ansi-green-fg">    148</span>     <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">**StockItem add_stock called</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    149</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> count &lt; <span class="ansi-green-fg">0</span> <span style="font-weight:bold;color:rgb(175,0,255)">or</span> count &gt; StockItem.max_stock_add:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">150</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">Exception</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Invalid add amount</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    151</span> <span style="color:rgb(0,135,0)">self</span>.__stock_level = <span style="color:rgb(0,135,0)">self</span>.__stock_level + count

<span class="ansi-red-fg">Exception</span>: Invalid add amount</pre>
</div>
</div>
</div>
<ul>
<li>Well as expected we get an Exception, showing our error-handling is working correctly</li>
<li>As the above shows, by adding the method directly to <code>StockItem</code> it is automatically available to all of the subclasses without the need to write extra code</li>
</ul>
</section>
<section id="sell-a-stock-item" class="level5">
<h5 class="anchored" data-anchor-id="sell-a-stock-item">Sell a Stock Item</h5>
<ul>
<li><p>Now we need to account for the opposite case where stock is sold</p></li>
<li><p>The stock level will correspondingly decrease</p></li>
<li><p>We do this with another method on <code>StockItem</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem(abc.ABC):</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Stock Item for the Fashion Shop</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> sell_stock(<span class="va">self</span>, count):</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> count <span class="op">&lt;</span> <span class="dv">1</span>:</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>              <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Invalid number of items to sell"</span>)</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> count <span class="op">&gt;</span> <span class="va">self</span>.__stock_level:</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>              <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Not enough stock to sell"</span>)</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="va">self</span>.__stock_level <span class="op">-</span> count</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>The amount to sell is given by the <code>count</code> parameter</p></li>
<li><p>We raise an exception in two cases</p>
<ol type="1">
<li>The user tries to sell <span class="math inline">\(&lt; 1\)</span> items, since this physically doesn’t make sense</li>
<li>The user tries to sell more items than are available i.e.&nbsp;<code>count</code> <span class="math inline">\(&gt;\)</span> <code>self.__stock_level</code></li>
</ol></li>
<li><p>Let’s see how this plays out with the <code>Dress</code> class</p>
<div id="e57bd127" class="cell" data-execution_count="40">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>  d <span class="op">=</span> Dress(</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>      <span class="st">"D0001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"Red"</span>, pattern<span class="op">=</span><span class="st">"Swirly"</span>, size<span class="op">=</span><span class="dv">12</span>, location<span class="op">=</span><span class="st">"Shop Window"</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  d.add_stock(<span class="dv">5</span>)</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  d.sell_stock(<span class="dv">1</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(d)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Dress __init__ called
**StockItem __init__ called
**StockItem add_stock called
**StockItem sell_stock called
**Dress __str__ called
**StockItem __str__ called
**Dress get item_name called
**StockItem get price called
**StockItem get stock_level called
Stock Reference: D0001
Type: Dress
Price: 100
Stock level: 4
Location: Shop Window
Colour: Red
Pattern: Swirly
Size: 12</code></pre>
</div>
</div></li>
<li><p>And again what happens if we try to do something invalid like selling more stock than we have</p>
<div id="bed4117d" class="cell" data-execution_count="41">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>  d.sell_stock(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**StockItem sell_stock called</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">Exception</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[41]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">d</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">sell_stock</span><span class="ansi-yellow-bg">(</span><span class="ansi-green-fg ansi-yellow-bg">10</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[39]</span><span class="ansi-green-fg">, line 178</span>, in <span class="ansi-cyan-fg">StockItem.sell_stock</span><span class="ansi-blue-fg">(self, count)</span>
<span class="ansi-green-fg">    176</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">Exception</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Invalid number of items to sell</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    177</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> count &gt; <span style="color:rgb(0,135,0)">self</span>.__stock_level:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">178</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">Exception</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Not enough stock to sell</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">    179</span> <span style="color:rgb(0,135,0)">self</span>.__stock_level = <span style="color:rgb(0,135,0)">self</span>.__stock_level - count

<span class="ansi-red-fg">Exception</span>: Not enough stock to sell</pre>
</div>
</div>
</div></li>
<li><p>As expected, an exception is raised</p></li>
</ul>
</section>
</section>
<section id="objects-as-components" class="level4">
<h4 class="anchored" data-anchor-id="objects-as-components">Objects as Components</h4>
<ul>
<li>We have completed the <code>StockItem</code> and it’s associated class hierarchy</li>
<li>All behaviours given by the fashion shop item data spec is now implemented by the class and its subclasses</li>
<li><code>StockItem</code> is a purely self-contained and cohesive</li>
<li>We’ve done some basic testing of the external behaviours
<ul>
<li>Later we’ll look at how to implement automatic testing of our objects</li>
</ul></li>
<li>Sometimes we call a cohesive, self-contained part a <em>component</em></li>
<li>E.g. in a car production line different parts of the line produce different parts, like the motor, panels, transmission etc.
<ul>
<li>All are made separately and the final product is composed of all the parts</li>
</ul></li>
<li>We would like to do something similar with <code>StockItem</code>
<ul>
<li>Move it around as it’s own component</li>
<li>Can then potentially reuse it as it’s own feature in other projects</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Self-contained components are a great way to build software</strong></p>
<p>Breaking software projects down into individual components is a great design philosophy. When you’re working solo it lets you focus on a small completable part of the program and progressively build up the complexity. When working with a larger team, different parts of the team can be assigned to work on the different independent components without interfering with each others work.</p>
<p>For example in our fashion shop project someone could be building the <code>StockItem</code> while another person works on the UI</p>
</div>
</div>
</section>
</section>
<section id="create-a-fashionshop-component" class="level3">
<h3 class="anchored" data-anchor-id="create-a-fashionshop-component">Create a <code>FashionShop</code> Component</h3>
<ul>
<li><p>We have implemented a complete <code>StockItem</code> component</p>
<ul>
<li>Represents everything about a single item of stock</li>
</ul></li>
<li><p>Now we want to create a component that handles the management of collections of stock</p></li>
<li><p>We will call this component <code>FashionShop</code></p></li>
<li><p>We identify the following requirements</p>
<ol type="1">
<li>Create a new fashion shop</li>
<li>Save the fashion shop stock data to a file</li>
<li>Load the data from a file</li>
<li>Store a new stock item</li>
<li>Find a particular stock item</li>
<li>Provide a listing of all stock items</li>
</ol></li>
<li><p>We can start by stubbing out our class, (the template code is given by <a href="./Examples/09_FashionShopPrototype/FashionShop.py">Fashion Shop Prototype</a>)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Example 11.9 Fashion Stock Prototype</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Provides a stubbed out template for the FashionShop Class</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="co">      Represents the inventory management system of a Fashion Shop</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co">          Create a new `FashionShop` instance</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>          <span class="cf">pass</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> save(<span class="va">self</span>, filename):</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a><span class="co">          Save the `FashionShop` to a given file</span></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a><span class="co">          `FashionShop` is saved as a pickled binary file in the file given</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a><span class="co">          by `filename`. The file is created if it doesn't exist. If the file</span></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a><span class="co">          already exists it is overwritten</span></span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a><span class="co">          filename : str</span></span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a><span class="co">              path to the file to save</span></span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a><span class="co">          None</span></span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a><span class="co">          Raises</span></span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a><span class="co">          ------</span></span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a><span class="co">          Exceptions</span></span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a><span class="co">              raised if the file fails to save</span></span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a><span class="co">          See Also</span></span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a><span class="co">          --------</span></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a><span class="co">          FashionShop.load : load a `FashionShop` object from a file</span></span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a>          <span class="cf">pass</span></span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">@staticmethod</span></span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> load(filename):</span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a><span class="co">          Create a `FashionShop` instance from a pickled binary file</span></span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-50"><a href="#cb73-50" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb73-51"><a href="#cb73-51" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb73-52"><a href="#cb73-52" aria-hidden="true" tabindex="-1"></a><span class="co">          filename : str</span></span>
<span id="cb73-53"><a href="#cb73-53" aria-hidden="true" tabindex="-1"></a><span class="co">              path to a file containing pickled `FashionShop` data</span></span>
<span id="cb73-54"><a href="#cb73-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-55"><a href="#cb73-55" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb73-56"><a href="#cb73-56" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb73-57"><a href="#cb73-57" aria-hidden="true" tabindex="-1"></a><span class="co">          FashionShop</span></span>
<span id="cb73-58"><a href="#cb73-58" aria-hidden="true" tabindex="-1"></a><span class="co">              the loaded `FashionShop` instance</span></span>
<span id="cb73-59"><a href="#cb73-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-60"><a href="#cb73-60" aria-hidden="true" tabindex="-1"></a><span class="co">          Raises</span></span>
<span id="cb73-61"><a href="#cb73-61" aria-hidden="true" tabindex="-1"></a><span class="co">          ------</span></span>
<span id="cb73-62"><a href="#cb73-62" aria-hidden="true" tabindex="-1"></a><span class="co">          Exceptions</span></span>
<span id="cb73-63"><a href="#cb73-63" aria-hidden="true" tabindex="-1"></a><span class="co">              raised if the file fails to load</span></span>
<span id="cb73-64"><a href="#cb73-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-65"><a href="#cb73-65" aria-hidden="true" tabindex="-1"></a><span class="co">          See Also</span></span>
<span id="cb73-66"><a href="#cb73-66" aria-hidden="true" tabindex="-1"></a><span class="co">          --------</span></span>
<span id="cb73-67"><a href="#cb73-67" aria-hidden="true" tabindex="-1"></a><span class="co">          FashionShop.save : saves a `FashionShop` instance</span></span>
<span id="cb73-68"><a href="#cb73-68" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb73-69"><a href="#cb73-69" aria-hidden="true" tabindex="-1"></a>          <span class="cf">pass</span></span>
<span id="cb73-70"><a href="#cb73-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-71"><a href="#cb73-71" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> store_new_stock_item(<span class="va">self</span>, item):</span>
<span id="cb73-72"><a href="#cb73-72" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb73-73"><a href="#cb73-73" aria-hidden="true" tabindex="-1"></a><span class="co">          Store a new item in the reference system</span></span>
<span id="cb73-74"><a href="#cb73-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-75"><a href="#cb73-75" aria-hidden="true" tabindex="-1"></a><span class="co">          The provided `item` can be indexed by it's `stock_ref` parameter</span></span>
<span id="cb73-76"><a href="#cb73-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-77"><a href="#cb73-77" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb73-78"><a href="#cb73-78" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb73-79"><a href="#cb73-79" aria-hidden="true" tabindex="-1"></a><span class="co">          item : StockItem</span></span>
<span id="cb73-80"><a href="#cb73-80" aria-hidden="true" tabindex="-1"></a><span class="co">              item to add to the inventory system</span></span>
<span id="cb73-81"><a href="#cb73-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-82"><a href="#cb73-82" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb73-83"><a href="#cb73-83" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb73-84"><a href="#cb73-84" aria-hidden="true" tabindex="-1"></a><span class="co">          None</span></span>
<span id="cb73-85"><a href="#cb73-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-86"><a href="#cb73-86" aria-hidden="true" tabindex="-1"></a><span class="co">          Raises</span></span>
<span id="cb73-87"><a href="#cb73-87" aria-hidden="true" tabindex="-1"></a><span class="co">          ------</span></span>
<span id="cb73-88"><a href="#cb73-88" aria-hidden="true" tabindex="-1"></a><span class="co">          KeyError</span></span>
<span id="cb73-89"><a href="#cb73-89" aria-hidden="true" tabindex="-1"></a><span class="co">              Raised if the item's `stock_ref` is already registered as a key</span></span>
<span id="cb73-90"><a href="#cb73-90" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb73-91"><a href="#cb73-91" aria-hidden="true" tabindex="-1"></a>          <span class="cf">pass</span></span>
<span id="cb73-92"><a href="#cb73-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-93"><a href="#cb73-93" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> find_stock_item(<span class="va">self</span>, stock_ref):</span>
<span id="cb73-94"><a href="#cb73-94" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb73-95"><a href="#cb73-95" aria-hidden="true" tabindex="-1"></a><span class="co">          Find the stock item with the corresponding reference id</span></span>
<span id="cb73-96"><a href="#cb73-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-97"><a href="#cb73-97" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb73-98"><a href="#cb73-98" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb73-99"><a href="#cb73-99" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb73-100"><a href="#cb73-100" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference id of the item to find</span></span>
<span id="cb73-101"><a href="#cb73-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-102"><a href="#cb73-102" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb73-103"><a href="#cb73-103" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb73-104"><a href="#cb73-104" aria-hidden="true" tabindex="-1"></a><span class="co">          StockItem | None</span></span>
<span id="cb73-105"><a href="#cb73-105" aria-hidden="true" tabindex="-1"></a><span class="co">              Returns a `StockItem` with a matching `stock_ref` else `None`</span></span>
<span id="cb73-106"><a href="#cb73-106" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb73-107"><a href="#cb73-107" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb73-108"><a href="#cb73-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-109"><a href="#cb73-109" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb73-110"><a href="#cb73-110" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">""</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We’ll now start by filling in these methods one by one</p></li>
<li><p>We provide a complete docstring which documents what the function <em>should</em> do</p>
<ul>
<li>Means someone else could come and implement it if we were working in a team</li>
</ul></li>
<li><p>Some methods return placeholder values</p>
<ul>
<li>These implement partial functionality</li>
<li>e.g.&nbsp;<code>find_stock_item</code> always returns <code>None</code> at the moment</li>
</ul></li>
<li><p>A program utilising <code>FashionShop</code> needs only call the methods based on the description</p>
<ul>
<li>Does not need to know about the internals</li>
</ul></li>
</ul>
<section id="create-a-fashionship-object-instance" class="level4">
<h4 class="anchored" data-anchor-id="create-a-fashionship-object-instance">Create a <code>FashionShip</code> Object Instance</h4>
<ul>
<li><p>Our first step is to define our data attributes and define the <code>__init__</code></p></li>
<li><p>We’ll start by using a dictionary to store our items</p>
<div id="cb42af25" class="cell" data-execution_count="42">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__stock_dictionary <span class="op">=</span> {}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>The <code>__init__</code> takes no arguments</p></li>
<li><p>Purely creates an empty dictionary (<code>self.__stock_dictionary</code>) to store future stock items</p></li>
<li><p>We make the dictionary private to avoid accidental modification</p></li>
<li><p>We can now create a new <code>FashionShop</code></p>
<div id="9e42b44d" class="cell" data-execution_count="43">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>  shop <span class="op">=</span> FashionShop()</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(shop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;__main__.FashionShop object at 0x7f78b80edf40&gt;</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="save-the-fashionshop-object" class="level4">
<h4 class="anchored" data-anchor-id="save-the-fashionshop-object">Save the <code>FashionShop</code> Object</h4>
<ul>
<li><p>We’ll use the same approach we’ve used before of pickling our files</p></li>
<li><p>Works exactly as we’ve seen before</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> save(<span class="va">self</span>, filename):</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>          <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">"wb"</span>) <span class="im">as</span> out_file:</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>              pickle.dump(<span class="va">self</span>, out_file)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We use <code>with</code> to handle making sure the file is properly cleaned up once we’re done</p></li>
<li><p>We pass <code>self</code> to <code>pickle.dump</code> to save the object instance on which <code>save</code> is called</p></li>
<li><p>The below example demonstrates creating an (empty) <code>FashionShop</code> <code>shop</code> and then saving it</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>  shop <span class="op">=</span> FashionShop()</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  shop.save(<span class="st">"FashionShop.pickle"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="load-the-fashionshop-object" class="level4">
<h4 class="anchored" data-anchor-id="load-the-fashionshop-object">Load the <code>FashionShop</code> Object</h4>
<ul>
<li><p>The load in our <a href="#create-a-fashionshop-component">template</a> is marked as a <code>@staticmethod</code></p></li>
<li><p>We can’t make it a object method, because there is no object yet</p></li>
<li><p>Make it static so it’s still associated with the class</p></li>
<li><p>This means we want the <code>load</code> method to create and return a new <code>FashionShop</code> item</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> load(filename):</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>          <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">"rb"</span>) <span class="im">as</span> input_file:</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>              shop <span class="op">=</span> pickle.load(input_file)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> shop</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>If we wanted to load the <code>FashionShop</code> object we had saved above we would write</p>
<p>```python loaded_shop = FashionShop.load(“FashionShop.pickle”)</p></li>
</ul>
</section>
<section id="store-a-new-item" class="level4">
<h4 class="anchored" data-anchor-id="store-a-new-item">Store a New Item</h4>
<ul>
<li><p><code>FashionShop</code> is effectively a container for <code>StockItem</code> objects</p></li>
<li><p>At the moment the underlying model is a dictionary</p></li>
<li><p>We can’t add new items directly to the dictionary for two reasons</p>
<ol type="1">
<li>We’ve made it private so we can’t directly add them</li>
<li>We want to prevent adding multiple items with the same reference</li>
</ol></li>
<li><p>As mentioned above we want to prevent duplicates</p></li>
<li><p>How should we handle duplicates?</p>
<ul>
<li>We could use a status code, but as said, we should favour exceptions</li>
<li>We’ll return a <code>KeyError</code> if the key already exists</li>
<li>We then need to document this in the docstring</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> store_new_stock_item(<span class="va">self</span>, item):</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Store a new item in the reference system</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co">      The provided `item` can be indexed by it's `stock_ref` parameter</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="co">      item : StockItem</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="co">          item to add to the inventory system</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a><span class="co">      Raises</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a><span class="co">      ------</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a><span class="co">      KeyError</span></span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a><span class="co">          Raised if the item's `stock_ref` is already registered as a key</span></span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> item.stock_ref <span class="kw">in</span> <span class="va">self</span>.__stock_dictionary:</span>
<span id="cb80-24"><a href="#cb80-24" aria-hidden="true" tabindex="-1"></a>          <span class="cf">raise</span> <span class="pp">KeyError</span>(<span class="st">"This stock reference is already used"</span>)</span>
<span id="cb80-25"><a href="#cb80-25" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.__stock_dictionary[item.stock_ref] <span class="op">=</span> item</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p><code>store_new_stock_item</code> adds a new stock item to the container</p></li>
<li><p>It does not create one, we have to do that separately</p></li>
<li><p>The method checks for duplicates, throwing a <code>KeyError</code> if the stock reference is already used</p></li>
<li><p>If no exception is raised, the item is inserted into the stock dictionary</p></li>
<li><p>Let us see this in practice,</p>
<div id="52e8aee7" class="cell" data-execution_count="45">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>  dress <span class="op">=</span> Dress(stock_ref<span class="op">=</span><span class="st">"D001"</span>, price<span class="op">=</span><span class="dv">100</span>, colour<span class="op">=</span><span class="st">"red"</span>, pattern<span class="op">=</span><span class="st">"swirly"</span>, size<span class="op">=</span><span class="dv">12</span>, location<span class="op">=</span><span class="st">"front"</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  shop <span class="op">=</span> FashionShop()</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  shop.store_new_stock_item(dress)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Dress __init__ called
**StockItem __init__ called</code></pre>
</div>
</div></li>
<li><p>And if we try to add it again…</p>
<div id="26d75d5d" class="cell" data-execution_count="46">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>  shop.store_new_stock_item(dress)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[46]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">shop</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">store_new_stock_item</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">dress</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[44]</span><span class="ansi-green-fg">, line 93</span>, in <span class="ansi-cyan-fg">FashionShop.store_new_stock_item</span><span class="ansi-blue-fg">(self, item)</span>
<span class="ansi-green-fg">     73</span> <span style="font-style:italic" class="ansi-yellow-fg">"""</span>
<span class="ansi-green-fg">     74</span> <span style="font-style:italic" class="ansi-yellow-fg">Store a new item in the reference system</span>
<span class="ansi-green-fg">     75</span> 
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">     90</span> <span style="font-style:italic" class="ansi-yellow-fg">    Raised if the item's `stock_ref` is already registered as a key</span>
<span class="ansi-green-fg">     91</span> <span style="font-style:italic" class="ansi-yellow-fg">"""</span>
<span class="ansi-green-fg">     92</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> item.stock_ref <span style="font-weight:bold;color:rgb(175,0,255)">in</span> <span style="color:rgb(0,135,0)">self</span>.__stock_dictionary:
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">93</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">KeyError</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">This stock reference is already used</span><span class="ansi-yellow-fg">"</span>)
<span class="ansi-green-fg">     94</span> <span style="color:rgb(0,135,0)">self</span>.__stock_dictionary[item.stock_ref] = item

<span class="ansi-red-fg">KeyError</span>: 'This stock reference is already used'</pre>
</div>
</div>
</div></li>
</ul>
</section>
<section id="find-a-stock-item" class="level4">
<h4 class="anchored" data-anchor-id="find-a-stock-item">Find a Stock Item</h4>
<ul>
<li>Finding stock is implemented as a dictionary lookup</li>
<li>Dictionaries provide the <code>get</code> method
<ul>
<li>Acts as a normal dictionary lookup</li>
<li>However if the key is missing a default value is returned</li>
<li>The default value for this default parameter is <code>None</code></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> find_stock_item(<span class="va">self</span>, stock_ref):</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co">          Find the stock item with the corresponding reference id</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co">          stock_ref : str</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="co">              stock reference id of the item to find</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="co">          Returns</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="co">          -------</span></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="co">          StockItem | None</span></span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a><span class="co">              Returns a `StockItem` with a matching `stock_ref` else `None`</span></span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="va">self</span>.__stock_dictionary.get(stock_ref)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li>The calling code is responsible for checking that the returned value is a valid <code>StockItem</code></li>
<li>Let’s demonstrate this by trying to find the dress we just added, and one that didn’t exist</li>
</ul>
<div id="a8ed9798" class="cell" data-execution_count="48">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(shop.find_stock_item(<span class="st">"D001"</span>))</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(shop.find_stock_item(<span class="st">"AAAA"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Dress __str__ called
**StockItem __str__ called
**Dress get item_name called
**StockItem get price called
**StockItem get stock_level called
Stock Reference: D001
Type: Dress
Price: 100
Stock level: 0
Location: front
Colour: red
Pattern: swirly
Size: 12
None</code></pre>
</div>
</div>
</section>
<section id="list-the-stock-data" class="level4">
<h4 class="anchored" data-anchor-id="list-the-stock-data">List the Stock Data</h4>
<ul>
<li>Final step is to list the stock data</li>
<li>We want this in the form a human-readable string</li>
<li>We can use a similar approach seen with our <code>Session class in [Chapter 10](../10_UseClassesToCreateActiveObjects/Chapter_10.qmd#code-analysis-creating-a-session-class)     -</code>StockItem<code>provides a</code><strong>str</strong>` method
<ul>
<li>We can iterate over the container items to get all of these</li>
<li>Then just have to nicely format the container</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShop:</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>          stock <span class="op">=</span> <span class="bu">map</span>(<span class="bu">str</span>, <span class="va">self</span>.__stock_dictionary.values())</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>          stock_list <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(stock)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>          template <span class="op">=</span> <span class="st">"""Items in Stock</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="st">  </span><span class="sc">{0}</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="st">  """</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> template.<span class="bu">format</span>(stock_list)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li>Let’s put everything we’ve put together in practice</li>
<li>We’ll create two items and add them to the shop then print the contents</li>
<li>You can find the complete implementation of the fashion shop class in <a href="./Examples/10_FashionShopClass/FashionShop.py">Fashion Shop</a>
<ul>
<li>Like our <a href="#make-something-happen-instrumented-stock-items">instrumented version</a> of <code>StockItem</code>, <code>FashionShop</code> provides instrumentation so you can view the program flow</li>
</ul></li>
</ul>
<div id="f61c97f2" class="cell" data-execution_count="50">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>dress <span class="op">=</span> Dress(</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>    stock_ref<span class="op">=</span><span class="st">"D001"</span>,</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>    price<span class="op">=</span><span class="dv">100</span>,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    colour<span class="op">=</span><span class="st">"red"</span>,</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    pattern<span class="op">=</span><span class="st">"swirly"</span>,</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    size<span class="op">=</span><span class="dv">12</span>,</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    location<span class="op">=</span><span class="st">"front"</span>,</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>pants <span class="op">=</span> Pants(</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>    stock_ref<span class="op">=</span><span class="st">"A002"</span>,</span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>    price<span class="op">=</span><span class="dv">200</span>,</span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>    colour<span class="op">=</span><span class="st">"cream"</span>,</span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>    pattern<span class="op">=</span><span class="st">"plain"</span>,</span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>    length<span class="op">=</span><span class="dv">12</span>,</span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>    waist<span class="op">=</span><span class="dv">34</span>,</span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>    location<span class="op">=</span><span class="st">"back right corner"</span>,</span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>shop <span class="op">=</span> FashionShop()</span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>shop.store_new_stock_item(dress)</span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>shop.store_new_stock_item(pants)</span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(shop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>**Dress __init__ called
**StockItem __init__ called
**Pants __init__ called
**StockItem __init__ called
**FashionShop __init__ called
**FashionShop store new stock item called
**FashionShop store new stock item called
**Dress __str__ called
**StockItem __str__ called
**Dress get item_name called
**StockItem get price called
**StockItem get stock_level called
**Pants __str__ called
**StockItem __str__ called
**Pants get item_name called
**StockItem get price called
**StockItem get stock_level called

Stock Reference: D001
Type: Dress
Price: 100
Stock level: 0
Location: front
Colour: red
Pattern: swirly
Size: 12
Stock Reference: A002
Type: Pants
Price: 200
Stock level: 0
Location: back right corner
Colour: cream
Pattern: plain
Length: 12
Waist: 34
</code></pre>
</div>
</div>
</section>
<section id="exercise-create-a-banking-application" class="level4">
<h4 class="anchored" data-anchor-id="exercise-create-a-banking-application">Exercise: Create a Banking Application</h4>
<p><em>You can use a similar structure to the</em> <code>FashionShop</code> <em>inventory management class for any program that needs to manage a key-based lookup of items, examples may include a bank account management system, a doll collection or competition entries</em></p>
<p><em>Implement a basic bank account management system. The system should have three different account types</em></p>
<ol type="1">
<li>Savings accounts
<ul>
<li>Have an account number, a monthly interest rate, a balance, and a person associated with the account</li>
<li>A savings account can have money deposited or withdrawn</li>
<li>A savings account balance cannot be negative</li>
<li>Every month a savings account balance is increased by the interest rate</li>
</ul></li>
<li>Long-term savings account
<ul>
<li>Like a savings account</li>
<li>However also has a start date, and a term maturation period</li>
<li>Money cannot be withdrawn from a long-term savings account before the maturation date</li>
<li>Once a long-term savings deposit has matured the interest rate is quartered</li>
<li>An account holder can either reinvest a matured long-term savings deposit (starting a new term and maturation)
<ul>
<li>Or close out a matured long-term deposit transferring it to another account</li>
</ul></li>
</ul></li>
<li>Credit Account
<ul>
<li>Have a maximum withdrawal limit</li>
<li>A credit account balance cannot be positive</li>
<li>Every month a credit account balance is increased by the interest rate (i.e.&nbsp;any unpaid credit is increased)</li>
<li>A credit account can not have a negative balance whose magnitude is greater than the maximum withdrawal limit</li>
</ul></li>
</ol>
<p>The bank system should have a similar interface to the <code>FashionShop</code>, with the following,</p>
<ol type="1">
<li>Create a new bank system</li>
<li>Save the bank system data to a file</li>
<li>Load the data from a file</li>
<li>Store a new bank account</li>
<li>Find a particular bank account</li>
<li>Provide a listing of all accounts</li>
<li>Find all accounts associated with a particular person</li>
</ol>
<p>Lets start by mapping out a class hierarchy for accounts. We can see that all accounts have a number, interest rate, balance and an associated account holder, each also supports being able to withdraw or deposit money and have interest applied, however they each implement these methods differently. So we’ll define an <em>abstract base class</em> <code>Account</code> that provides these data attributes and declares these methods. Subclasses then overwrite the method.</p>
<p>Our first subclass will be a savings account which requires no additional data attributes. Our second is a long-term savings account. This acts like a saving account but also has a maturation period and a start date. There are additional restrictions on how the account operates depending on if it has matured or not, so we’ll inherit from a Savings Account. A credit account has different behaviours for its deposit and withdraw methods and has a maximum withdrawal limit, so will be a subclass derived from the base account class</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
title: Account Class Diagram
---

classDiagram
    class object

    class Account {
        str account_number
        str account_holder
        number interest_rate
        number balance
        deposit()
        withdraw()
        apply_interest()
    }

    class SavingsAccount

    class LongTermSavingsAccount {
        date start_date
        int term_period
    }

    class CreditAccount {
        number max_withdrawal_limit
    }

    object &lt;|-- Account
    Account &lt;|-- SavingsAccount
    SavingsAccount &lt;|--  LongTermSavingsAccount
    Account &lt;|-- CreditAccount
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Our abstract base class is fairly simple, it defines the properties and the abstract methods. You’ll observe that we make the majority of data attributes <em>read-only</em>. This is because when dealing with people’s money we want to be really careful about inappropriate changes!</p>
<div id="74fd8d6f" class="cell" data-execution_count="51">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Account(abc.ABC):</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Abstract class representing a single account</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Subclasses are expected to overwrite the `deposit`,</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="co">    `withdraw` and `apply_interest` abstract methods</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes:</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a><span class="co">    -----------</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a><span class="co">    account_holder : str</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a><span class="co">        name of the account owner</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="co">    interest_rate : int | float</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a><span class="co">        interest rate applied to the account</span></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, account_number, account_holder, interest_rate):</span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb90-22"><a href="#cb90-22" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a new `Account` instance</span></span>
<span id="cb90-23"><a href="#cb90-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-24"><a href="#cb90-24" aria-hidden="true" tabindex="-1"></a><span class="co">        `Account` is abstract and should never be called directly</span></span>
<span id="cb90-25"><a href="#cb90-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-26"><a href="#cb90-26" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb90-27"><a href="#cb90-27" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb90-28"><a href="#cb90-28" aria-hidden="true" tabindex="-1"></a><span class="co">        account_number : str</span></span>
<span id="cb90-29"><a href="#cb90-29" aria-hidden="true" tabindex="-1"></a><span class="co">            Unique account number</span></span>
<span id="cb90-30"><a href="#cb90-30" aria-hidden="true" tabindex="-1"></a><span class="co">        account_holder : str</span></span>
<span id="cb90-31"><a href="#cb90-31" aria-hidden="true" tabindex="-1"></a><span class="co">            Name of the account holder</span></span>
<span id="cb90-32"><a href="#cb90-32" aria-hidden="true" tabindex="-1"></a><span class="co">        interest_rate : int | float</span></span>
<span id="cb90-33"><a href="#cb90-33" aria-hidden="true" tabindex="-1"></a><span class="co">            interest rate applied to the account</span></span>
<span id="cb90-34"><a href="#cb90-34" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb90-35"><a href="#cb90-35" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__account_number <span class="op">=</span> account_number</span>
<span id="cb90-36"><a href="#cb90-36" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.account_holder <span class="op">=</span> account_holder.strip().lower()</span>
<span id="cb90-37"><a href="#cb90-37" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.interest_rate <span class="op">=</span> interest_rate</span>
<span id="cb90-38"><a href="#cb90-38" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__balance <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb90-39"><a href="#cb90-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-40"><a href="#cb90-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb90-41"><a href="#cb90-41" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""Account Number: </span><span class="sc">{0}</span></span>
<span id="cb90-42"><a href="#cb90-42" aria-hidden="true" tabindex="-1"></a><span class="st">Account Holder: </span><span class="sc">{1}</span></span>
<span id="cb90-43"><a href="#cb90-43" aria-hidden="true" tabindex="-1"></a><span class="st">Interest Rate: </span><span class="sc">{2}</span></span>
<span id="cb90-44"><a href="#cb90-44" aria-hidden="true" tabindex="-1"></a><span class="st">Balance: $</span><span class="sc">{3}</span><span class="st">"""</span></span>
<span id="cb90-45"><a href="#cb90-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(</span>
<span id="cb90-46"><a href="#cb90-46" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.account_number, <span class="va">self</span>.account_holder, <span class="va">self</span>.interest_rate, <span class="va">self</span>.balance</span>
<span id="cb90-47"><a href="#cb90-47" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb90-48"><a href="#cb90-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-49"><a href="#cb90-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb90-50"><a href="#cb90-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> account_number(<span class="va">self</span>):</span>
<span id="cb90-51"><a href="#cb90-51" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb90-52"><a href="#cb90-52" aria-hidden="true" tabindex="-1"></a><span class="co">        account_number : str</span></span>
<span id="cb90-53"><a href="#cb90-53" aria-hidden="true" tabindex="-1"></a><span class="co">            Unique account number</span></span>
<span id="cb90-54"><a href="#cb90-54" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb90-55"><a href="#cb90-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__account_number</span>
<span id="cb90-56"><a href="#cb90-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-57"><a href="#cb90-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb90-58"><a href="#cb90-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> balance(<span class="va">self</span>):</span>
<span id="cb90-59"><a href="#cb90-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb90-60"><a href="#cb90-60" aria-hidden="true" tabindex="-1"></a><span class="co">        balance: int | float</span></span>
<span id="cb90-61"><a href="#cb90-61" aria-hidden="true" tabindex="-1"></a><span class="co">            account balance in dollars</span></span>
<span id="cb90-62"><a href="#cb90-62" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb90-63"><a href="#cb90-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__balance</span>
<span id="cb90-64"><a href="#cb90-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-65"><a href="#cb90-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">@abc.abstractmethod</span></span>
<span id="cb90-66"><a href="#cb90-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> deposit(<span class="va">self</span>, amount):</span>
<span id="cb90-67"><a href="#cb90-67" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb90-68"><a href="#cb90-68" aria-hidden="true" tabindex="-1"></a><span class="co">        Deposit money in an account</span></span>
<span id="cb90-69"><a href="#cb90-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-70"><a href="#cb90-70" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb90-71"><a href="#cb90-71" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb90-72"><a href="#cb90-72" aria-hidden="true" tabindex="-1"></a><span class="co">        amount : int | float</span></span>
<span id="cb90-73"><a href="#cb90-73" aria-hidden="true" tabindex="-1"></a><span class="co">            amount in dollars to deposit in the account</span></span>
<span id="cb90-74"><a href="#cb90-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-75"><a href="#cb90-75" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb90-76"><a href="#cb90-76" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb90-77"><a href="#cb90-77" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb90-78"><a href="#cb90-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-79"><a href="#cb90-79" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb90-80"><a href="#cb90-80" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb90-81"><a href="#cb90-81" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb90-82"><a href="#cb90-82" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if `amount` cannot be deposited</span></span>
<span id="cb90-83"><a href="#cb90-83" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb90-84"><a href="#cb90-84" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__balance <span class="op">+=</span> amount</span>
<span id="cb90-85"><a href="#cb90-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-86"><a href="#cb90-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">@abc.abstractmethod</span></span>
<span id="cb90-87"><a href="#cb90-87" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> withdraw(<span class="va">self</span>, amount):</span>
<span id="cb90-88"><a href="#cb90-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb90-89"><a href="#cb90-89" aria-hidden="true" tabindex="-1"></a><span class="co">        Withdraw money from an account</span></span>
<span id="cb90-90"><a href="#cb90-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-91"><a href="#cb90-91" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb90-92"><a href="#cb90-92" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb90-93"><a href="#cb90-93" aria-hidden="true" tabindex="-1"></a><span class="co">        amount : int | float</span></span>
<span id="cb90-94"><a href="#cb90-94" aria-hidden="true" tabindex="-1"></a><span class="co">            amount to withdraw from the account in dollars</span></span>
<span id="cb90-95"><a href="#cb90-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-96"><a href="#cb90-96" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb90-97"><a href="#cb90-97" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb90-98"><a href="#cb90-98" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb90-99"><a href="#cb90-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-100"><a href="#cb90-100" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb90-101"><a href="#cb90-101" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb90-102"><a href="#cb90-102" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb90-103"><a href="#cb90-103" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if `amount` cannot be withdrawn</span></span>
<span id="cb90-104"><a href="#cb90-104" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb90-105"><a href="#cb90-105" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__balance <span class="op">-=</span> amount</span>
<span id="cb90-106"><a href="#cb90-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-107"><a href="#cb90-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">@abc.abstractmethod</span></span>
<span id="cb90-108"><a href="#cb90-108" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> apply_interest(<span class="va">self</span>):</span>
<span id="cb90-109"><a href="#cb90-109" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb90-110"><a href="#cb90-110" aria-hidden="true" tabindex="-1"></a><span class="co">        Apply the interest rate to the account and update the balance</span></span>
<span id="cb90-111"><a href="#cb90-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-112"><a href="#cb90-112" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb90-113"><a href="#cb90-113" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb90-114"><a href="#cb90-114" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb90-115"><a href="#cb90-115" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb90-116"><a href="#cb90-116" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__balance <span class="op">+=</span> <span class="va">self</span>.__balance <span class="op">*</span> <span class="va">self</span>.interest_rate</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><code>Account</code> defines <code>__init__</code>, <code>__str__</code>, <code>withdraw</code>, <code>deposit</code>, <code>apply_interest</code> functions
<ul>
<li><code>__init__</code> is a basic constructor</li>
<li><code>__str__</code> is the string representation</li>
<li><code>withdraw</code> is an abstract method for decreasing a balance
<ul>
<li>Since <code>balance</code> itself is a private attribute this method does the actual adjustment</li>
<li>Subclasses are expected to override the to modify the behaviour and provide validation, then forward the final result onto the super function</li>
</ul></li>
<li><code>deposit</code> is an abstract method for increasing a balance
<ul>
<li>Works like <code>withdraw</code> in that it should be overridden</li>
</ul></li>
<li><code>apply_interest</code> an abstract method that should be used to apply interest
<ul>
<li>Provides a simple default implementation</li>
</ul></li>
</ul></li>
<li>We can then define our savings account</li>
</ul>
<div id="83a9a71c" class="cell" data-execution_count="52">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> SavingsAccount(Account):</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents a standard savings account</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Savings accounts must have non-negative balances, and</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="co">    have interest paid on their balances</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Account : Parent Class</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, account_number, account_holder, interest_rate):</span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a new `SavingsAccount` instance</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a><span class="co">        account_number : str</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a><span class="co">            Unique account number</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a><span class="co">        account_holder : str</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a><span class="co">            Name of the account holder</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a><span class="co">        interest_rate : int | float</span></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a><span class="co">            interest rate applied to the account</span></span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(account_number, account_holder, interest_rate)</span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""==Savings Account==</span></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a><span class="sc">{0}</span><span class="st">"""</span></span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> template.<span class="bu">format</span>(<span class="bu">super</span>().<span class="fu">__str__</span>())</span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> deposit(<span class="va">self</span>, amount):</span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> amount <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"A deposit must be a non-negative number"</span>)</span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().deposit(amount)</span>
<span id="cb91-37"><a href="#cb91-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-38"><a href="#cb91-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> withdraw(<span class="va">self</span>, amount):</span>
<span id="cb91-39"><a href="#cb91-39" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb91-40"><a href="#cb91-40" aria-hidden="true" tabindex="-1"></a><span class="co">        Withdraw money from an account</span></span>
<span id="cb91-41"><a href="#cb91-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-42"><a href="#cb91-42" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb91-43"><a href="#cb91-43" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb91-44"><a href="#cb91-44" aria-hidden="true" tabindex="-1"></a><span class="co">        amount : int | float</span></span>
<span id="cb91-45"><a href="#cb91-45" aria-hidden="true" tabindex="-1"></a><span class="co">            amount to withdraw from the account in dollars</span></span>
<span id="cb91-46"><a href="#cb91-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-47"><a href="#cb91-47" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb91-48"><a href="#cb91-48" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb91-49"><a href="#cb91-49" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb91-50"><a href="#cb91-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-51"><a href="#cb91-51" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb91-52"><a href="#cb91-52" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb91-53"><a href="#cb91-53" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb91-54"><a href="#cb91-54" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if `amount` is non-negative or the greater than</span></span>
<span id="cb91-55"><a href="#cb91-55" aria-hidden="true" tabindex="-1"></a><span class="co">            the account balance</span></span>
<span id="cb91-56"><a href="#cb91-56" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb91-57"><a href="#cb91-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> amount <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb91-58"><a href="#cb91-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"A withdrawal must be a non-negative number"</span>)</span>
<span id="cb91-59"><a href="#cb91-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> amount <span class="op">&gt;</span> <span class="va">self</span>.balance:</span>
<span id="cb91-60"><a href="#cb91-60" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot withdraw more than the account balance"</span>)</span>
<span id="cb91-61"><a href="#cb91-61" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().withdraw(amount)</span>
<span id="cb91-62"><a href="#cb91-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-63"><a href="#cb91-63" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> apply_interest(<span class="va">self</span>):</span>
<span id="cb91-64"><a href="#cb91-64" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().apply_interest()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>The savings account overwrites the <code>__str__</code> method to prepend the account type</p></li>
<li><p><code>__init__</code> just forwards to the base class</p></li>
<li><p><code>deposit</code> checks that the argument is valid (<code>&gt; 0</code>) then forwards it to the base class method</p>
<ul>
<li>depositing a negative number is effectively a withdrawal</li>
</ul></li>
<li><p><code>withdraw</code> does the same but checks that the amount also does not exceed the balance</p></li>
<li><p>Apply interest just uses the default implementation</p></li>
<li><p>We then derive from <code>SavingsAccount</code> for <code>LongTermSavingsAccount</code></p></li>
</ul>
<div id="eeadfca6" class="cell" data-execution_count="53">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LongTermSavingsAccount(SavingsAccount):</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents a long term savings account</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="co">    An account in which money cannot be withdrawn before the term limit expires.</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="co">    After the term limit has expired a reduced interest rate is applied.</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="co">    SavingsAccount : Parent class</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(</span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>, account_number, account_holder, interest_rate, term_period_in_weeks</span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>    ):</span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a new `Account` instance</span></span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true" tabindex="-1"></a><span class="co">        `Account` is abstract and should never be called directly</span></span>
<span id="cb92-20"><a href="#cb92-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-21"><a href="#cb92-21" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb92-22"><a href="#cb92-22" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb92-23"><a href="#cb92-23" aria-hidden="true" tabindex="-1"></a><span class="co">        account_number : str</span></span>
<span id="cb92-24"><a href="#cb92-24" aria-hidden="true" tabindex="-1"></a><span class="co">            Unique account number</span></span>
<span id="cb92-25"><a href="#cb92-25" aria-hidden="true" tabindex="-1"></a><span class="co">        account_holder : str</span></span>
<span id="cb92-26"><a href="#cb92-26" aria-hidden="true" tabindex="-1"></a><span class="co">            Name of the account holder</span></span>
<span id="cb92-27"><a href="#cb92-27" aria-hidden="true" tabindex="-1"></a><span class="co">        interest_rate : int | float</span></span>
<span id="cb92-28"><a href="#cb92-28" aria-hidden="true" tabindex="-1"></a><span class="co">            interest rate applied to the account</span></span>
<span id="cb92-29"><a href="#cb92-29" aria-hidden="true" tabindex="-1"></a><span class="co">        term_period_in_weeks : int</span></span>
<span id="cb92-30"><a href="#cb92-30" aria-hidden="true" tabindex="-1"></a><span class="co">            length of the high yield savings term in weeks</span></span>
<span id="cb92-31"><a href="#cb92-31" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-32"><a href="#cb92-32" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__start_date <span class="op">=</span> datetime.date.today()</span>
<span id="cb92-33"><a href="#cb92-33" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__term_period <span class="op">=</span> term_period_in_weeks</span>
<span id="cb92-34"><a href="#cb92-34" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(account_number, account_holder, interest_rate)</span>
<span id="cb92-35"><a href="#cb92-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-36"><a href="#cb92-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb92-37"><a href="#cb92-37" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""</span><span class="sc">{0}</span></span>
<span id="cb92-38"><a href="#cb92-38" aria-hidden="true" tabindex="-1"></a><span class="st">Term Period: </span><span class="sc">{1}</span><span class="st"> weeks</span></span>
<span id="cb92-39"><a href="#cb92-39" aria-hidden="true" tabindex="-1"></a><span class="st">Start Date: </span><span class="sc">{2}</span></span>
<span id="cb92-40"><a href="#cb92-40" aria-hidden="true" tabindex="-1"></a><span class="st">Maturation Date: </span><span class="sc">{3}</span></span>
<span id="cb92-41"><a href="#cb92-41" aria-hidden="true" tabindex="-1"></a><span class="st">Has matured? </span><span class="sc">{4}</span><span class="st">"""</span></span>
<span id="cb92-42"><a href="#cb92-42" aria-hidden="true" tabindex="-1"></a>        formatted <span class="op">=</span> template.<span class="bu">format</span>(</span>
<span id="cb92-43"><a href="#cb92-43" aria-hidden="true" tabindex="-1"></a>            <span class="bu">super</span>().<span class="fu">__str__</span>(),</span>
<span id="cb92-44"><a href="#cb92-44" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.term_period,</span>
<span id="cb92-45"><a href="#cb92-45" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.start_date,</span>
<span id="cb92-46"><a href="#cb92-46" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.maturation_date,</span>
<span id="cb92-47"><a href="#cb92-47" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.has_matured(),</span>
<span id="cb92-48"><a href="#cb92-48" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb92-49"><a href="#cb92-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> formatted.replace(<span class="st">"Savings Account"</span>, <span class="st">"Long Term Savings Account"</span>)</span>
<span id="cb92-50"><a href="#cb92-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-51"><a href="#cb92-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb92-52"><a href="#cb92-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> start_date(<span class="va">self</span>):</span>
<span id="cb92-53"><a href="#cb92-53" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-54"><a href="#cb92-54" aria-hidden="true" tabindex="-1"></a><span class="co">        start_date : datetime.date</span></span>
<span id="cb92-55"><a href="#cb92-55" aria-hidden="true" tabindex="-1"></a><span class="co">            date the current term period started</span></span>
<span id="cb92-56"><a href="#cb92-56" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-57"><a href="#cb92-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__start_date</span>
<span id="cb92-58"><a href="#cb92-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-59"><a href="#cb92-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb92-60"><a href="#cb92-60" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> term_period(<span class="va">self</span>):</span>
<span id="cb92-61"><a href="#cb92-61" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-62"><a href="#cb92-62" aria-hidden="true" tabindex="-1"></a><span class="co">        term_period : int</span></span>
<span id="cb92-63"><a href="#cb92-63" aria-hidden="true" tabindex="-1"></a><span class="co">            length of the term in weeks</span></span>
<span id="cb92-64"><a href="#cb92-64" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-65"><a href="#cb92-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__term_period</span>
<span id="cb92-66"><a href="#cb92-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-67"><a href="#cb92-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb92-68"><a href="#cb92-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> maturation_date(<span class="va">self</span>):</span>
<span id="cb92-69"><a href="#cb92-69" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-70"><a href="#cb92-70" aria-hidden="true" tabindex="-1"></a><span class="co">        maturation_date : datetime.date</span></span>
<span id="cb92-71"><a href="#cb92-71" aria-hidden="true" tabindex="-1"></a><span class="co">            date the account matures</span></span>
<span id="cb92-72"><a href="#cb92-72" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-73"><a href="#cb92-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__start_date <span class="op">+</span> datetime.timedelta(weeks<span class="op">=</span><span class="va">self</span>.__term_period)</span>
<span id="cb92-74"><a href="#cb92-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-75"><a href="#cb92-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> has_matured(<span class="va">self</span>):</span>
<span id="cb92-76"><a href="#cb92-76" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-77"><a href="#cb92-77" aria-hidden="true" tabindex="-1"></a><span class="co">        Indicates if an account has matured</span></span>
<span id="cb92-78"><a href="#cb92-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-79"><a href="#cb92-79" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb92-80"><a href="#cb92-80" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb92-81"><a href="#cb92-81" aria-hidden="true" tabindex="-1"></a><span class="co">        `True` if the account has matured else, `False`</span></span>
<span id="cb92-82"><a href="#cb92-82" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-83"><a href="#cb92-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> datetime.date.today() <span class="op">&gt;=</span> <span class="va">self</span>.maturation_date</span>
<span id="cb92-84"><a href="#cb92-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-85"><a href="#cb92-85" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> withdraw(<span class="va">self</span>, amount):</span>
<span id="cb92-86"><a href="#cb92-86" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-87"><a href="#cb92-87" aria-hidden="true" tabindex="-1"></a><span class="co">        Withdraw money from a Long Term Savings Account</span></span>
<span id="cb92-88"><a href="#cb92-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-89"><a href="#cb92-89" aria-hidden="true" tabindex="-1"></a><span class="co">        Money cannot be withdrawn unless the account has matured</span></span>
<span id="cb92-90"><a href="#cb92-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-91"><a href="#cb92-91" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb92-92"><a href="#cb92-92" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb92-93"><a href="#cb92-93" aria-hidden="true" tabindex="-1"></a><span class="co">        amount : int | float</span></span>
<span id="cb92-94"><a href="#cb92-94" aria-hidden="true" tabindex="-1"></a><span class="co">            amount to withdraw from the account in dollars</span></span>
<span id="cb92-95"><a href="#cb92-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-96"><a href="#cb92-96" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb92-97"><a href="#cb92-97" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb92-98"><a href="#cb92-98" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb92-99"><a href="#cb92-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-100"><a href="#cb92-100" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb92-101"><a href="#cb92-101" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb92-102"><a href="#cb92-102" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb92-103"><a href="#cb92-103" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if `amount` is non-negative or the greater than</span></span>
<span id="cb92-104"><a href="#cb92-104" aria-hidden="true" tabindex="-1"></a><span class="co">            the account balance.</span></span>
<span id="cb92-105"><a href="#cb92-105" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb92-106"><a href="#cb92-106" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if the account has not</span></span>
<span id="cb92-107"><a href="#cb92-107" aria-hidden="true" tabindex="-1"></a><span class="co">            yet matured</span></span>
<span id="cb92-108"><a href="#cb92-108" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-109"><a href="#cb92-109" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.has_matured():</span>
<span id="cb92-110"><a href="#cb92-110" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot withdraw from an immature account"</span>)</span>
<span id="cb92-111"><a href="#cb92-111" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().withdraw(amount)</span>
<span id="cb92-112"><a href="#cb92-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-113"><a href="#cb92-113" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> apply_interest(<span class="va">self</span>):</span>
<span id="cb92-114"><a href="#cb92-114" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-115"><a href="#cb92-115" aria-hidden="true" tabindex="-1"></a><span class="co">        Apply interest to a Long Term Savings Account</span></span>
<span id="cb92-116"><a href="#cb92-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-117"><a href="#cb92-117" aria-hidden="true" tabindex="-1"></a><span class="co">        The applied interest for a Long Term Savings account is quartered</span></span>
<span id="cb92-118"><a href="#cb92-118" aria-hidden="true" tabindex="-1"></a><span class="co">        if the account has matured</span></span>
<span id="cb92-119"><a href="#cb92-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-120"><a href="#cb92-120" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb92-121"><a href="#cb92-121" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb92-122"><a href="#cb92-122" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb92-123"><a href="#cb92-123" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-124"><a href="#cb92-124" aria-hidden="true" tabindex="-1"></a>        effective_rate <span class="op">=</span> <span class="va">self</span>.interest_rate</span>
<span id="cb92-125"><a href="#cb92-125" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.has_matured():</span>
<span id="cb92-126"><a href="#cb92-126" aria-hidden="true" tabindex="-1"></a>            effective_rate <span class="op">/=</span> <span class="dv">4</span></span>
<span id="cb92-127"><a href="#cb92-127" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.deposit(<span class="va">self</span>.balance <span class="op">*</span> effective_rate)</span>
<span id="cb92-128"><a href="#cb92-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-129"><a href="#cb92-129" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> manage_account(<span class="va">self</span>, transfer_account<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb92-130"><a href="#cb92-130" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb92-131"><a href="#cb92-131" aria-hidden="true" tabindex="-1"></a><span class="co">        Manage a matured long term savings account</span></span>
<span id="cb92-132"><a href="#cb92-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-133"><a href="#cb92-133" aria-hidden="true" tabindex="-1"></a><span class="co">        A mature long term savings account can be closed</span></span>
<span id="cb92-134"><a href="#cb92-134" aria-hidden="true" tabindex="-1"></a><span class="co">        by providing an alternate account to transfer the</span></span>
<span id="cb92-135"><a href="#cb92-135" aria-hidden="true" tabindex="-1"></a><span class="co">        balance into. Alternately if no account is provided</span></span>
<span id="cb92-136"><a href="#cb92-136" aria-hidden="true" tabindex="-1"></a><span class="co">        the account is reinvested and a new term starts.</span></span>
<span id="cb92-137"><a href="#cb92-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-138"><a href="#cb92-138" aria-hidden="true" tabindex="-1"></a><span class="co">        The owner of the long term savings account and the</span></span>
<span id="cb92-139"><a href="#cb92-139" aria-hidden="true" tabindex="-1"></a><span class="co">        account to transfer into must be the same</span></span>
<span id="cb92-140"><a href="#cb92-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-141"><a href="#cb92-141" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb92-142"><a href="#cb92-142" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb92-143"><a href="#cb92-143" aria-hidden="true" tabindex="-1"></a><span class="co">        transfer_account : Account, optional</span></span>
<span id="cb92-144"><a href="#cb92-144" aria-hidden="true" tabindex="-1"></a><span class="co">            account to transfer into, pass None to reinvest instead, by default None</span></span>
<span id="cb92-145"><a href="#cb92-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-146"><a href="#cb92-146" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb92-147"><a href="#cb92-147" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb92-148"><a href="#cb92-148" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb92-149"><a href="#cb92-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-150"><a href="#cb92-150" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb92-151"><a href="#cb92-151" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb92-152"><a href="#cb92-152" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb92-153"><a href="#cb92-153" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised in attempting to manage an immature account</span></span>
<span id="cb92-154"><a href="#cb92-154" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError:</span></span>
<span id="cb92-155"><a href="#cb92-155" aria-hidden="true" tabindex="-1"></a><span class="co">            Could not transfer to the new account</span></span>
<span id="cb92-156"><a href="#cb92-156" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb92-157"><a href="#cb92-157" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.has_matured():</span>
<span id="cb92-158"><a href="#cb92-158" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot manage an immature account"</span>)</span>
<span id="cb92-159"><a href="#cb92-159" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> transfer_account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb92-160"><a href="#cb92-160" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.__start_date <span class="op">=</span> datetime.date.today()</span>
<span id="cb92-161"><a href="#cb92-161" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb92-162"><a href="#cb92-162" aria-hidden="true" tabindex="-1"></a>            balance <span class="op">=</span> <span class="va">self</span>.balance</span>
<span id="cb92-163"><a href="#cb92-163" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb92-164"><a href="#cb92-164" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.withdraw(balance)</span>
<span id="cb92-165"><a href="#cb92-165" aria-hidden="true" tabindex="-1"></a>                transfer_account.deposit(balance)</span>
<span id="cb92-166"><a href="#cb92-166" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb92-167"><a href="#cb92-167" aria-hidden="true" tabindex="-1"></a>                <span class="co"># need to ensure balances preserved</span></span>
<span id="cb92-168"><a href="#cb92-168" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.balance <span class="op">==</span> balance:</span>
<span id="cb92-169"><a href="#cb92-169" aria-hidden="true" tabindex="-1"></a>                    <span class="va">self</span>.deposit(balance <span class="op">-</span> <span class="va">self</span>.balance)</span>
<span id="cb92-170"><a href="#cb92-170" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="bu">str</span>(e))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>This class has two new attributes, <code>start_date</code> and <code>term_period</code></p></li>
<li><p>The term period is passed to the constructor as an integer number of weeks</p></li>
<li><p>The start date is calculated at <code>__init__</code> time</p></li>
<li><p>Note that we use the <code>datetime</code> library rather than <code>time</code></p>
<ul>
<li><code>datetime</code> provides similar time objects that we can perform comparisons and arithmetic on</li>
<li><code>datetime.date.today()</code> is the equivalent of <code>time.localtime()</code> and returns the current <code>date</code>
<ul>
<li><code>date</code> means there is no hours, minutes, seconds etc.</li>
<li>If we want this we would use <code>datetime.datetime.today()</code> instead</li>
</ul></li>
</ul></li>
<li><p>We provide a property <code>maturation_date</code></p>
<ul>
<li>This is a bit different to other properties we’ve seen</li>
<li>It doesn’t mask a private attribute</li>
<li>Instead it quickly calculates the <code>maturation_date</code> on the fly</li>
<li>We use a <code>datetime.timedelta</code> object which handles performing the arithmetic correctly</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>  <span class="at">@property</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> maturation_date(<span class="va">self</span>):</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co">      maturation_date : datetime.date</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="co">          date the account matures</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="va">self</span>.__start_date <span class="op">+</span> datetime.timedelta(weeks<span class="op">=</span><span class="va">self</span>.__term_period)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We then define a simple helper function <code>has_matured</code> which checks if the account has matured</p></li>
<li><p>Since we’re using <code>datetime</code> we can just get the current date and compare the two</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> has_matured(<span class="va">self</span>):</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Indicates if an account has matured</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="co">      `True` if the account has matured else, `False`</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> datetime.date.today() <span class="op">&gt;=</span> <span class="va">self</span>.maturation_date</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>The Long Term Savings Account can just use the <code>SavingsAccount</code> deposit method</p></li>
<li><p>We update the <code>withdraw</code> method to throw an error if the account hasn’t matured</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> withdraw(<span class="va">self</span>, amount):</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Withdraw money from a Long Term Savings Account</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Money cannot be withdrawn unless the account has matured</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="co">      amount : int | float</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co">          amount to withdraw from the account in dollars</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a><span class="co">      Raises</span></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="co">      ------</span></span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a><span class="co">      ValueError</span></span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a><span class="co">          Raised if `amount` is non-negative or the greater than</span></span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a><span class="co">          the account balance.</span></span>
<span id="cb95-21"><a href="#cb95-21" aria-hidden="true" tabindex="-1"></a><span class="co">      ValueError</span></span>
<span id="cb95-22"><a href="#cb95-22" aria-hidden="true" tabindex="-1"></a><span class="co">          Raised if the account has not</span></span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a><span class="co">          yet matured</span></span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb95-25"><a href="#cb95-25" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.has_matured():</span>
<span id="cb95-26"><a href="#cb95-26" aria-hidden="true" tabindex="-1"></a>          <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot withdraw from an immature account"</span>)</span>
<span id="cb95-27"><a href="#cb95-27" aria-hidden="true" tabindex="-1"></a>      <span class="bu">super</span>().withdraw(amount)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We also have to redefine our <code>apply_interest</code></p>
<ul>
<li>We apply a different effective rate for a matured account</li>
<li>This does not fit the signature, so we can’t just use the super method</li>
<li>Instead we calculate the effective rate and then use <code>deposit</code></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> apply_interest(<span class="va">self</span>):</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Apply interest to a Long Term Savings Account</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co">      The applied interest for a Long Term Savings account is quartered</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co">      if the account has matured</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>      effective_rate <span class="op">=</span> <span class="va">self</span>.interest_rate</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="va">self</span>.has_matured():</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>          effective_rate <span class="op">/=</span> <span class="dv">4</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.deposit(<span class="va">self</span>.balance <span class="op">*</span> effective_rate)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We also add a new function for handling a matured account</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> manage_account(<span class="va">self</span>, transfer_account<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Manage a matured long term savings account</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co">      A mature long term savings account can be closed</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="co">      by providing an alternate account to transfer the</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="co">      balance into. Alternately if no account is provided</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="co">      the account is reinvested and a new term starts.</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="co">      The owner of the long term savings account and the</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="co">      account to transfer into must be the same</span></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a><span class="co">      transfer_account : Account, optional</span></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a><span class="co">          account to transfer into, pass None to reinvest instead, by default None</span></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a><span class="co">      Raises</span></span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a><span class="co">      ------</span></span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a><span class="co">      ValueError</span></span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a><span class="co">          Raised in attempting to manage an immature account</span></span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a><span class="co">      ValueError:</span></span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a><span class="co">          Could not transfer to the new account</span></span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.has_matured():</span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>          <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot manage an immature account"</span>)</span>
<span id="cb97-31"><a href="#cb97-31" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> transfer_account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb97-32"><a href="#cb97-32" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__start_date <span class="op">=</span> datetime.date.today()</span>
<span id="cb97-33"><a href="#cb97-33" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb97-34"><a href="#cb97-34" aria-hidden="true" tabindex="-1"></a>          balance <span class="op">=</span> <span class="va">self</span>.balance</span>
<span id="cb97-35"><a href="#cb97-35" aria-hidden="true" tabindex="-1"></a>          <span class="cf">try</span>:</span>
<span id="cb97-36"><a href="#cb97-36" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.withdraw(balance)</span>
<span id="cb97-37"><a href="#cb97-37" aria-hidden="true" tabindex="-1"></a>              transfer_account.deposit(balance)</span>
<span id="cb97-38"><a href="#cb97-38" aria-hidden="true" tabindex="-1"></a>          <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb97-39"><a href="#cb97-39" aria-hidden="true" tabindex="-1"></a>              <span class="co"># need to ensure balances preserved</span></span>
<span id="cb97-40"><a href="#cb97-40" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.balance <span class="op">==</span> balance:</span>
<span id="cb97-41"><a href="#cb97-41" aria-hidden="true" tabindex="-1"></a>                  <span class="va">self</span>.deposit(balance <span class="op">-</span> <span class="va">self</span>.balance)</span>
<span id="cb97-42"><a href="#cb97-42" aria-hidden="true" tabindex="-1"></a>                  <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="bu">str</span>(e))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>This works in two ways</p>
<ol type="1">
<li><p>If no <code>transfer_account</code> is provided, a new term period is started</p></li>
<li><p>If a <code>transfer_account</code> is provided, the method attempts to transfer the balance to this account</p>
<ul>
<li>This can potentially fail</li>
<li>We don’t want the user to lose money</li>
<li>So we wrap this in a <code>try...except</code> block</li>
<li>If transfer fails we ensure that both accounts maintain their original balances</li>
<li>Then report to the user</li>
</ul></li>
</ol></li>
<li><p>Lastly we define a <code>CreditAccount</code> class</p></li>
<li><p>Works very similar to a <code>SavingsAccount</code> but can only have negative balances</p></li>
</ul>
<div id="2617fa8c" class="cell" data-execution_count="54">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CreditAccount(Account):</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents a basic credit account</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Savings accounts must have non-positive balances, and</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="co">    charge interest on their debts</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Account : Parent Class</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(</span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>, account_number, account_holder, interest_rate, max_withdrawal_limit</span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>    ):</span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a new `SavingsAccount` instance</span></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a><span class="co">        account_number : str</span></span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a><span class="co">            Unique account number</span></span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a><span class="co">        account_holder : str</span></span>
<span id="cb98-24"><a href="#cb98-24" aria-hidden="true" tabindex="-1"></a><span class="co">            Name of the account holder</span></span>
<span id="cb98-25"><a href="#cb98-25" aria-hidden="true" tabindex="-1"></a><span class="co">        interest_rate : int | float</span></span>
<span id="cb98-26"><a href="#cb98-26" aria-hidden="true" tabindex="-1"></a><span class="co">            interest rate applied to the account</span></span>
<span id="cb98-27"><a href="#cb98-27" aria-hidden="true" tabindex="-1"></a><span class="co">        max_withdrawal_limit : int | float</span></span>
<span id="cb98-28"><a href="#cb98-28" aria-hidden="true" tabindex="-1"></a><span class="co">            maximum account that can be loaned out at once</span></span>
<span id="cb98-29"><a href="#cb98-29" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb98-30"><a href="#cb98-30" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__max_withdrawal_limit <span class="op">=</span> max_withdrawal_limit</span>
<span id="cb98-31"><a href="#cb98-31" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(account_number, account_holder, interest_rate)</span>
<span id="cb98-32"><a href="#cb98-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-33"><a href="#cb98-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb98-34"><a href="#cb98-34" aria-hidden="true" tabindex="-1"></a>        template <span class="op">=</span> <span class="st">"""==Credit Account==</span></span>
<span id="cb98-35"><a href="#cb98-35" aria-hidden="true" tabindex="-1"></a><span class="sc">{0}</span></span>
<span id="cb98-36"><a href="#cb98-36" aria-hidden="true" tabindex="-1"></a><span class="st">Maximum Withdrawal Limit: </span><span class="sc">{1}</span><span class="st">"""</span></span>
<span id="cb98-37"><a href="#cb98-37" aria-hidden="true" tabindex="-1"></a>        formatted_string <span class="op">=</span> template.<span class="bu">format</span>(</span>
<span id="cb98-38"><a href="#cb98-38" aria-hidden="true" tabindex="-1"></a>            <span class="bu">super</span>().<span class="fu">__str__</span>(), <span class="va">self</span>.__max_withdrawal_limit</span>
<span id="cb98-39"><a href="#cb98-39" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb98-40"><a href="#cb98-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> formatted_string.replace(<span class="st">"Balance"</span>, <span class="st">"Balance owed"</span>).replace(<span class="st">"$-"</span>, <span class="st">"-$"</span>)</span>
<span id="cb98-41"><a href="#cb98-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-42"><a href="#cb98-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> deposit(<span class="va">self</span>, amount):</span>
<span id="cb98-43"><a href="#cb98-43" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb98-44"><a href="#cb98-44" aria-hidden="true" tabindex="-1"></a><span class="co">        Pay off a Credit loan</span></span>
<span id="cb98-45"><a href="#cb98-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-46"><a href="#cb98-46" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb98-47"><a href="#cb98-47" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb98-48"><a href="#cb98-48" aria-hidden="true" tabindex="-1"></a><span class="co">        amount : int | float</span></span>
<span id="cb98-49"><a href="#cb98-49" aria-hidden="true" tabindex="-1"></a><span class="co">            amount to pay off in dollars</span></span>
<span id="cb98-50"><a href="#cb98-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-51"><a href="#cb98-51" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb98-52"><a href="#cb98-52" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb98-53"><a href="#cb98-53" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb98-54"><a href="#cb98-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-55"><a href="#cb98-55" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb98-56"><a href="#cb98-56" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb98-57"><a href="#cb98-57" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb98-58"><a href="#cb98-58" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if 1amount` is not a positive integer</span></span>
<span id="cb98-59"><a href="#cb98-59" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb98-60"><a href="#cb98-60" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if deposit is greater than the current debt</span></span>
<span id="cb98-61"><a href="#cb98-61" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb98-62"><a href="#cb98-62" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> amount <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb98-63"><a href="#cb98-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"A deposit must be a non-negative number"</span>)</span>
<span id="cb98-64"><a href="#cb98-64" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> amount <span class="op">+</span> <span class="va">self</span>.balance <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb98-65"><a href="#cb98-65" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(</span>
<span id="cb98-66"><a href="#cb98-66" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Exceeded max deposit limit: </span><span class="sc">{0}</span><span class="st">"</span>.<span class="bu">format</span>(<span class="op">-</span><span class="dv">1</span> <span class="op">*</span> <span class="va">self</span>.balance)</span>
<span id="cb98-67"><a href="#cb98-67" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb98-68"><a href="#cb98-68" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().deposit(amount)</span>
<span id="cb98-69"><a href="#cb98-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-70"><a href="#cb98-70" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> withdraw(<span class="va">self</span>, amount):</span>
<span id="cb98-71"><a href="#cb98-71" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb98-72"><a href="#cb98-72" aria-hidden="true" tabindex="-1"></a><span class="co">        Take out a loan of credit</span></span>
<span id="cb98-73"><a href="#cb98-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-74"><a href="#cb98-74" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb98-75"><a href="#cb98-75" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb98-76"><a href="#cb98-76" aria-hidden="true" tabindex="-1"></a><span class="co">        amount : int | float</span></span>
<span id="cb98-77"><a href="#cb98-77" aria-hidden="true" tabindex="-1"></a><span class="co">            amount to loan from the account in dollars</span></span>
<span id="cb98-78"><a href="#cb98-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-79"><a href="#cb98-79" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb98-80"><a href="#cb98-80" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb98-81"><a href="#cb98-81" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb98-82"><a href="#cb98-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-83"><a href="#cb98-83" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb98-84"><a href="#cb98-84" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb98-85"><a href="#cb98-85" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb98-86"><a href="#cb98-86" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if `amount` is non-negative or the greater than</span></span>
<span id="cb98-87"><a href="#cb98-87" aria-hidden="true" tabindex="-1"></a><span class="co">            the account balance</span></span>
<span id="cb98-88"><a href="#cb98-88" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb98-89"><a href="#cb98-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> amount <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb98-90"><a href="#cb98-90" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"A withdrawal must be a non-negative number"</span>)</span>
<span id="cb98-91"><a href="#cb98-91" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.balance <span class="op">-</span> amount <span class="op">&lt;</span> <span class="op">-</span><span class="dv">1</span> <span class="op">*</span> <span class="va">self</span>.__max_withdrawal_limit:</span>
<span id="cb98-92"><a href="#cb98-92" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Cannot exceed withdrawal limit"</span>)</span>
<span id="cb98-93"><a href="#cb98-93" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().withdraw(amount)</span>
<span id="cb98-94"><a href="#cb98-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-95"><a href="#cb98-95" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> apply_interest(<span class="va">self</span>):</span>
<span id="cb98-96"><a href="#cb98-96" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb98-97"><a href="#cb98-97" aria-hidden="true" tabindex="-1"></a><span class="co">        Applies interest to any loans</span></span>
<span id="cb98-98"><a href="#cb98-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-99"><a href="#cb98-99" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb98-100"><a href="#cb98-100" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb98-101"><a href="#cb98-101" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb98-102"><a href="#cb98-102" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb98-103"><a href="#cb98-103" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().apply_interest()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>We also add a new <code>max_withdrawal_limit</code> attribute passed in via the <code>__init__</code></li>
<li>This limits how much credit can be withdrawn</li>
<li><code>deposit</code> can now only be used to pay off a line of credit
<ul>
<li>Prevents the balance going positive</li>
</ul></li>
<li><code>withdraw</code> checks that the withdrawal keeps the balance under the withdrawal limit</li>
</ul>
<p>We can then define our <code>AccountSystem</code>, this is basically the <code>FashionShop</code> renamed. However we also add a second dictionary <code>account_name_dictionary</code> which stores all the accounts where the list of accounts associated with a specific account holder is keyed by that account holder. This means we can do fast lookup both by account number (to get a specific account) or by client to get all their associated accounts. We provide two methods <code>get_account</code> which performs the id based lookup and <code>find_users_accounts</code> which finds the accounts associated with a user</p>
<div id="459bac10" class="cell" data-execution_count="55">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exercise 11.1b Account System</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Provides a class for managing and storing collections of accounts</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AccountSystem:</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the account management system of a bank</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a><span class="co">        Create a new `AccountSystem` instance</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__account_dictionary <span class="op">=</span> {}</span>
<span id="cb99-18"><a href="#cb99-18" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__account_name_dictionary <span class="op">=</span> {}</span>
<span id="cb99-19"><a href="#cb99-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-20"><a href="#cb99-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb99-21"><a href="#cb99-21" aria-hidden="true" tabindex="-1"></a>        print_string <span class="op">=</span> <span class="st">""</span></span>
<span id="cb99-22"><a href="#cb99-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> holder, accounts <span class="kw">in</span> <span class="va">self</span>.__account_name_dictionary.items():</span>
<span id="cb99-23"><a href="#cb99-23" aria-hidden="true" tabindex="-1"></a>            print_string <span class="op">+=</span> <span class="st">"Client: "</span> <span class="op">+</span> <span class="bu">str</span>(holder) <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb99-24"><a href="#cb99-24" aria-hidden="true" tabindex="-1"></a>            account_list <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(<span class="bu">map</span>(<span class="bu">str</span>, accounts))</span>
<span id="cb99-25"><a href="#cb99-25" aria-hidden="true" tabindex="-1"></a>            print_string <span class="op">+=</span> account_list <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span></span>
<span id="cb99-26"><a href="#cb99-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> print_string</span>
<span id="cb99-27"><a href="#cb99-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-28"><a href="#cb99-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> save(<span class="va">self</span>, filename):</span>
<span id="cb99-29"><a href="#cb99-29" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb99-30"><a href="#cb99-30" aria-hidden="true" tabindex="-1"></a><span class="co">        Save the `AccountSystem` to a given file</span></span>
<span id="cb99-31"><a href="#cb99-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-32"><a href="#cb99-32" aria-hidden="true" tabindex="-1"></a><span class="co">        `AccountSystem` is saved as a pickled binary file in the file given</span></span>
<span id="cb99-33"><a href="#cb99-33" aria-hidden="true" tabindex="-1"></a><span class="co">        by `filename`. The file is created if it doesn't exist. If the file</span></span>
<span id="cb99-34"><a href="#cb99-34" aria-hidden="true" tabindex="-1"></a><span class="co">        already exists it is overwritten</span></span>
<span id="cb99-35"><a href="#cb99-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-36"><a href="#cb99-36" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb99-37"><a href="#cb99-37" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb99-38"><a href="#cb99-38" aria-hidden="true" tabindex="-1"></a><span class="co">        filename : str</span></span>
<span id="cb99-39"><a href="#cb99-39" aria-hidden="true" tabindex="-1"></a><span class="co">            path to the file to save</span></span>
<span id="cb99-40"><a href="#cb99-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-41"><a href="#cb99-41" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb99-42"><a href="#cb99-42" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb99-43"><a href="#cb99-43" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb99-44"><a href="#cb99-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-45"><a href="#cb99-45" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb99-46"><a href="#cb99-46" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb99-47"><a href="#cb99-47" aria-hidden="true" tabindex="-1"></a><span class="co">        Exceptions</span></span>
<span id="cb99-48"><a href="#cb99-48" aria-hidden="true" tabindex="-1"></a><span class="co">            raised if the file fails to save</span></span>
<span id="cb99-49"><a href="#cb99-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-50"><a href="#cb99-50" aria-hidden="true" tabindex="-1"></a><span class="co">        See Also</span></span>
<span id="cb99-51"><a href="#cb99-51" aria-hidden="true" tabindex="-1"></a><span class="co">        --------</span></span>
<span id="cb99-52"><a href="#cb99-52" aria-hidden="true" tabindex="-1"></a><span class="co">        AccountSystem.load : load a `AccountSystem` object from a file</span></span>
<span id="cb99-53"><a href="#cb99-53" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb99-54"><a href="#cb99-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">"wb"</span>) <span class="im">as</span> output_file:</span>
<span id="cb99-55"><a href="#cb99-55" aria-hidden="true" tabindex="-1"></a>            pickle.dump(<span class="va">self</span>, output_file)</span>
<span id="cb99-56"><a href="#cb99-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-57"><a href="#cb99-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb99-58"><a href="#cb99-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> load(filename):</span>
<span id="cb99-59"><a href="#cb99-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb99-60"><a href="#cb99-60" aria-hidden="true" tabindex="-1"></a><span class="co">        Create an `AccountSystem` instance from a pickled binary file</span></span>
<span id="cb99-61"><a href="#cb99-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-62"><a href="#cb99-62" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb99-63"><a href="#cb99-63" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb99-64"><a href="#cb99-64" aria-hidden="true" tabindex="-1"></a><span class="co">        filename : str</span></span>
<span id="cb99-65"><a href="#cb99-65" aria-hidden="true" tabindex="-1"></a><span class="co">            path to a file containing pickled `FashionShop` data</span></span>
<span id="cb99-66"><a href="#cb99-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-67"><a href="#cb99-67" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb99-68"><a href="#cb99-68" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb99-69"><a href="#cb99-69" aria-hidden="true" tabindex="-1"></a><span class="co">        AccountSystem</span></span>
<span id="cb99-70"><a href="#cb99-70" aria-hidden="true" tabindex="-1"></a><span class="co">            the loaded `AccountSystem` instance</span></span>
<span id="cb99-71"><a href="#cb99-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-72"><a href="#cb99-72" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb99-73"><a href="#cb99-73" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb99-74"><a href="#cb99-74" aria-hidden="true" tabindex="-1"></a><span class="co">        Exceptions</span></span>
<span id="cb99-75"><a href="#cb99-75" aria-hidden="true" tabindex="-1"></a><span class="co">            raised if the file fails to load</span></span>
<span id="cb99-76"><a href="#cb99-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-77"><a href="#cb99-77" aria-hidden="true" tabindex="-1"></a><span class="co">        See Also</span></span>
<span id="cb99-78"><a href="#cb99-78" aria-hidden="true" tabindex="-1"></a><span class="co">        --------</span></span>
<span id="cb99-79"><a href="#cb99-79" aria-hidden="true" tabindex="-1"></a><span class="co">        AccountSystem.save : saves an `AccountSystem` instance</span></span>
<span id="cb99-80"><a href="#cb99-80" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb99-81"><a href="#cb99-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(filename, <span class="st">"rb"</span>) <span class="im">as</span> input_file:</span>
<span id="cb99-82"><a href="#cb99-82" aria-hidden="true" tabindex="-1"></a>            accounts <span class="op">=</span> pickle.load(input_file)</span>
<span id="cb99-83"><a href="#cb99-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> accounts</span>
<span id="cb99-84"><a href="#cb99-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-85"><a href="#cb99-85" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> add_new_account(<span class="va">self</span>, account):</span>
<span id="cb99-86"><a href="#cb99-86" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb99-87"><a href="#cb99-87" aria-hidden="true" tabindex="-1"></a><span class="co">        Store a new account in the reference system</span></span>
<span id="cb99-88"><a href="#cb99-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-89"><a href="#cb99-89" aria-hidden="true" tabindex="-1"></a><span class="co">        The provided `account` can be indexed by it's `account_number` parameter</span></span>
<span id="cb99-90"><a href="#cb99-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-91"><a href="#cb99-91" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb99-92"><a href="#cb99-92" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb99-93"><a href="#cb99-93" aria-hidden="true" tabindex="-1"></a><span class="co">        account : Account</span></span>
<span id="cb99-94"><a href="#cb99-94" aria-hidden="true" tabindex="-1"></a><span class="co">            account to add to the inventory system</span></span>
<span id="cb99-95"><a href="#cb99-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-96"><a href="#cb99-96" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb99-97"><a href="#cb99-97" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb99-98"><a href="#cb99-98" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb99-99"><a href="#cb99-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-100"><a href="#cb99-100" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb99-101"><a href="#cb99-101" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb99-102"><a href="#cb99-102" aria-hidden="true" tabindex="-1"></a><span class="co">        KeyError</span></span>
<span id="cb99-103"><a href="#cb99-103" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if the accounts's `account_number` is already registered as a key</span></span>
<span id="cb99-104"><a href="#cb99-104" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb99-105"><a href="#cb99-105" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account.account_number <span class="kw">in</span> <span class="va">self</span>.__account_dictionary:</span>
<span id="cb99-106"><a href="#cb99-106" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">KeyError</span>(<span class="st">"This account number is already in use"</span>)</span>
<span id="cb99-107"><a href="#cb99-107" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__account_dictionary[account.account_number] <span class="op">=</span> account</span>
<span id="cb99-108"><a href="#cb99-108" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account.account_holder <span class="kw">in</span> <span class="va">self</span>.__account_name_dictionary:</span>
<span id="cb99-109"><a href="#cb99-109" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.__account_name_dictionary[account.account_holder].append(account)</span>
<span id="cb99-110"><a href="#cb99-110" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb99-111"><a href="#cb99-111" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.__account_name_dictionary[account.account_holder] <span class="op">=</span> [account]</span>
<span id="cb99-112"><a href="#cb99-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-113"><a href="#cb99-113" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_account(<span class="va">self</span>, account_number):</span>
<span id="cb99-114"><a href="#cb99-114" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb99-115"><a href="#cb99-115" aria-hidden="true" tabindex="-1"></a><span class="co">        Get the account with the corresponding account number</span></span>
<span id="cb99-116"><a href="#cb99-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-117"><a href="#cb99-117" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb99-118"><a href="#cb99-118" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb99-119"><a href="#cb99-119" aria-hidden="true" tabindex="-1"></a><span class="co">        account_number : str</span></span>
<span id="cb99-120"><a href="#cb99-120" aria-hidden="true" tabindex="-1"></a><span class="co">            account_number of the account to find</span></span>
<span id="cb99-121"><a href="#cb99-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-122"><a href="#cb99-122" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb99-123"><a href="#cb99-123" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb99-124"><a href="#cb99-124" aria-hidden="true" tabindex="-1"></a><span class="co">        Account | None</span></span>
<span id="cb99-125"><a href="#cb99-125" aria-hidden="true" tabindex="-1"></a><span class="co">            Returns an `Account` with a matching `account_number` if it exists, else `None`</span></span>
<span id="cb99-126"><a href="#cb99-126" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb99-127"><a href="#cb99-127" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__account_dictionary.get(account_number)</span>
<span id="cb99-128"><a href="#cb99-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-129"><a href="#cb99-129" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> find_users_accounts(<span class="va">self</span>, name):</span>
<span id="cb99-130"><a href="#cb99-130" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb99-131"><a href="#cb99-131" aria-hidden="true" tabindex="-1"></a><span class="co">        Find the accounts associated with a given user</span></span>
<span id="cb99-132"><a href="#cb99-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-133"><a href="#cb99-133" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb99-134"><a href="#cb99-134" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb99-135"><a href="#cb99-135" aria-hidden="true" tabindex="-1"></a><span class="co">        name : str</span></span>
<span id="cb99-136"><a href="#cb99-136" aria-hidden="true" tabindex="-1"></a><span class="co">            account holder to search for</span></span>
<span id="cb99-137"><a href="#cb99-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-138"><a href="#cb99-138" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb99-139"><a href="#cb99-139" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb99-140"><a href="#cb99-140" aria-hidden="true" tabindex="-1"></a><span class="co">        List[Account]</span></span>
<span id="cb99-141"><a href="#cb99-141" aria-hidden="true" tabindex="-1"></a><span class="co">            list of accounts held by the given name, if there are no matches the list is empty</span></span>
<span id="cb99-142"><a href="#cb99-142" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb99-143"><a href="#cb99-143" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> name.strip().lower()</span>
<span id="cb99-144"><a href="#cb99-144" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb99-145"><a href="#cb99-145" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">self</span>.__account_name_dictionary[name]</span>
<span id="cb99-146"><a href="#cb99-146" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">KeyError</span>:</span>
<span id="cb99-147"><a href="#cb99-147" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> []</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Below demonstrates how the code works</p>
<div id="5b5e229c" class="cell" data-execution_count="56">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test Savings Account</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>new_saving <span class="op">=</span> SavingsAccount(<span class="dv">1</span>, <span class="st">"Alice"</span>, <span class="fl">0.003</span>)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>new_saving.deposit(<span class="dv">100</span>)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>new_saving.withdraw(<span class="dv">50</span>)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>new_saving.apply_interest()</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Test long-term savings</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>new_long_term <span class="op">=</span> LongTermSavingsAccount(<span class="dv">2</span>, <span class="st">"Alice"</span>, <span class="fl">0.012</span>, <span class="dv">26</span>)</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>new_long_term.deposit(<span class="dv">100</span>)</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>new_long_term.apply_interest()</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Test Credit</span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>new_credit <span class="op">=</span> CreditAccount(<span class="dv">3</span>, <span class="st">"Bob"</span>, <span class="fl">0.08</span>, <span class="dv">1000</span>)</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>new_credit.withdraw(<span class="dv">500</span>)</span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>new_credit.apply_interest()</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>account_system <span class="op">=</span> AccountSystem()</span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>account_system.add_new_account(new_saving)</span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a>account_system.add_new_account(new_long_term)</span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>account_system.add_new_account(new_credit)</span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Getting the account with a specific id"</span>)</span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(account_system.get_account(<span class="dv">1</span>))</span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Getting all accounts associated with a specific client"</span>)</span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(account_system.find_users_accounts(<span class="st">"felix"</span>))</span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Printing the entire system"</span>)</span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(account_system)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Getting the account with a specific id
==Savings Account==
Account Number: 1
Account Holder: alice
Interest Rate: 0.003
Balance: $50.15
Getting all accounts associated with a specific client
[]
Printing the entire system
Client: alice
==Savings Account==
Account Number: 1
Account Holder: alice
Interest Rate: 0.003
Balance: $50.15
==Long Term Savings Account==
Account Number: 2
Account Holder: alice
Interest Rate: 0.012
Balance: $101.2
Term Period: 26 weeks
Start Date: 2026-01-27
Maturation Date: 2026-07-28
Has matured? False
Client: bob
==Credit Account==
Account Number: 3
Account Holder: bob
Interest Rate: 0.08
Balance owed: -$540.0
Maximum Withdrawal Limit: 1000
</code></pre>
</div>
</div>
</section>
</section>
<section id="create-a-user-interface-class" class="level3">
<h3 class="anchored" data-anchor-id="create-a-user-interface-class">Create a User Interface Class</h3>
<ul>
<li><p>We now have our data items (<code>StockItem</code>) and how container for managing them <code>FashionShop</code></p></li>
<li><p>The last step is to provide a component that handles the user interface</p></li>
<li><p>We’ll create a class <code>FashionShopShellApplication</code> to handle the UI</p></li>
<li><p>The class should</p>
<ol type="1">
<li>Initialise the application, by loading from a file (or creating a new instance if this fails)</li>
<li>Display the menu to the user</li>
</ol></li>
<li><p>This class provides a text-based interface</p></li>
<li><p>In future we may swap this for a graphical interface</p></li>
</ul>
<section id="initialise-the-user-interface" class="level4">
<h4 class="anchored" data-anchor-id="initialise-the-user-interface">Initialise the User Interface</h4>
<ul>
<li><p>We’ll define our <code>__init__</code> method to try and load from a file</p></li>
<li><p>If the load fails we then pass an empty instance</p></li>
<li><p>We use an internal <code>__shop</code> attribute to store the inventory management component</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>  <span class="im">import</span> FashionShop</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> FashionShopApplication:</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, filename):</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co">          Creates a new `FashionShopApplication`</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co">          Attempts to load a `FashionShop` from the provided file. Otherwise</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co">          an empty instance is created</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a><span class="co">          filename : str</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a><span class="co">              path to a file containing pickled `FashionShop` data</span></span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a><span class="co">          See Also</span></span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a><span class="co">          --------</span></span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a><span class="co">          FashionShop : Main class for handling inventory management</span></span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a>          FashionShopApplication.__filename <span class="op">=</span> filename</span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a>          <span class="cf">try</span>:</span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.__shop <span class="op">=</span> FashionShop.FashionShop.load(filename)</span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a>          <span class="cf">except</span>:  <span class="co"># noqa: E722</span></span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"Failed to load Fashion Shop"</span>)</span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"Creating an empty Fashion Shop"</span>)</span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.__shop <span class="op">=</span> FashionShop.FashionShop()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We might then declare our <code>FashionShopApplication</code> as follows</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>  ui <span class="op">=</span> FashionShopApplication(<span class="st">"fashionshop.pickle"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="implementing-the-user-menu" class="level4">
<h4 class="anchored" data-anchor-id="implementing-the-user-menu">Implementing the User Menu</h4>
<ul>
<li><p>The next step is to implement our standard looping menu</p></li>
<li><p>We’ll implement this as a method</p></li>
<li><p>Each option will then correspond to another method defined on the <code>FashionShopApplication</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> main_menu(<span class="va">self</span>):</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Provides a looping main menu. Users are able to</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co">      1. Create a new item</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="co">      2. add stock to an existing item</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="co">      3. sell stock</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="co">      4. show a stock report</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="co">      5. exit</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a><span class="co">      Raises</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a><span class="co">      ------</span></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a><span class="co">      ValueError</span></span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a><span class="co">          Raised if an invalid command is received. Should not arise in</span></span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a><span class="co">          production. Report if encountered</span></span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a>      prompt <span class="op">=</span> <span class="st">"""Fashion Shop Inventory Management</span></span>
<span id="cb104-23"><a href="#cb104-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-24"><a href="#cb104-24" aria-hidden="true" tabindex="-1"></a><span class="st">1. Create a New Stock Item</span></span>
<span id="cb104-25"><a href="#cb104-25" aria-hidden="true" tabindex="-1"></a><span class="st">2. Add Stock to an Existing Item</span></span>
<span id="cb104-26"><a href="#cb104-26" aria-hidden="true" tabindex="-1"></a><span class="st">3. Sell Stock</span></span>
<span id="cb104-27"><a href="#cb104-27" aria-hidden="true" tabindex="-1"></a><span class="st">4. Stock Report</span></span>
<span id="cb104-28"><a href="#cb104-28" aria-hidden="true" tabindex="-1"></a><span class="st">5. Exit</span></span>
<span id="cb104-29"><a href="#cb104-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-30"><a href="#cb104-30" aria-hidden="true" tabindex="-1"></a><span class="st">Enter your command: """</span></span>
<span id="cb104-31"><a href="#cb104-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-32"><a href="#cb104-32" aria-hidden="true" tabindex="-1"></a>      <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb104-33"><a href="#cb104-33" aria-hidden="true" tabindex="-1"></a>          command <span class="op">=</span> BTCInput.read_int_ranged(prompt, <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb104-34"><a href="#cb104-34" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> command <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb104-35"><a href="#cb104-35" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.create_new_stock_item()</span>
<span id="cb104-36"><a href="#cb104-36" aria-hidden="true" tabindex="-1"></a>          <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb104-37"><a href="#cb104-37" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.add_stock()</span>
<span id="cb104-38"><a href="#cb104-38" aria-hidden="true" tabindex="-1"></a>          <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb104-39"><a href="#cb104-39" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.sell_stock()</span>
<span id="cb104-40"><a href="#cb104-40" aria-hidden="true" tabindex="-1"></a>          <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb104-41"><a href="#cb104-41" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.do_report()</span>
<span id="cb104-42"><a href="#cb104-42" aria-hidden="true" tabindex="-1"></a>          <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb104-43"><a href="#cb104-43" aria-hidden="true" tabindex="-1"></a>              <span class="va">self</span>.__shop.save(<span class="va">self</span>.__filename)</span>
<span id="cb104-44"><a href="#cb104-44" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"Shop data saved"</span>)</span>
<span id="cb104-45"><a href="#cb104-45" aria-hidden="true" tabindex="-1"></a>              <span class="cf">break</span></span>
<span id="cb104-46"><a href="#cb104-46" aria-hidden="true" tabindex="-1"></a>          <span class="cf">else</span>:</span>
<span id="cb104-47"><a href="#cb104-47" aria-hidden="true" tabindex="-1"></a>              <span class="cf">raise</span> <span class="pp">ValueError</span>(</span>
<span id="cb104-48"><a href="#cb104-48" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Invalid command id </span><span class="sc">{0}</span><span class="st"> encountered in main menu!"</span>.<span class="bu">format</span>(command)</span>
<span id="cb104-49"><a href="#cb104-49" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>This follows the same structure of all our previous menu setups</p></li>
<li><p>The only difference is this time it’s been wrapped in a class</p></li>
<li><p>Starting the program looks like,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>  ui <span class="op">=</span> FashionShopApplication(<span class="st">"fashionshop.pickle"</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  ui.main_menu()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
<section id="implement-the-user-interface-behaviours" class="level4">
<h4 class="anchored" data-anchor-id="implement-the-user-interface-behaviours">Implement the User Interface Behaviours</h4>
<ul>
<li><p>Now we need to implement the menu options</p></li>
<li><p>We already partially implemented these before (see <a href="#implement-application-behaviours">Implement Application Behaviours</a>) we just need to reimplement them as part of the class, or provide a connection</p></li>
<li><p>For example, we write a <code>sell_stock</code> wrapper as below,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> sell_stock(<span class="va">self</span>):</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Sell Stock"</span>)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>      item <span class="op">=</span> <span class="va">self</span>.__shop.find_stock_item(</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>          BTCInput.read_text(<span class="st">"Enter the stock reference: "</span>)</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> item <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Item not found"</span>)</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Selling"</span>)</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(item)</span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>      number_sold <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>          <span class="st">"How many to sell? (0 to abandon) - </span><span class="sc">{0}</span><span class="st"> in current stock: "</span>.<span class="bu">format</span>(</span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>              item.stock_level</span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a>          min_value<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>          max_value<span class="op">=</span>item.stock_level,</span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="kw">not</span> number_sold:</span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Sell item cancelled"</span>)</span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span></span>
<span id="cb106-24"><a href="#cb106-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-25"><a href="#cb106-25" aria-hidden="true" tabindex="-1"></a>      item.sell_stock(number_sold)</span>
<span id="cb106-26"><a href="#cb106-26" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Items sold"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>This walks through the sales process</p></li>
<li><p>First the user is prompted for a reference to get an item</p></li>
<li><p>Then the user is prompted for an amount to sell</p></li>
<li><p>We use the <code>read_input_ranged</code> to ensure the provided number is valid</p></li>
<li><p>Once validated we then forward to the item’s <code>sell_stock</code> method</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You will spend a lot of time writing code to deal with failure</strong></p>
<p>The <code>sell_stock</code> method does the following,</p>
<ol type="1">
<li>It handles invalid stock references</li>
<li>It ensures that we do not sell more inventory than we hold</li>
<li>It provides the user a way to back out of a sale</li>
</ol>
<p>The actual “happy path” code, i.e.&nbsp;the code that is followed when everything works fine is a very small part of the entire function. Multiply this across all the functions and the majority of the code is probably taken up with input validation and handling failure cases.</p>
</div>
</div>
<ul>
<li>A complete working version of the code is found in <a href="./Examples/11_FashionShopApplication">11_FashionShopApplication</a></li>
<li>We’ve split the classes into their own files for readability purposes</li>
<li>The program can be run by running <a href="./Examples/11_FashionShopApplication/FashionShopApplication.py">FashionShopApplication.py</a></li>
</ul>
</section>
<section id="exercise-completing-the-banking-application" class="level4">
<h4 class="anchored" data-anchor-id="exercise-completing-the-banking-application">Exercise: Completing the Banking Application</h4>
<p><em>Implement a banking application wrapper class to complete the <a href="#exercise-create-a-banking-application">Bank Account</a> system created earlier. This class should work like <code>FashionShopApplication</code> attempting to load from a file, then providing a looping menu. The user should be able to,</em></p>
<ol type="1">
<li><em>Create a new account</em></li>
<li><em>Deposit into an account</em></li>
<li><em>Withdraw from an account</em></li>
<li><em>View an account</em></li>
<li><em>View all their accounts</em></li>
<li><em>Manage a matured long term savings account</em></li>
<li><em>Apply interest to all accounts</em></li>
</ol>
<p>We first start by templating out our <code>BankApplication</code> class using a similar framework to the FashionShop application</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BankAccountApplication:</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Provides a text-based interface for Bank Account Management</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, filename):</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Creates a new `BankAccountApplication`</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Attempts to load an existing application from the provided file.</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a><span class="co">        Otherwise an empty instance is created</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a><span class="co">        filename : str</span></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a><span class="co">            path to a file containing pickled `AccountSystem` data</span></span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a><span class="co">        See Also</span></span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a><span class="co">        --------</span></span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a><span class="co">        AccountSystem : Main class for handling bank accounts</span></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb107-22"><a href="#cb107-22" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__filename <span class="op">=</span> filename</span>
<span id="cb107-23"><a href="#cb107-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb107-24"><a href="#cb107-24" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.__accounts <span class="op">=</span> AccountSystem.AccountSystem.load(filename)</span>
<span id="cb107-25"><a href="#cb107-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:  <span class="co"># noqa: E722</span></span>
<span id="cb107-26"><a href="#cb107-26" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Failed to load accounts"</span>)</span>
<span id="cb107-27"><a href="#cb107-27" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Creating an empty instance"</span>)</span>
<span id="cb107-28"><a href="#cb107-28" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.__accounts <span class="op">=</span> AccountSystem.AccountSystem()</span>
<span id="cb107-29"><a href="#cb107-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-30"><a href="#cb107-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> main_menu(<span class="va">self</span>):</span>
<span id="cb107-31"><a href="#cb107-31" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb107-32"><a href="#cb107-32" aria-hidden="true" tabindex="-1"></a><span class="co">        Provides a looping main menu</span></span>
<span id="cb107-33"><a href="#cb107-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-34"><a href="#cb107-34" aria-hidden="true" tabindex="-1"></a><span class="co">        Users are able to</span></span>
<span id="cb107-35"><a href="#cb107-35" aria-hidden="true" tabindex="-1"></a><span class="co">        1. Create a new account</span></span>
<span id="cb107-36"><a href="#cb107-36" aria-hidden="true" tabindex="-1"></a><span class="co">        2. Deposit into an account</span></span>
<span id="cb107-37"><a href="#cb107-37" aria-hidden="true" tabindex="-1"></a><span class="co">        3. Withdraw from an account</span></span>
<span id="cb107-38"><a href="#cb107-38" aria-hidden="true" tabindex="-1"></a><span class="co">        4. View an account</span></span>
<span id="cb107-39"><a href="#cb107-39" aria-hidden="true" tabindex="-1"></a><span class="co">        5. View all accounts associated with a name</span></span>
<span id="cb107-40"><a href="#cb107-40" aria-hidden="true" tabindex="-1"></a><span class="co">        6. Manage a matured long term savings account</span></span>
<span id="cb107-41"><a href="#cb107-41" aria-hidden="true" tabindex="-1"></a><span class="co">        7. Apply interest to all accounts</span></span>
<span id="cb107-42"><a href="#cb107-42" aria-hidden="true" tabindex="-1"></a><span class="co">        8. Exit</span></span>
<span id="cb107-43"><a href="#cb107-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-44"><a href="#cb107-44" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb107-45"><a href="#cb107-45" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb107-46"><a href="#cb107-46" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb107-47"><a href="#cb107-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-48"><a href="#cb107-48" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb107-49"><a href="#cb107-49" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb107-50"><a href="#cb107-50" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb107-51"><a href="#cb107-51" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if an invalid command is received. Should not arise in</span></span>
<span id="cb107-52"><a href="#cb107-52" aria-hidden="true" tabindex="-1"></a><span class="co">            production. Report if encountered</span></span>
<span id="cb107-53"><a href="#cb107-53" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb107-54"><a href="#cb107-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-55"><a href="#cb107-55" aria-hidden="true" tabindex="-1"></a>        prompt <span class="op">=</span> <span class="st">"""Account Management System</span></span>
<span id="cb107-56"><a href="#cb107-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-57"><a href="#cb107-57" aria-hidden="true" tabindex="-1"></a><span class="st">1. Create a new account</span></span>
<span id="cb107-58"><a href="#cb107-58" aria-hidden="true" tabindex="-1"></a><span class="st">2. Deposit into an account</span></span>
<span id="cb107-59"><a href="#cb107-59" aria-hidden="true" tabindex="-1"></a><span class="st">3. Withdraw from an account</span></span>
<span id="cb107-60"><a href="#cb107-60" aria-hidden="true" tabindex="-1"></a><span class="st">4. View an account</span></span>
<span id="cb107-61"><a href="#cb107-61" aria-hidden="true" tabindex="-1"></a><span class="st">5. View all accounts associated with a name</span></span>
<span id="cb107-62"><a href="#cb107-62" aria-hidden="true" tabindex="-1"></a><span class="st">6. Manage a matured long term savings account</span></span>
<span id="cb107-63"><a href="#cb107-63" aria-hidden="true" tabindex="-1"></a><span class="st">7. Apply interest to all accounts</span></span>
<span id="cb107-64"><a href="#cb107-64" aria-hidden="true" tabindex="-1"></a><span class="st">8. Exit</span></span>
<span id="cb107-65"><a href="#cb107-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-66"><a href="#cb107-66" aria-hidden="true" tabindex="-1"></a><span class="st">Enter your command: """</span></span>
<span id="cb107-67"><a href="#cb107-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-68"><a href="#cb107-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb107-69"><a href="#cb107-69" aria-hidden="true" tabindex="-1"></a>            command <span class="op">=</span> BTCInput.read_int_ranged(prompt, <span class="dv">1</span>, <span class="dv">8</span>)</span>
<span id="cb107-70"><a href="#cb107-70" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> command <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb107-71"><a href="#cb107-71" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.create_new_account()</span>
<span id="cb107-72"><a href="#cb107-72" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb107-73"><a href="#cb107-73" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.deposit_into_account()</span>
<span id="cb107-74"><a href="#cb107-74" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb107-75"><a href="#cb107-75" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.withdraw_from_account()</span>
<span id="cb107-76"><a href="#cb107-76" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb107-77"><a href="#cb107-77" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.view_account()</span>
<span id="cb107-78"><a href="#cb107-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb107-79"><a href="#cb107-79" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.view_accounts_for_name()</span>
<span id="cb107-80"><a href="#cb107-80" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">6</span>:</span>
<span id="cb107-81"><a href="#cb107-81" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.manage_matured_long_term_savings()</span>
<span id="cb107-82"><a href="#cb107-82" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">7</span>:</span>
<span id="cb107-83"><a href="#cb107-83" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.__accounts.apply_interest()</span>
<span id="cb107-84"><a href="#cb107-84" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">8</span>:</span>
<span id="cb107-85"><a href="#cb107-85" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.__accounts.save(<span class="va">self</span>.__filename)</span>
<span id="cb107-86"><a href="#cb107-86" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">"Accounts saved"</span>)</span>
<span id="cb107-87"><a href="#cb107-87" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb107-88"><a href="#cb107-88" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb107-89"><a href="#cb107-89" aria-hidden="true" tabindex="-1"></a>                <span class="cf">raise</span> <span class="pp">ValueError</span>(</span>
<span id="cb107-90"><a href="#cb107-90" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Invalid command id </span><span class="sc">{0}</span><span class="st"> encountered in main menu! Please report!"</span>.<span class="bu">format</span>(</span>
<span id="cb107-91"><a href="#cb107-91" aria-hidden="true" tabindex="-1"></a>                        command</span>
<span id="cb107-92"><a href="#cb107-92" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb107-93"><a href="#cb107-93" aria-hidden="true" tabindex="-1"></a>                )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The <code>__init__</code> is simple as it first tries to load the accounts from a given file (storing this filename for later saving), else creating an empty <code>AccountSystem</code> if one is not found.</p>
<p>The menu also uses our standard numeric interface. Now we need to start implementing our methods. The most complicated for us being creating a new account. To start with we know that all accounts have an interest rate. Depending on if we are viewing this program as something that a bank owner would use to manage their internal system, or something that the a client uses we might want to implement this differently.</p>
<p>One question is around the interest rate we apply to accounts. If this was client facing. We probably don’t want them specifying their own interest rate. So instead the application provides some logic to determine the interest rate to apply to a new account. This is done by using class variables to define interest rates for <code>SavingsAccounts</code> and <code>CreditAccounts</code>. We then also provide a static method that calculates the interest rate for a long-term savings account based on the principle that the longer the term is the higher the interest.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> BankAccountApplication:</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Provides a text-based interface for Bank Account Management</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Class Attributes</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------------</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a><span class="co">    savings_account_interest : float</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co">        current interest rate on newly opened savings accounts</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="co">    credit_account_interest : float</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="co">        current interest rate on newly opened credit accounts</span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>    savings_account_interest <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a>    credit_account_interest <span class="op">=</span> <span class="fl">0.10</span></span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb108-17"><a href="#cb108-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> calculate_long_term_interest(term_limit):</span>
<span id="cb108-18"><a href="#cb108-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb108-19"><a href="#cb108-19" aria-hidden="true" tabindex="-1"></a><span class="co">        Calculates the bonus interest assigned to a long term savings account</span></span>
<span id="cb108-20"><a href="#cb108-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-21"><a href="#cb108-21" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb108-22"><a href="#cb108-22" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb108-23"><a href="#cb108-23" aria-hidden="true" tabindex="-1"></a><span class="co">        term_limit : int</span></span>
<span id="cb108-24"><a href="#cb108-24" aria-hidden="true" tabindex="-1"></a><span class="co">            proposed term limit in weeks</span></span>
<span id="cb108-25"><a href="#cb108-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-26"><a href="#cb108-26" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb108-27"><a href="#cb108-27" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb108-28"><a href="#cb108-28" aria-hidden="true" tabindex="-1"></a><span class="co">        float</span></span>
<span id="cb108-29"><a href="#cb108-29" aria-hidden="true" tabindex="-1"></a><span class="co">            interest rate for a long-term savings account</span></span>
<span id="cb108-30"><a href="#cb108-30" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb108-31"><a href="#cb108-31" aria-hidden="true" tabindex="-1"></a>        term_contribution <span class="op">=</span> (</span>
<span id="cb108-32"><a href="#cb108-32" aria-hidden="true" tabindex="-1"></a>            term_limit <span class="op">/</span> Account.LongTermSavingsAccount.max_term_limit <span class="op">*</span> (<span class="fl">0.1</span>)</span>
<span id="cb108-33"><a href="#cb108-33" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb108-34"><a href="#cb108-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> BankAccountApplication.savings_account_interest <span class="op">+</span> term_contribution</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Similarly here, we don’t want a client to be able to put an arbitrary term limit in. So we’ll add class variables to the <code>LongTermSavingsAccount</code> for the min and max term limits, and provide a static validation method.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> LongTermSavingsAccount(SavingsAccount):</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents a long term savings account</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="co">    An account in which money cannot be withdrawn before the term limit expires.</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co">    After the term limit has expired a reduced interest rate is applied.</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Class Attributes</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------------</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="co">    min_term_limit: int</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co">        minimum term limit in weeks</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="co">    max_term_limit: int</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="co">        maximum term limit in weeks</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="co">    SavingsAccount : Parent class</span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a>    min_term_limit <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a>    max_term_limit <span class="op">=</span> <span class="dv">156</span></span>
<span id="cb109-22"><a href="#cb109-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-23"><a href="#cb109-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb109-24"><a href="#cb109-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> validate_term_limit(term_limit):</span>
<span id="cb109-25"><a href="#cb109-25" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb109-26"><a href="#cb109-26" aria-hidden="true" tabindex="-1"></a><span class="co">        Validates a proposed term limit</span></span>
<span id="cb109-27"><a href="#cb109-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-28"><a href="#cb109-28" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb109-29"><a href="#cb109-29" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb109-30"><a href="#cb109-30" aria-hidden="true" tabindex="-1"></a><span class="co">        term_limit : int</span></span>
<span id="cb109-31"><a href="#cb109-31" aria-hidden="true" tabindex="-1"></a><span class="co">            proposed term limit in weeks</span></span>
<span id="cb109-32"><a href="#cb109-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-33"><a href="#cb109-33" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb109-34"><a href="#cb109-34" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb109-35"><a href="#cb109-35" aria-hidden="true" tabindex="-1"></a><span class="co">        bool</span></span>
<span id="cb109-36"><a href="#cb109-36" aria-hidden="true" tabindex="-1"></a><span class="co">            `True` if the proposed term limit is valid, else `False`</span></span>
<span id="cb109-37"><a href="#cb109-37" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb109-38"><a href="#cb109-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (</span>
<span id="cb109-39"><a href="#cb109-39" aria-hidden="true" tabindex="-1"></a>            LongTermSavingsAccount.min_term_limit</span>
<span id="cb109-40"><a href="#cb109-40" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;=</span> term_limit</span>
<span id="cb109-41"><a href="#cb109-41" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;=</span> LongTermSavingsAccount.max_term_limit</span>
<span id="cb109-42"><a href="#cb109-42" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Now we can move on to implementing our account creation function. Here the user has to specify the account type to create. Then they are prompted to provide an account holder. The next bit of fun we introduce is to have the user’s account number then be randomly generated. We’ll make the account number a 4 character alphanumeric string. (We keep it small to make it easy to demo)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> create_new_account(<span class="va">self</span>):</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="co">        Create a new account and add it to the system</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co">        Prompts the user for the type of account to create and</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="co">        the necessary descriptors of the item. The account is</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="co">        then added to the system</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a><span class="co">        Raises</span></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="co">        ------</span></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a><span class="co">        ValueError</span></span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a><span class="co">            Raised if an invalid account type id is encountered.</span></span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a><span class="co">            Should not arise in production, please report if found.</span></span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>        menu <span class="op">=</span> <span class="st">"""Create New Account</span></span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a><span class="st">1. Savings Account</span></span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a><span class="st">2. Long Term Savings Account</span></span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true" tabindex="-1"></a><span class="st">3. Credit Account</span></span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true" tabindex="-1"></a><span class="st">Enter account type: """</span></span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-27"><a href="#cb110-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> generate_account_number():</span>
<span id="cb110-28"><a href="#cb110-28" aria-hidden="true" tabindex="-1"></a>            <span class="co">"""</span></span>
<span id="cb110-29"><a href="#cb110-29" aria-hidden="true" tabindex="-1"></a><span class="co">            Generates an account number</span></span>
<span id="cb110-30"><a href="#cb110-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-31"><a href="#cb110-31" aria-hidden="true" tabindex="-1"></a><span class="co">            The generated account number is a 16 character random</span></span>
<span id="cb110-32"><a href="#cb110-32" aria-hidden="true" tabindex="-1"></a><span class="co">            alphanumeric string</span></span>
<span id="cb110-33"><a href="#cb110-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-34"><a href="#cb110-34" aria-hidden="true" tabindex="-1"></a><span class="co">            Returns</span></span>
<span id="cb110-35"><a href="#cb110-35" aria-hidden="true" tabindex="-1"></a><span class="co">            -------</span></span>
<span id="cb110-36"><a href="#cb110-36" aria-hidden="true" tabindex="-1"></a><span class="co">            str</span></span>
<span id="cb110-37"><a href="#cb110-37" aria-hidden="true" tabindex="-1"></a><span class="co">                string representing a valid account number</span></span>
<span id="cb110-38"><a href="#cb110-38" aria-hidden="true" tabindex="-1"></a><span class="co">            """</span></span>
<span id="cb110-39"><a href="#cb110-39" aria-hidden="true" tabindex="-1"></a>            account_number_string_length <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb110-40"><a href="#cb110-40" aria-hidden="true" tabindex="-1"></a>            account_number_string_tuple <span class="op">=</span> (</span>
<span id="cb110-41"><a href="#cb110-41" aria-hidden="true" tabindex="-1"></a>                <span class="st">"A"</span>,</span>
<span id="cb110-42"><a href="#cb110-42" aria-hidden="true" tabindex="-1"></a>                <span class="st">"B"</span>,</span>
<span id="cb110-43"><a href="#cb110-43" aria-hidden="true" tabindex="-1"></a>                <span class="st">"C"</span>,</span>
<span id="cb110-44"><a href="#cb110-44" aria-hidden="true" tabindex="-1"></a>                <span class="st">"D"</span>,</span>
<span id="cb110-45"><a href="#cb110-45" aria-hidden="true" tabindex="-1"></a>                <span class="st">"E"</span>,</span>
<span id="cb110-46"><a href="#cb110-46" aria-hidden="true" tabindex="-1"></a>                <span class="st">"F"</span>,</span>
<span id="cb110-47"><a href="#cb110-47" aria-hidden="true" tabindex="-1"></a>                <span class="st">"G"</span>,</span>
<span id="cb110-48"><a href="#cb110-48" aria-hidden="true" tabindex="-1"></a>                <span class="st">"H"</span>,</span>
<span id="cb110-49"><a href="#cb110-49" aria-hidden="true" tabindex="-1"></a>                <span class="st">"I"</span>,</span>
<span id="cb110-50"><a href="#cb110-50" aria-hidden="true" tabindex="-1"></a>                <span class="st">"J"</span>,</span>
<span id="cb110-51"><a href="#cb110-51" aria-hidden="true" tabindex="-1"></a>                <span class="st">"K"</span>,</span>
<span id="cb110-52"><a href="#cb110-52" aria-hidden="true" tabindex="-1"></a>                <span class="st">"L"</span>,</span>
<span id="cb110-53"><a href="#cb110-53" aria-hidden="true" tabindex="-1"></a>                <span class="st">"M"</span>,</span>
<span id="cb110-54"><a href="#cb110-54" aria-hidden="true" tabindex="-1"></a>                <span class="st">"N"</span>,</span>
<span id="cb110-55"><a href="#cb110-55" aria-hidden="true" tabindex="-1"></a>                <span class="st">"O"</span>,</span>
<span id="cb110-56"><a href="#cb110-56" aria-hidden="true" tabindex="-1"></a>                <span class="st">"P"</span>,</span>
<span id="cb110-57"><a href="#cb110-57" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Q"</span>,</span>
<span id="cb110-58"><a href="#cb110-58" aria-hidden="true" tabindex="-1"></a>                <span class="st">"R"</span>,</span>
<span id="cb110-59"><a href="#cb110-59" aria-hidden="true" tabindex="-1"></a>                <span class="st">"S"</span>,</span>
<span id="cb110-60"><a href="#cb110-60" aria-hidden="true" tabindex="-1"></a>                <span class="st">"T"</span>,</span>
<span id="cb110-61"><a href="#cb110-61" aria-hidden="true" tabindex="-1"></a>                <span class="st">"U"</span>,</span>
<span id="cb110-62"><a href="#cb110-62" aria-hidden="true" tabindex="-1"></a>                <span class="st">"V"</span>,</span>
<span id="cb110-63"><a href="#cb110-63" aria-hidden="true" tabindex="-1"></a>                <span class="st">"W"</span>,</span>
<span id="cb110-64"><a href="#cb110-64" aria-hidden="true" tabindex="-1"></a>                <span class="st">"X"</span>,</span>
<span id="cb110-65"><a href="#cb110-65" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Y"</span>,</span>
<span id="cb110-66"><a href="#cb110-66" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Z"</span>,</span>
<span id="cb110-67"><a href="#cb110-67" aria-hidden="true" tabindex="-1"></a>                <span class="st">"0"</span>,</span>
<span id="cb110-68"><a href="#cb110-68" aria-hidden="true" tabindex="-1"></a>                <span class="st">"1"</span>,</span>
<span id="cb110-69"><a href="#cb110-69" aria-hidden="true" tabindex="-1"></a>                <span class="st">"2"</span>,</span>
<span id="cb110-70"><a href="#cb110-70" aria-hidden="true" tabindex="-1"></a>                <span class="st">"3"</span>,</span>
<span id="cb110-71"><a href="#cb110-71" aria-hidden="true" tabindex="-1"></a>                <span class="st">"4"</span>,</span>
<span id="cb110-72"><a href="#cb110-72" aria-hidden="true" tabindex="-1"></a>                <span class="st">"5"</span>,</span>
<span id="cb110-73"><a href="#cb110-73" aria-hidden="true" tabindex="-1"></a>                <span class="st">"6"</span>,</span>
<span id="cb110-74"><a href="#cb110-74" aria-hidden="true" tabindex="-1"></a>                <span class="st">"7"</span>,</span>
<span id="cb110-75"><a href="#cb110-75" aria-hidden="true" tabindex="-1"></a>                <span class="st">"8"</span>,</span>
<span id="cb110-76"><a href="#cb110-76" aria-hidden="true" tabindex="-1"></a>                <span class="st">"9"</span>,</span>
<span id="cb110-77"><a href="#cb110-77" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb110-78"><a href="#cb110-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-79"><a href="#cb110-79" aria-hidden="true" tabindex="-1"></a>            account_number <span class="op">=</span> <span class="st">""</span>.join(</span>
<span id="cb110-80"><a href="#cb110-80" aria-hidden="true" tabindex="-1"></a>                random.choices(</span>
<span id="cb110-81"><a href="#cb110-81" aria-hidden="true" tabindex="-1"></a>                    account_number_string_tuple, k<span class="op">=</span>account_number_string_length</span>
<span id="cb110-82"><a href="#cb110-82" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb110-83"><a href="#cb110-83" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb110-84"><a href="#cb110-84" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> account_number</span>
<span id="cb110-85"><a href="#cb110-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-86"><a href="#cb110-86" aria-hidden="true" tabindex="-1"></a>        account_type <span class="op">=</span> BTCInput.read_int_ranged(menu, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb110-87"><a href="#cb110-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account_type <span class="op">&lt;</span> <span class="dv">1</span> <span class="kw">or</span> account_type <span class="op">&gt;</span> <span class="dv">3</span>:</span>
<span id="cb110-88"><a href="#cb110-88" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(</span>
<span id="cb110-89"><a href="#cb110-89" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Invalid account type id </span><span class="sc">{0}</span><span class="st"> encountered while creating account"</span>.<span class="bu">format</span>(</span>
<span id="cb110-90"><a href="#cb110-90" aria-hidden="true" tabindex="-1"></a>                    account_type</span>
<span id="cb110-91"><a href="#cb110-91" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb110-92"><a href="#cb110-92" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb110-93"><a href="#cb110-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-94"><a href="#cb110-94" aria-hidden="true" tabindex="-1"></a>        account_number <span class="op">=</span> generate_account_number()</span>
<span id="cb110-95"><a href="#cb110-95" aria-hidden="true" tabindex="-1"></a>        account_holder <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter account holder: "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You can see we define a tuple that contains the possible characters. We then use <code>random.choices</code> to select the appropriate number of characters (with replacement) where the number of characters is defined by <code>account_number_string_length</code> (so we can easily modify it). To convert from a collection to a string we use <code>"".join</code> to join the characters together, the empty string means that no extra characters are embedded.</p>
<p>Now that we’ve got the account number, the account holder and the type of account we can proceed. For a <code>SavingsAccount</code> we have all the details required to create the account. For a <code>LongTermSavingsAccount</code> we have to get the term limit, (making sure it’s valid) and for a <code>CreditAccount</code> we have to get the credit limit. Once that’s done we then add it to the <code>AccountSystem</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account_type <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Creating a savings account"</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>            account <span class="op">=</span> Account.SavingsAccount(</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>                account_number,</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>                account_holder,</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>                BankAccountApplication.savings_account_interest,</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Created a new savings account </span><span class="sc">{0}</span><span class="st">"</span>.<span class="bu">format</span>(account_number))</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> account_type <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Creating a long-term savings account"</span>)</span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>                term_limit <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Enter term limit (</span><span class="sc">{0}</span><span class="st"> - </span><span class="sc">{1}</span><span class="st">): "</span>.<span class="bu">format</span>(</span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>                        Account.LongTermSavingsAccount.min_term_limit,</span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>                        Account.LongTermSavingsAccount.max_term_limit,</span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a>                    ),</span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>                    Account.LongTermSavingsAccount.min_term_limit,</span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a>                    Account.LongTermSavingsAccount.max_term_limit,</span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb111-20"><a href="#cb111-20" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> Account.LongTermSavingsAccount.validate_term_limit(term_limit):</span>
<span id="cb111-21"><a href="#cb111-21" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">break</span></span>
<span id="cb111-22"><a href="#cb111-22" aria-hidden="true" tabindex="-1"></a>            account <span class="op">=</span> Account.LongTermSavingsAccount(</span>
<span id="cb111-23"><a href="#cb111-23" aria-hidden="true" tabindex="-1"></a>                account_number,</span>
<span id="cb111-24"><a href="#cb111-24" aria-hidden="true" tabindex="-1"></a>                account_holder,</span>
<span id="cb111-25"><a href="#cb111-25" aria-hidden="true" tabindex="-1"></a>                BankAccountApplication.calculate_long_term_interest(term_limit),</span>
<span id="cb111-26"><a href="#cb111-26" aria-hidden="true" tabindex="-1"></a>                term_limit,</span>
<span id="cb111-27"><a href="#cb111-27" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb111-28"><a href="#cb111-28" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Created a new long-term savings account </span><span class="sc">{0}</span><span class="st">"</span>.<span class="bu">format</span>(account_number))</span>
<span id="cb111-29"><a href="#cb111-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> account_type <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb111-30"><a href="#cb111-30" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Creating a  credit account"</span>)</span>
<span id="cb111-31"><a href="#cb111-31" aria-hidden="true" tabindex="-1"></a>            withdrawal_limit <span class="op">=</span> BTCInput.read_float(<span class="st">"Enter max withdrawal limit: "</span>)</span>
<span id="cb111-32"><a href="#cb111-32" aria-hidden="true" tabindex="-1"></a>            account <span class="op">=</span> Account.CreditAccount(</span>
<span id="cb111-33"><a href="#cb111-33" aria-hidden="true" tabindex="-1"></a>                account_number,</span>
<span id="cb111-34"><a href="#cb111-34" aria-hidden="true" tabindex="-1"></a>                account_holder,</span>
<span id="cb111-35"><a href="#cb111-35" aria-hidden="true" tabindex="-1"></a>                BankAccountApplication.credit_account_interest,</span>
<span id="cb111-36"><a href="#cb111-36" aria-hidden="true" tabindex="-1"></a>                withdrawal_limit,</span>
<span id="cb111-37"><a href="#cb111-37" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb111-38"><a href="#cb111-38" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Created a new credit account </span><span class="sc">{0}</span><span class="st">"</span>.<span class="bu">format</span>(account_number))</span>
<span id="cb111-39"><a href="#cb111-39" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__accounts.add_new_account(account)  <span class="co"># type: ignore</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Deposit, withdraw and view account are all implemented using similar logic. First the user is prompted for an account number, then we perform a function. We’ll extract this <code>get_account</code> behaviour into a function</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_account(<span class="va">self</span>):</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co">        Prompts the user for an account number and returns any match</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="co">        Account | None</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="co">            Account is the account number matches, else `None`</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>        account_number <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter account number: "</span>).upper().strip()</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.__accounts.get_account(account_number)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The implementations for deposit, withdraw, and view then largely just need to forward onto the appropriate message on the account, <code>deposit</code>, <code>withdraw</code> and <code>__str__</code> respectively</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> deposit_into_account(<span class="va">self</span>):</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">        Deposit into a user-prompted account</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">        User is prompted for an account, if the account exists,</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">        the user is then prompted for how much to deposit</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Deposit into account"</span>)</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>        account <span class="op">=</span> <span class="va">self</span>.get_account()</span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account not found"</span>)</span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Depositing"</span>)</span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(account)</span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a>            amount <span class="op">=</span> BTCInput.read_float(</span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Enter amount to deposit (Current balance: </span><span class="sc">{0}</span><span class="st">): "</span>.<span class="bu">format</span>(</span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a>                    account.balance</span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a>            account.deposit(amount)</span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(e)</span>
<span id="cb113-31"><a href="#cb113-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-32"><a href="#cb113-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> withdraw_from_account(<span class="va">self</span>):</span>
<span id="cb113-33"><a href="#cb113-33" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb113-34"><a href="#cb113-34" aria-hidden="true" tabindex="-1"></a><span class="co">        Withdraw from a user-prompted account</span></span>
<span id="cb113-35"><a href="#cb113-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-36"><a href="#cb113-36" aria-hidden="true" tabindex="-1"></a><span class="co">        User is prompted for an account, if the account exists,</span></span>
<span id="cb113-37"><a href="#cb113-37" aria-hidden="true" tabindex="-1"></a><span class="co">        the user is then prompted for how much to withdraw</span></span>
<span id="cb113-38"><a href="#cb113-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-39"><a href="#cb113-39" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb113-40"><a href="#cb113-40" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb113-41"><a href="#cb113-41" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb113-42"><a href="#cb113-42" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb113-43"><a href="#cb113-43" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Withdraw from account"</span>)</span>
<span id="cb113-44"><a href="#cb113-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-45"><a href="#cb113-45" aria-hidden="true" tabindex="-1"></a>        account <span class="op">=</span> <span class="va">self</span>.get_account()</span>
<span id="cb113-46"><a href="#cb113-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb113-47"><a href="#cb113-47" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account not found"</span>)</span>
<span id="cb113-48"><a href="#cb113-48" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb113-49"><a href="#cb113-49" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Withdrawing"</span>)</span>
<span id="cb113-50"><a href="#cb113-50" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(account)</span>
<span id="cb113-51"><a href="#cb113-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-52"><a href="#cb113-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb113-53"><a href="#cb113-53" aria-hidden="true" tabindex="-1"></a>            amount <span class="op">=</span> BTCInput.read_float(</span>
<span id="cb113-54"><a href="#cb113-54" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Enter amount to withdraw (Current balance: </span><span class="sc">{0}</span><span class="st">): "</span>.<span class="bu">format</span>(</span>
<span id="cb113-55"><a href="#cb113-55" aria-hidden="true" tabindex="-1"></a>                    account.balance</span>
<span id="cb113-56"><a href="#cb113-56" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb113-57"><a href="#cb113-57" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb113-58"><a href="#cb113-58" aria-hidden="true" tabindex="-1"></a>            account.withdraw(amount)</span>
<span id="cb113-59"><a href="#cb113-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb113-60"><a href="#cb113-60" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(e)</span>
<span id="cb113-61"><a href="#cb113-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-62"><a href="#cb113-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> view_account(<span class="va">self</span>):</span>
<span id="cb113-63"><a href="#cb113-63" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb113-64"><a href="#cb113-64" aria-hidden="true" tabindex="-1"></a><span class="co">        Display a user-specified account</span></span>
<span id="cb113-65"><a href="#cb113-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-66"><a href="#cb113-66" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb113-67"><a href="#cb113-67" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb113-68"><a href="#cb113-68" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb113-69"><a href="#cb113-69" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb113-70"><a href="#cb113-70" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"View account"</span>)</span>
<span id="cb113-71"><a href="#cb113-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-72"><a href="#cb113-72" aria-hidden="true" tabindex="-1"></a>        account <span class="op">=</span> <span class="va">self</span>.get_account()</span>
<span id="cb113-73"><a href="#cb113-73" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb113-74"><a href="#cb113-74" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account not found"</span>)</span>
<span id="cb113-75"><a href="#cb113-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb113-76"><a href="#cb113-76" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(account)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Next we want to implement the complement to <code>view_account</code> which is <code>view_account_by_name</code>. This simply takes a user’s name and then forwards onto the appropriate message on the <code>AccountSystem</code>. The resulting list is then converted to a string representation using <code>map</code> and displayed to the user</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> view_accounts_for_name(<span class="va">self</span>):</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">        Find and display accounts for a user prompted name</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co">        Names are converted to lower case and stripped of</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co">        leading and trailing whitespace</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"View account holders accounts"</span>)</span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a>        accounts <span class="op">=</span> <span class="va">self</span>.__accounts.find_users_accounts(</span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>            BTCInput.read_text(<span class="st">"Enter account holder: "</span>)</span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(<span class="bu">map</span>(<span class="bu">str</span>, accounts)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Our last major implementation detail is then to implement managing a matured savings account. Recall from the <a href="#exercise-create-a-banking-application">original exercise</a> that a long-term savings account that has matured can either be reinvested or transferred to another account. To implement this structure as follows,</p>
<ol type="1">
<li>The user is prompted for an account number</li>
<li>We verify that account number is valid and a long-term account</li>
<li>We then validate that the account has matured</li>
<li>The user is then prompted if they want to reinvest
<ul>
<li>If yes, the account is reinvested and the process stops</li>
<li>Else we continue</li>
</ul></li>
<li>The user is then prompted for the account to transfer to</li>
<li>We validate that the account exists, and the account holder matches the long term account</li>
<li>We then attempt to close out the account</li>
</ol>
<p>The implementation is given below,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> manage_matured_long_term_savings(<span class="va">self</span>):</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co">        Close out or reinvest a user specified matured long-term account</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>        account_number <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter account number: "</span>).upper().strip()</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>        account <span class="op">=</span> <span class="va">self</span>.__accounts.get_account(account_number)</span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account not found"</span>)</span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="bu">isinstance</span>(account, Account.LongTermSavingsAccount):</span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account is not a long term savings account"</span>)</span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> account.has_matured():</span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account cannot be managed: has not matured"</span>)</span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a>        reinvest <span class="op">=</span> BTCInput.read_int_ranged(</span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Reinvest this account? (1 - yes, 0 - no): "</span>, <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> reinvest:</span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true" tabindex="-1"></a>            account.manage_account()</span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true" tabindex="-1"></a>        holder <span class="op">=</span> account.account_holder</span>
<span id="cb115-31"><a href="#cb115-31" aria-hidden="true" tabindex="-1"></a>        other_accounts <span class="op">=</span> <span class="bu">set</span>(<span class="va">self</span>.__accounts.find_users_accounts(holder)).difference(</span>
<span id="cb115-32"><a href="#cb115-32" aria-hidden="true" tabindex="-1"></a>            {account}</span>
<span id="cb115-33"><a href="#cb115-33" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb115-34"><a href="#cb115-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(other_accounts) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb115-35"><a href="#cb115-35" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account cannot be closed: No accounts to transfer to"</span>)</span>
<span id="cb115-36"><a href="#cb115-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-37"><a href="#cb115-37" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(<span class="bu">map</span>(<span class="bu">str</span>, other_accounts)))</span>
<span id="cb115-38"><a href="#cb115-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-39"><a href="#cb115-39" aria-hidden="true" tabindex="-1"></a>        account_number <span class="op">=</span> (</span>
<span id="cb115-40"><a href="#cb115-40" aria-hidden="true" tabindex="-1"></a>            BTCInput.read_text(<span class="st">"Enter transfer account number: "</span>).upper().strip()</span>
<span id="cb115-41"><a href="#cb115-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb115-42"><a href="#cb115-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-43"><a href="#cb115-43" aria-hidden="true" tabindex="-1"></a>        transfer_account <span class="op">=</span> <span class="va">self</span>.__accounts.get_account(account_number)</span>
<span id="cb115-44"><a href="#cb115-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> transfer_account <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb115-45"><a href="#cb115-45" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Account not found"</span>)</span>
<span id="cb115-46"><a href="#cb115-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-47"><a href="#cb115-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> transfer_account.account_holder <span class="op">!=</span> holder:</span>
<span id="cb115-48"><a href="#cb115-48" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Could not transfer, account holder does not match"</span>)</span>
<span id="cb115-49"><a href="#cb115-49" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span></span>
<span id="cb115-50"><a href="#cb115-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb115-51"><a href="#cb115-51" aria-hidden="true" tabindex="-1"></a>            account.manage_account(transfer_account)</span>
<span id="cb115-52"><a href="#cb115-52" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(</span>
<span id="cb115-53"><a href="#cb115-53" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Funds in account </span><span class="sc">{0}</span><span class="st"> transferred to account </span><span class="sc">{1}</span><span class="st">"</span>.<span class="bu">format</span>(</span>
<span id="cb115-54"><a href="#cb115-54" aria-hidden="true" tabindex="-1"></a>                    account.account_number, transfer_account.account_number</span>
<span id="cb115-55"><a href="#cb115-55" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb115-56"><a href="#cb115-56" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb115-57"><a href="#cb115-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb115-58"><a href="#cb115-58" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Failed to close account:"</span>, e)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Our last step is to implement the application of interest rates. This is done to all accounts, typically at some specified point, e.g.&nbsp;the first of each month. However, the natural place for this to be implemented is on the <code>AccountSystem</code> class,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AccountSystem:</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Represents the account management system of a bank</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> apply_interest(<span class="va">self</span>):</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Applies interest to all accounts in the system</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> account <span class="kw">in</span> <span class="va">self</span>.__account_dictionary.values():</span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>            account.apply_interest()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>We then just need to forward to this method from <code>BankApplication</code>, as can be seen already in the <code>main_menu</code> function</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main_menu(<span class="va">self</span>):</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">7</span>:</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.__accounts.apply_interest()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Running the program is the same as for our Fashion Shop Application</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>ui <span class="op">=</span> BankAccountApplication(<span class="st">"accounts.pkl"</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>ui.main_menu()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="design-review" class="level5">
<h5 class="anchored" data-anchor-id="design-review">Design Review</h5>
<p>Now that we’ve completed the program it’s worth reviewing the program. Overall the design is one that we’re pretty happy with but there could be some improvements. The most glaring is that account numbers must be unique, yet our program doesn’t enforce this. There are a number of solutions. The ideal way to handle this would be that when we try to add an account if <code>self.__account.add_new_account(account)</code> returns a <code>KeyError</code> would be to regenerate a new number. However this number is private and can’t be changed once an object is created. We don’t want to change this, so we would have to create an entire new object which is fine, but the way the code is organised means that it’s not clear when we get to adding the account, what type it is. Solutions include,</p>
<ol type="1">
<li><p>Moving the call to <code>add_new_account</code> to each individual account type path</p>
<ul>
<li>This means we can catch the <code>KeyError</code> regenerate a new number, and then rebuild the appropriate account type</li>
<li>Has the downside that we replicate the code for adding the account for every account type</li>
</ul></li>
<li><p>Implement a method on <code>AccountSystem</code> that tells us if a generated account number is valid.</p>
<ul>
<li>This means we can check at the time of number generation</li>
<li>Repeat until we get a valid one</li>
<li>This has the downside that if we had a concurrent system, we could potentially be told that the account number is free, then have another process beat us to using that number</li>
<li>Plus we already have the <code>KeyError</code> to tell us if the number is free
<ul>
<li>In Python you generally prefer to <em>ask for forgiveness</em> rather than <em>permission</em>
<ul>
<li>i.e.&nbsp;use exceptions over checking then setting</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Handle the Error, report it to the user and leave it up to them how they want to resolve</p>
<ul>
<li>Simplest implementation</li>
<li>Probably not the best user experience (since user might have to enter the same details all over again)</li>
</ul></li>
</ol>
<p>None of the solutions above are strictly the <em>best</em> they are all just options to consider. For this small program we’ve left the bug in as a demonstration.</p>
<p>There are a couple other design considerations. One is about cohesion, we have logic for defining the interest applied to accounts separate from the <code>Account</code> class stored on arguably the UI class <code>BankAccountApplication</code>. This is fine for this small system but perhaps suggests a lack of cohesion. If we were to change out our UI class to a GUI that GUI would then have to implement the same business logic. One solution is to move those details to the <code>Account</code> class hierarchy. Here each subclass might have to define a property <code>base_interest_rate</code> which defines the default interest rate for an account. On the other hand if we decide that an <code>Account</code> should have an interest rate, but has no business knowing how that interest rate is set, we may have to implement this behaviour either in the <code>AccountSystem</code> or in another class that purely handles the business logic around interest rates and propagates that through to the accounts. For the scale of this system, we probably don’t need that extra layer (remember the simpler the solution the easier, we can always refactor later)</p>
<p>The last question is more on of a philosophical design choice. This program implements features that are very client focused such as creating accounts, depositing and withdrawing (and arguably managing a long-term account), and some that a more targeted towards an internal user (applying interest, the ability to modify any account and see anybody’s account). This is fine for a simple toy program like the one we’re building. But if we were to scale this up we would probably want to split out the client-facing functions from the internal user facing components. Both would still talk to the same underlying data model though.</p>
</section>
</section>
</section>
<section id="design-with-classes" class="level3">
<h3 class="anchored" data-anchor-id="design-with-classes">Design With Classes</h3>
<ul>
<li>We can show the final class diagram and interactions of our program below</li>
<li>(We’ve hidden some of the subclasses and <code>object</code> for simplicity)</li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
title: Complete Fashion Shop Class Diagram
---

classDiagram

    class StockItem {
        str stock_ref
        str item_name
        str colour
        number price
        int stock_level
    }

    class Dress {
        str pattern
        int size
    }

    class Pants {
        int length
        str pattern
        int waist
    }

    class FashionShop {
        dictionary __stock_dictionary
    }

    class FashionShopApplication {
        FashionShop __shop
    }

    StockItem &lt;|-- Dress
    StockItem &lt;|--  Pants

    FashionShop "1" o-- "0..n" StockItem
    FashionShopApplication "1" *-- "1" FashionShop


</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>Class diagrams more broadly discuss associations</li>
<li>One form of association is inheritance which we’ve seen before is represented by a open arrow</li>
<li>Another is aggregation represented by an open diamond-headed arrow
<ul>
<li>We say that <code>FashionShop</code> aggregates <code>StockItem</code> because it is a container</li>
<li>We can additionally specify <em>multiplicities</em></li>
<li>i.e.&nbsp;how many items are represented in a relationship</li>
<li>We do this by adding number on either end of the arrow</li>
<li>Above we have <span class="math inline">\(1\)</span> next to the <code>FashionShop</code> and <span class="math inline">\(0 \ldots n\)</span> next to <code>StockItem</code></li>
<li>This says that one <code>FashionShop</code> aggregates <span class="math inline">\(0\)</span> to an arbitrary finite number of <code>StockItems</code></li>
</ul></li>
<li>A similar relationship is <em>composition</em>
<ul>
<li>Where as inheritance is a <em>is-a</em> relationship</li>
<li>Composition can be thought of as a <em>has-a</em> relationship</li>
<li>Again we can specify multiplicities</li>
<li>Here we indicate that there is one <code>FashionShopApplication</code> which contains one <code>FashionShop</code></li>
</ul></li>
<li>These class diagrams help express the structure and relationship of a system</li>
<li>Good way to describe how the elements of your program fit together</li>
</ul>
</section>
<section id="python-sets" class="level3">
<h3 class="anchored" data-anchor-id="python-sets">Python Sets</h3>
<ul>
<li>Sets are collections of values like tuples and lists</li>
<li>They are mutable like lists</li>
<li>Unlike lists each value in a set must be unique</li>
</ul>
<section id="make-something-happen-investigating-sets" class="level4">
<h4 class="anchored" data-anchor-id="make-something-happen-investigating-sets">Make Something Happen: Investigating Sets</h4>
<p><em>Work through the following steps in the python interpreter to understand sets</em></p>
<p>A set can be created by explicitly using the <code>set</code> initializer</p>
<div id="7517c4db" class="cell" data-execution_count="57">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>set1 <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>set1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>set()</code></pre>
</div>
</div>
<p>This creates an empty set.</p>
<p>We can add to set like with a list, but we use <code>add</code> rather than <code>append</code></p>
<div id="3f254e7d" class="cell" data-execution_count="58">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>set1.add(<span class="dv">1</span>)</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>set1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>{1}</code></pre>
</div>
</div>
<p>Sets can only hold one instance of a given value, what happens if we try to add the same element twice?</p>
<div id="a65cede1" class="cell" data-execution_count="59">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>set1.add(<span class="dv">1</span>)</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>set1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>{1}</code></pre>
</div>
</div>
<p>As we can see the set contents have not changed, there is only one <code>1</code> in the set. However the other thing to observe is that no error was thrown, the second <code>add</code> fails silently</p>
<p>We can add multiple values as long as they are distinct</p>
<div id="61b5629f" class="cell" data-execution_count="60">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>set1.add(<span class="dv">2</span>)</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>set1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>{1, 2}</code></pre>
</div>
</div>
<p>Like with lists and dictionaries there is a quick set declaration syntax. We simply provide a comma-separated list enclosed in curly braces</p>
<div id="d1fa04b9" class="cell" data-execution_count="61">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>set2 <span class="op">=</span> {<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>}</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>set2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>{2, 3, 4, 5}</code></pre>
</div>
</div>
<p>This is similar but distinct to the dictionary case where the curly brace list is comma separated <code>key:value</code> pairs</p>
<p>For those familiar with set theory, sets provide the standard suite of set operations.</p>
<p><code>difference</code> is called on one set, and takes another set as an argument. It returns a new set containing the elements in the original set that are not in the argument set, e.g.</p>
<div id="0d1510ac" class="cell" data-execution_count="62">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>set1.difference(set2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>{1}</code></pre>
</div>
</div>
<p>and</p>
<div id="b3062081" class="cell" data-execution_count="63">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>set2.difference(set1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>{3, 4, 5}</code></pre>
</div>
</div>
<p><code>Union</code> returns a set containing the elements that are in either of the sets</p>
<div id="5f1bd72a" class="cell" data-execution_count="64">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>set1.union(set2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>{1, 2, 3, 4, 5}</code></pre>
</div>
</div>
<p><code>intersection</code> returns a set containing the elements that are in both of the sets</p>
<div id="9c52eb37" class="cell" data-execution_count="65">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>set1.intersection(set2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>{2}</code></pre>
</div>
</div>
<p>There are also a number of methods for comparing the contents of a set. <code>isdisjoint</code> returns <code>True</code> if the two sets have no common elements</p>
<div id="b9b23207" class="cell" data-execution_count="66">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>set1.isdisjoint(set2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>False</code></pre>
</div>
</div>
<p><code>issubset</code> takes the form <code>seta.issubset(setb)</code> and returns <code>True</code> if <code>seta</code> is a subset of <code>setb</code>. <span class="math inline">\(A\)</span> being a subset of <span class="math inline">\(B\)</span> means all the elements of <span class="math inline">\(A\)</span> are in <span class="math inline">\(B\)</span></p>
<div id="cd69d8e4" class="cell" data-execution_count="67">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>set3 <span class="op">=</span> {<span class="dv">2</span>, <span class="dv">3</span>}</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>set3.issubset(set2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>True</code></pre>
</div>
</div>
<p>The opposite method is <code>issuperset</code> which returns true if the set the method is called on is a superset of the argument. <span class="math inline">\(A\)</span> is a superset of <span class="math inline">\(B\)</span> if <span class="math inline">\(A\)</span> contains every element of <span class="math inline">\(B\)</span></p>
<div id="acc8f56e" class="cell" data-execution_count="68">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>set3.issuperset(set2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>False</code></pre>
</div>
</div>
<ul>
<li>How are sets useful?
<ul>
<li>Let us remove duplicates in a collection</li>
</ul></li>
</ul>
<div id="e95fafa9" class="cell" data-execution_count="69">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span>(<span class="st">"Hello World"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>{' ', 'H', 'W', 'd', 'e', 'l', 'o', 'r'}</code></pre>
</div>
</div>
<ul>
<li>Python’s sets are unordered</li>
<li>They can be sorted using the function <code>sorted</code></li>
</ul>
<div id="ba5d00e5" class="cell" data-execution_count="70">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(<span class="st">"Hello World"</span>))</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(<span class="bu">set</span>(<span class="st">"Hello World"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[' ', 'H', 'W', 'd', 'e', 'l', 'l', 'l', 'o', 'o', 'r']
[' ', 'H', 'W', 'd', 'e', 'l', 'o', 'r']</code></pre>
</div>
</div>
<ul>
<li>We might also use them to manage a collection of items
<ul>
<li>e.g.&nbsp;a players inventory</li>
</ul></li>
</ul>
<div id="3ed0498f" class="cell" data-execution_count="71">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>pocket <span class="op">=</span> {<span class="st">"axe"</span>, <span class="st">"apple"</span>, <span class="st">"herbs"</span>, <span class="st">"flashlight"</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>Sets allow for easy membership checks</p></li>
<li><p>especially when we want to look at multiple members</p>
<div id="86e64145" class="cell" data-execution_count="72">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>  apple_potion <span class="op">=</span> {<span class="st">"apple"</span>, <span class="st">"herbs"</span>}</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> apple_potion.issubset(pocket):</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Making an apple potion"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Making an apple potion</code></pre>
</div>
</div></li>
<li><p>In the above example we check that the player’s inventory has the ingredients for an apple potion</p>
<ul>
<li>This is done by checking the ingredients are a subset of the inventory</li>
</ul></li>
<li><p>We can then make the apple potion using set operations</p>
<ul>
<li>Use set difference to remove the ingredients</li>
<li>Then add an apple potion</li>
</ul>
<div id="a8dd595d" class="cell" data-execution_count="73">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb150"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>  pocket <span class="op">=</span> pocket <span class="op">-</span> apple_potion</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>  pocket.add(<span class="st">"apple potion"</span>)</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  pocket</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>{'apple potion', 'axe', 'flashlight'}</code></pre>
</div>
</div></li>
<li><p>The subtraction operator on sets works like the set difference operation we’ve seen before</p></li>
</ul>
</section>
<section id="sets-and-tags" class="level4">
<h4 class="anchored" data-anchor-id="sets-and-tags">Sets and Tags</h4>
<ul>
<li>Sets are less common than dictionaries and lists</li>
<li>However they can be very useful</li>
<li>Our Fashion Shop client has provided an updated spec</li>
</ul>
<blockquote class="blockquote">
<p>Customers often pursue a similar “look” or “style” e.g.&nbsp;flowery, summer, formal, etc. She would like to be able to <em>tag</em> stock items so they can be easily searched</p>
</blockquote>
<ul>
<li>Tagging items with descriptors is very common</li>
<li>Blogs or Youtube videos are often tagged with metadata that describes their content</li>
<li>Sets are a good technique here since each tag should be unique</li>
</ul>
<section id="create-a-set-from-a-string-of-text" class="level5">
<h5 class="anchored" data-anchor-id="create-a-set-from-a-string-of-text">Create a set from a String of Text</h5>
<ul>
<li>Each <code>StockItem</code> should have a <code>tags</code> attribute</li>
<li><code>tags</code> comprises a set of tag values</li>
<li>Creating a <code>StockItem</code> now requires us to input the tag values at object creation</li>
<li>A sample UI might look like,</li>
</ul>
<div id="0c07a1f4" class="cell" data-execution_count="74">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb152"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Enter tags (separated by commas): </span><span class="ch">\033</span><span class="st">[31moutdoor, spring, informal, short</span><span class="ch">\033</span><span class="st">[0m"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre>Enter tags (separated by commas): <span class="ansi-red-fg">outdoor, spring, informal, short</span>
</pre>
</div>
</div>
</div>
<ul>
<li><p>Then need to convert the comma separated list into individual tag items</p></li>
<li><p>First we want to normalise tags, i.e.&nbsp;lowercase and leading / trailing whitespace stripped</p></li>
<li><p>However, we want to split the individual tags before we strip the whitespace</p>
<ul>
<li>Since there might be white space between the words</li>
</ul></li>
<li><p>So we can first lower, then separate the words using <code>split</code></p>
<ul>
<li><code>split</code> takes a string to split and a separator character (here <code>,</code>) to split on</li>
<li>The separator is not included in the split strings</li>
<li>Returns a list containing the new strings</li>
</ul></li>
<li><p>We can then use <code>map</code> to apply the string method <code>str.strip</code> to each individual tag</p>
<div id="4281d524" class="cell" data-execution_count="76">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>  tag_list <span class="op">=</span> <span class="bu">str</span>.split(<span class="bu">str</span>.lower(tag_string), sep<span class="op">=</span><span class="st">','</span>)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>  tag_list <span class="op">=</span> <span class="bu">map</span>(<span class="bu">str</span>.strip, tag_list)</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="bu">list</span>(tag_list))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>['outdoor', 'spring', 'informal', 'short']</code></pre>
</div>
</div></li>
<li><p>The last step is to ensure all the tags are unique by converting to a set</p>
<div id="b609eb81" class="cell" data-execution_count="77">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>  tags <span class="op">=</span> <span class="bu">set</span>(tag_list)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>Now that we’ve defined this pipeline for creating our sets, we should really encapsulate it as a method</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb156"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> FashionShopApplication:</span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@staticmethod</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> tag_set_from_text(tag_text):</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co">        Create a set of tags from a comma-separated list</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Tags are normalised as lowercase with leading and</span></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="co">        trailing whitespace stripped</span></span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-11"><a href="#cb156-11" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb156-12"><a href="#cb156-12" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb156-13"><a href="#cb156-13" aria-hidden="true" tabindex="-1"></a><span class="co">        tag_text: str</span></span>
<span id="cb156-14"><a href="#cb156-14" aria-hidden="true" tabindex="-1"></a><span class="co">            comma-separated list of tags</span></span>
<span id="cb156-15"><a href="#cb156-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-16"><a href="#cb156-16" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb156-17"><a href="#cb156-17" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb156-18"><a href="#cb156-18" aria-hidden="true" tabindex="-1"></a><span class="co">        set</span></span>
<span id="cb156-19"><a href="#cb156-19" aria-hidden="true" tabindex="-1"></a><span class="co">            set containing unique tags. Tags are lowercase with</span></span>
<span id="cb156-20"><a href="#cb156-20" aria-hidden="true" tabindex="-1"></a><span class="co">            no leading or trailing whitespace</span></span>
<span id="cb156-21"><a href="#cb156-21" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb156-22"><a href="#cb156-22" aria-hidden="true" tabindex="-1"></a>        tags <span class="op">=</span> <span class="bu">set</span>(<span class="bu">map</span>(<span class="bu">str</span>.strip, <span class="bu">str</span>.split(<span class="bu">str</span>.lower(tag_text), sep<span class="op">=</span><span class="st">","</span>)))</span>
<span id="cb156-23"><a href="#cb156-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> tags</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Implemented as a static method
<ul>
<li>The behaviour is associated with the class</li>
<li>But not associated with any specific instance</li>
</ul></li>
</ul>
</section>
<section id="filter-on-tags" class="level5">
<h5 class="anchored" data-anchor-id="filter-on-tags">Filter on Tags</h5>
<ul>
<li><p>Now that we’ve added tags we need a way to use them to search for items</p></li>
<li><p>The client wants to provide a list of tags and receive a list of items matching those tags</p></li>
<li><p>Below is a proposed interface</p>
<div id="0a32a434" class="cell" data-execution_count="78">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Enter the tags to look for (comma separated): </span><span class="ch">\033</span><span class="st">[31moutdoor, spring</span><span class="ch">\033</span><span class="st">[0m"</span>)</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Stock Reference: BL343"</span>)</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Type: Blouse</span><span class="ch">\033</span><span class="st">[0m"</span>)</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Price: 100"</span>)</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Stock Level: 0"</span>)</span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Colour: Pink"</span>)</span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"""Tags: {"spring", "friendly", "city", "outdoor"}"""</span>)</span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Size: 14"</span>)</span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Style: plain"</span>)</span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Pattern: check"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre>Enter the tags to look for (comma separated): <span class="ansi-red-fg">outdoor, spring</span>

Stock Reference: BL343

Type: Blouse

Price: 100

Stock Level: 0

Colour: Pink

Tags: {"spring", "friendly", "city", "outdoor"}

Size: 14

Style: plain

Pattern: check
</pre>
</div>
</div>
</div></li>
<li><p>We can reuse <code>get_tag_set_from_text</code> to create a search set</p></li>
<li><p>We take match to mean the search tags are a <em>subset</em> of the item’s tags</p>
<ul>
<li>This means that an item must match <em>all</em> the tags</li>
</ul></li>
<li><p>An alternative approach might be to match any items that match <em>at least</em> one of the tags</p>
<ul>
<li>This could be done by checking the intersection is non-empty</li>
</ul></li>
<li><p>In the above example we can see the blouse matched because the search tags (<code>{"outdoor", "spring"}</code>) are a subset of the blouse’s tags (<code>{"spring", "friendly", "city", "outdoor"}</code>)</p></li>
<li><p>This implementation is thus a simple application of <code>issubset</code></p>
<div id="a6fdb7ff" class="cell" data-execution_count="79">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb158"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> match_tags(item):</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Checks if the given item matches the specified search tags</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a><span class="co">      item : StockItem</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a><span class="co">          StockItem to check for matching tags</span></span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a><span class="co">      `True` if the search tags are a subset of `item.tags`, else `False`</span></span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> search_tags.issubset(item.tags)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>We can see that the search tags are passed in via a global parameter rather than explicitly through the function signature</p></li>
<li><p>This is so we can use the <code>filter</code> python function</p></li>
<li><p><code>filter</code> works like map</p>
<ul>
<li><code>map</code> returns the result of a applying a function to each member of a collection</li>
<li><code>filter</code> applies a boolean function (one that returns <code>True</code> or <code>False</code>) to each member of a collection, and returns the subcollection of all elements that evaluate <code>True</code></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>  filtered_list <span class="op">=</span> <span class="bu">filter</span>(match_tags, stock_list)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>The above uses <code>filter</code> to find all items in the <code>stock_list</code> that match the specified tags. Putting this all together</p></li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> FashionShop:</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> find_matching_with_tags(<span class="va">self</span>, search_tags):</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="co">        Get stock items that match all the specified search tags</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="co">        Parameters</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="co">        ----------</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a><span class="co">        search_tags : str</span></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a><span class="co">            set of tags to search against.</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a><span class="co">            Item's must match all tags</span></span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns</span></span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a><span class="co">        -------</span></span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a><span class="co">        list[StockItem]</span></span>
<span id="cb160-15"><a href="#cb160-15" aria-hidden="true" tabindex="-1"></a><span class="co">            list containing all StockItem's matching the</span></span>
<span id="cb160-16"><a href="#cb160-16" aria-hidden="true" tabindex="-1"></a><span class="co">            specified set of tags. If no matches are found</span></span>
<span id="cb160-17"><a href="#cb160-17" aria-hidden="true" tabindex="-1"></a><span class="co">            the list is empty</span></span>
<span id="cb160-18"><a href="#cb160-18" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span>
<span id="cb160-19"><a href="#cb160-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-20"><a href="#cb160-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> match_tags(item):</span>
<span id="cb160-21"><a href="#cb160-21" aria-hidden="true" tabindex="-1"></a>            <span class="co">"""</span></span>
<span id="cb160-22"><a href="#cb160-22" aria-hidden="true" tabindex="-1"></a><span class="co">            Checks if the given item matches the specified search tags</span></span>
<span id="cb160-23"><a href="#cb160-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-24"><a href="#cb160-24" aria-hidden="true" tabindex="-1"></a><span class="co">            Parameters</span></span>
<span id="cb160-25"><a href="#cb160-25" aria-hidden="true" tabindex="-1"></a><span class="co">            ----------</span></span>
<span id="cb160-26"><a href="#cb160-26" aria-hidden="true" tabindex="-1"></a><span class="co">            item : StockItem</span></span>
<span id="cb160-27"><a href="#cb160-27" aria-hidden="true" tabindex="-1"></a><span class="co">                StockItem to check for matching tags</span></span>
<span id="cb160-28"><a href="#cb160-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-29"><a href="#cb160-29" aria-hidden="true" tabindex="-1"></a><span class="co">            Returns</span></span>
<span id="cb160-30"><a href="#cb160-30" aria-hidden="true" tabindex="-1"></a><span class="co">            -------</span></span>
<span id="cb160-31"><a href="#cb160-31" aria-hidden="true" tabindex="-1"></a><span class="co">            `True` if the search tags are a subset of `item.tags`, else `False`</span></span>
<span id="cb160-32"><a href="#cb160-32" aria-hidden="true" tabindex="-1"></a><span class="co">            """</span></span>
<span id="cb160-33"><a href="#cb160-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> search_tags.issubset(item.tags)</span>
<span id="cb160-34"><a href="#cb160-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-35"><a href="#cb160-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">filter</span>(match_tags, <span class="va">self</span>.__stock_dictionary.values())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><p><code>find_matching_with_tags</code> is added to the <code>FashionShop</code> class as it is a method for handling a collection of stock items</p></li>
<li><p>It returns the list of matching stock items</p></li>
<li><p>You may notice something odd, we have declared the <code>match_tags</code> function inside the <code>find_matching_with_tags</code> function</p></li>
<li><p>This is allowed in python</p></li>
<li><p>Means that <code>match_tags</code> can access variables in the scope of the <code>find_matching_with_tags</code> function</p></li>
<li><p>The full tags based implementation is given in the <a href="./Examples/12_FashionShopWithTags">FashionShopWithTags</a> folder</p></li>
<li><p>One of the minor implementation details is that as <code>tags</code> adds a data attribute to <code>StockItem</code> we have to bump the version number (for the versions in our implementations this is <span class="math inline">\(2 \rightarrow 3\)</span>), and update <code>check_version</code></p></li>
<li><p>The new implementation below, simply adds a empty tags field to older items</p>
<ul>
<li>Note we don’t need to update the version of the subclasses</li>
<li>However, we do need to update all their <code>__init__</code> signatures too</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem:</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="co">      Checks the version of a `StockItem` instance and upgrades it if required</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"**StockItem check_version called"</span>)</span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="va">self</span>.__StockItem_version <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.location <span class="op">=</span> <span class="va">None</span></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="va">self</span>.__StockItem_version <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.tags <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">3</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
</section>
<section id="sets-versus-class-hierarchies" class="level4">
<h4 class="anchored" data-anchor-id="sets-versus-class-hierarchies">Sets versus Class Hierarchies</h4>
<ul>
<li>It’s quite common for customers to provide feedback on the usability of their product</li>
<li>For example our client might prefer the tag-based interface more generally over a rigid class structure</li>
</ul>
<blockquote class="blockquote">
<p>Your client would like to make changes to how the program functions. She enjoys using tags to identify stock elements. She finds having to specify a specific item type (e.g.&nbsp;pants, jeans, hat etc.) a painful process. She would prefer to index all stock using tags. Dresses would have the <code>dress</code> tag, etc. Together you propose the following mock-up</p>
</blockquote>
<div id="32e6ba32" class="cell" data-execution_count="80">
<div class="cell-output cell-output-stdout">
<div class="ansi-escaped-output">
<pre>Enter stock reference: <span class="ansi-red-fg">D001</span>

Enter price: <span class="ansi-red-fg">120</span>

Enter tags (separated by commas): <span class="ansi-red-fg">dress, colour:red, location:shop window, pattern:swirly, size:12, evening, long</span>
</pre>
</div>
</div>
</div>
<ul>
<li><p>The client finds searching by tags easy to work with</p></li>
<li><p>Tags are more flexible and remind her more of how she would organise stock by hand</p></li>
<li><p>Tags give the flexibility to add new items or change how items are described without needing to recompose the class hierarchy</p></li>
<li><p>The only additional request the client has is to allow the ability to edit the tags on a stock item</p>
<ul>
<li>Can add or remove tags</li>
<li>Can correct edits</li>
</ul></li>
<li><p>The downside is that any tags that are not entered correctly will result in failed searches</p>
<ul>
<li>The class hierarchy enforces that the specified attributes for each <code>StockItem</code> subclass exist</li>
</ul></li>
<li><p>A tags only implementation is given by in the <a href="./Examples/13_TagOnlyFashionShop/">TagOnlyFashionShop</a> folder</p></li>
<li><p>The <code>StockItem</code> implementation becomes much simpler</p></li>
<li><p>First since there are no longer subclasses, we no longer define it as an abstract class</p></li>
<li><p>We update the docstrings and <code>__init__</code> method</p>
<ul>
<li>This involves removing all the attributes that do not describe the stock id, price or stock level</li>
<li>We also increment the version number</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> StockItem:</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">"""</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co">  Represents a single inventory item</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="co">  Attributes</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a><span class="co">  ----------</span></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="co">  stock_ref : str</span></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="co">      reference id of the stock item</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="co">  tags : set[str]</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a><span class="co">      set of tags describing the stock item</span></span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a><span class="co">  Class Attributes</span></span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a><span class="co">  ----------------</span></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a><span class="co">  show_instrumentation : bool</span></span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a><span class="co">      Indicates if instrumentation should be printed</span></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a><span class="co">  max_stock_add : int</span></span>
<span id="cb162-17"><a href="#cb162-17" aria-hidden="true" tabindex="-1"></a><span class="co">      maximum amount of stock that can be added to an item's stock level at a time</span></span>
<span id="cb162-18"><a href="#cb162-18" aria-hidden="true" tabindex="-1"></a><span class="co">  min_price : int | float</span></span>
<span id="cb162-19"><a href="#cb162-19" aria-hidden="true" tabindex="-1"></a><span class="co">      minimum price of any stock item</span></span>
<span id="cb162-20"><a href="#cb162-20" aria-hidden="true" tabindex="-1"></a><span class="co">  max_price : int | float</span></span>
<span id="cb162-21"><a href="#cb162-21" aria-hidden="true" tabindex="-1"></a><span class="co">      maximum price of any stock item</span></span>
<span id="cb162-22"><a href="#cb162-22" aria-hidden="true" tabindex="-1"></a><span class="co">  """</span></span>
<span id="cb162-23"><a href="#cb162-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-24"><a href="#cb162-24" aria-hidden="true" tabindex="-1"></a>  show_instrumentation <span class="op">=</span> <span class="va">True</span></span>
<span id="cb162-25"><a href="#cb162-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-26"><a href="#cb162-26" aria-hidden="true" tabindex="-1"></a>  max_stock_add <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb162-27"><a href="#cb162-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-28"><a href="#cb162-28" aria-hidden="true" tabindex="-1"></a>  min_price <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb162-29"><a href="#cb162-29" aria-hidden="true" tabindex="-1"></a>  max_price <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb162-30"><a href="#cb162-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-31"><a href="#cb162-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, stock_ref, price, tags):</span>
<span id="cb162-32"><a href="#cb162-32" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb162-33"><a href="#cb162-33" aria-hidden="true" tabindex="-1"></a><span class="co">      Creates a `StockItem` instance</span></span>
<span id="cb162-34"><a href="#cb162-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-35"><a href="#cb162-35" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb162-36"><a href="#cb162-36" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb162-37"><a href="#cb162-37" aria-hidden="true" tabindex="-1"></a><span class="co">      stock_ref : str</span></span>
<span id="cb162-38"><a href="#cb162-38" aria-hidden="true" tabindex="-1"></a><span class="co">          stock reference id</span></span>
<span id="cb162-39"><a href="#cb162-39" aria-hidden="true" tabindex="-1"></a><span class="co">      price : int | float</span></span>
<span id="cb162-40"><a href="#cb162-40" aria-hidden="true" tabindex="-1"></a><span class="co">          stock price</span></span>
<span id="cb162-41"><a href="#cb162-41" aria-hidden="true" tabindex="-1"></a><span class="co">      tags : set[str]</span></span>
<span id="cb162-42"><a href="#cb162-42" aria-hidden="true" tabindex="-1"></a><span class="co">          set of tags describing the stock item</span></span>
<span id="cb162-43"><a href="#cb162-43" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb162-44"><a href="#cb162-44" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb162-45"><a href="#cb162-45" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"**StockItem __init__ called"</span>)</span>
<span id="cb162-46"><a href="#cb162-46" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.stock_ref <span class="op">=</span> stock_ref</span>
<span id="cb162-47"><a href="#cb162-47" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.__price <span class="op">=</span> price</span>
<span id="cb162-48"><a href="#cb162-48" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.tags <span class="op">=</span> tags</span>
<span id="cb162-49"><a href="#cb162-49" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.__stock_level <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb162-50"><a href="#cb162-50" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.__StockItem_version <span class="op">=</span> <span class="dv">4</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Since we no longer have multiple subclasses we can remove the <code>item_name</code> property</p></li>
<li><p>Then we have to update the <code>__str__</code> method</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"**StockItem __str__ called"</span>)</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>      template <span class="op">=</span> <span class="st">"""Stock Reference: </span><span class="sc">{0}</span></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="st">Price: </span><span class="sc">{1}</span></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="st">Stock level: </span><span class="sc">{2}</span></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="st">Tags: </span><span class="sc">{3}</span><span class="st">"""</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> template.<span class="bu">format</span>(<span class="va">self</span>.stock_ref, <span class="va">self</span>.price, <span class="va">self</span>.stock_level, <span class="va">self</span>.tags)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>All our actual core functions can stay the same, but we just need to adjust the <code>check_version</code></p></li>
<li><p>We could make <code>check_version</code> convert all the previous attributes to tags, <em>but</em> this has a problem</p>
<ul>
<li>All the subclasses that are actually instantiated no longer exist!</li>
<li>So really the customer will likely have to remake these objects</li>
<li>In our implementation, even though a <code>StockItem</code> should not be created directly, we can provide a warning message that the user should manually update the current object</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb164"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> check_version(<span class="va">self</span>):</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Checks the version of a `StockItem` instance and upgrades it if required</span></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> StockItem.show_instrumentation:</span>
<span id="cb164-10"><a href="#cb164-10" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"**StockItem check_version called"</span>)</span>
<span id="cb164-11"><a href="#cb164-11" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="va">self</span>.__StockItem_version <span class="op">!=</span> <span class="dv">4</span>:</span>
<span id="cb164-12"><a href="#cb164-12" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Stock item uses old data model, please recreate this item"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Data Migration is Painful</strong></p>
<p>In moving from the class hierarchy to a tags based implementation, we’ve encountered one common problem. Data Migration. Before we’ve used simple versioning on classes to update them when we change their implementation. But here we have a bigger scale problem. What do we do when we change the application architecture? We can’t just update the subclasses because they no longer exist. For our small toy problem manually recreating objects probably works fine.</p>
<p>However if we were working on a larger project we would have to create a migration plan. This might be a simple script that converts the old data to the new data schema, or for larger projects this might be a longer term project where we slowly phase in the new system and phase the old system out.</p>
</div>
</div>
<ul>
<li>The <code>FashionShop</code> class needs no updates</li>
<li>It only ever sees objects as <code>StockItem</code>s and manages the collection</li>
<li>We do need to make minor updates to <code>FashionShopApplication</code>
<ul>
<li>This is just adjusting how we create new items to reflect that we don’t have a class hierarchy</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> create_new_stock_item(<span class="va">self</span>):</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Create a new stock item and add it to the system</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Prompts the user for the necessary descriptors and</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a><span class="co">      any optional tags then creates a corresponding stock</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a><span class="co">      item and adds it to the store</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb165-12"><a href="#cb165-12" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb165-13"><a href="#cb165-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-14"><a href="#cb165-14" aria-hidden="true" tabindex="-1"></a>      <span class="co"># now we have a valid item so get the common attributes</span></span>
<span id="cb165-15"><a href="#cb165-15" aria-hidden="true" tabindex="-1"></a>      stock_ref <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter Stock reference: "</span>)</span>
<span id="cb165-16"><a href="#cb165-16" aria-hidden="true" tabindex="-1"></a>      price <span class="op">=</span> BTCInput.read_float_ranged(</span>
<span id="cb165-17"><a href="#cb165-17" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Enter price: "</span>,</span>
<span id="cb165-18"><a href="#cb165-18" aria-hidden="true" tabindex="-1"></a>          min_value<span class="op">=</span>StockItem.StockItem.min_price,</span>
<span id="cb165-19"><a href="#cb165-19" aria-hidden="true" tabindex="-1"></a>          max_value<span class="op">=</span>StockItem.StockItem.max_price,</span>
<span id="cb165-20"><a href="#cb165-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb165-21"><a href="#cb165-21" aria-hidden="true" tabindex="-1"></a>      tags <span class="op">=</span> FashionShopApplication.tag_set_from_text(</span>
<span id="cb165-22"><a href="#cb165-22" aria-hidden="true" tabindex="-1"></a>          BTCInput.read_text(<span class="st">"Enter tags (separated by commas): "</span>)</span>
<span id="cb165-23"><a href="#cb165-23" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb165-24"><a href="#cb165-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-25"><a href="#cb165-25" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.__shop.store_new_stock_item(StockItem.StockItem(stock_ref, price, tags))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li>We’ve also updated the docstring</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Comments can easily go stale</strong></p>
<p>One of the reasons that people argue against using comments is that like code itself, they need to be maintained. As we’ve seen above, whenever we modify the code we have to ensure that the comments still correctly describe the behaviour. Since the comments we’re talking about are the docstrings it’s important to have these, <em>and</em> even more important they are up to date. Especially if we want to release documentation for our API.</p>
<p>However, you should be considered in how you document your code. A comment is a maintenance overhead, and an incorrect comment can result in a lot of frustration if it confuses someone looking at the code base</p>
</div>
</div>
<section id="advantages-of-using-sets-and-tags" class="level5">
<h5 class="anchored" data-anchor-id="advantages-of-using-sets-and-tags">Advantages of Using Sets and Tags</h5>
<ul>
<li>Client is now in control of how stock is organised</li>
<li>Tags can be added and searched for on the fly
<ul>
<li>This may get unwieldy if the number of tags gets very large</li>
</ul></li>
<li>The program implementation is much simpler
<ul>
<li>No need for complicated, synchronised class hierarchy</li>
<li>Everything is now a stock item</li>
</ul></li>
</ul>
</section>
<section id="disadvantages-of-using-classes" class="level5">
<h5 class="anchored" data-anchor-id="disadvantages-of-using-classes">Disadvantages of using Classes</h5>
<ul>
<li>Class hierarchies allow you to implement strict business or application logic</li>
<li>All objects created must obey the specified interfaces
<ul>
<li>For example we enforce that a dress has a size, pattern and colour</li>
</ul></li>
<li>Using open-ended tags means that a required tag (say size) might be missing
<ul>
<li>No obligation to specify in the size embedded in the code</li>
</ul></li>
<li>Classes also allow for polymorphism
<ul>
<li>Can make a dress behave differently from a hat for example</li>
<li>We saw this with the <code>__str__</code> method</li>
<li>Each subclass defined it’s own logic for conversion to a string</li>
<li>tags don’t provide an easy way to have an item-type dependent presentation</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>What’s important to the programmer may not be important to the customer</strong></p>
<p>Often when writing programs for other clients it is easy to get fixated on developing a piece of logic that the customer may not actually like. Equally as a programmer, you may not fully understand or appreciate the nature of the businesses logic.</p>
<p>In the case of the Fashion Shop application we created a complex hierarchy based on the assumption that the it was important to store all the details for different categories of stock. The class hierarchy enforces that all objects are fully described.</p>
<p>However, from the client’s perspective as long as the item is properly referenced, priced and it’s stock levels tracked, the other information is just a useful bonus. She finds it much more useful to be able to add and modify tags or organise stock as needed.</p>
<p>Properly understanding the business needs of a client and what their important use cases are is a crucial part of project management. One of the techniques for solving this is called <em><a href="https://en.wikipedia.org/wiki/Domain-driven_design">domain-driven design</a></em> which strives to make sure that software accurately models the <em>domain</em> it is applied to</p>
</div>
</div>
</section>
<section id="code-analysis-design-decisions" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-design-decisions">Code Analysis: Design Decisions</h5>
<p><em>Look at the following scenarios and decide if a class-based or tags based implementation makes sense</em></p>
<ol type="1">
<li><p><em>You’re creating banking software for a local bank to manage their accounts. The bank offers credit and checking accounts. Should we use a class hierarchy?</em></p>
<ul>
<li>Yes</li>
<li>Accounts are likely to have a rigid set of attributes that all need to be specified and validated</li>
<li>Some elements are likely common
<ul>
<li>e.g.&nbsp;the account holder details</li>
</ul></li>
<li>Different account types might specify different attributes
<ul>
<li>e.g.&nbsp;credit account requires a credit limit</li>
</ul></li>
<li>We can thus use an abstract <code>Account</code> class, and then subclass this to provide specific implementations</li>
<li>Means we can also use method overloading and polymorphism
<ul>
<li>e.g.&nbsp;Different accounts will process funds withdrawals in different ways</li>
</ul></li>
<li>You can see an example in our model <a href="#exercise-create-a-banking-application">bank system</a> class structure</li>
</ul></li>
<li><p><em>You’ve been approached to help a local gallery track their artwork. The gallery holds pictures, sculptures, and manuscripts. Should we use a class hierarchy?</em></p>
<ul>
<li>Likely not</li>
<li>There is likely not a lot of common functionality between the objects</li>
<li>The items are also likely to be flexibly described rather than have a rigid data model</li>
<li>The gallery may evolve and change how they categorise
<ul>
<li>e.g.&nbsp;They may switch from categorising by type to categorising by artist etc.</li>
</ul></li>
<li>Sets and tags makes sense here</li>
<li>In theory you could just reuse the <a href="#sets-and-tags">tags-only fashion shop application</a> (maybe renaming some items so they contextually make sense)</li>
</ul></li>
</ol>
</section>
</section>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li>Inheritance can be used to manage a large number of related items
<ul>
<li>Inheritance lets (sub)classes be based on other (super)classes</li>
<li>Subclasses inherit the attributes and methods of their parent</li>
<li>Subclasses can redefine attributes and methods to override the behaviour of the parent</li>
</ul></li>
<li>Structuring a program as individual cohesive components make it easy to develop, test and modify parts of a program
<ul>
<li>Components can be implemented as classes that provide specific methods</li>
<li>e.g.&nbsp;<code>StockItem</code> which managed a stocked inventory item
<ul>
<li>Had a <code>add_stock</code> to adjust its stock level</li>
</ul></li>
<li>Different components communicate purely through each others methods</li>
<li>e.g.&nbsp;<code>FashionShop</code> stores <code>StockItem</code> objects via a dictionary
<ul>
<li>Could instead use a database implementation</li>
<li>No need to rewrite the other classes as long as the method interface is the same</li>
</ul></li>
<li>Components can be developed and tested independently and cooperatively once their interfaces are defined</li>
</ul></li>
<li>Python provides a <code>set</code> collection
<ul>
<li>A set is a collection of unique values</li>
<li>Mutable like a list</li>
<li>An example use for sets is specifying unique, dynamic tags on an object</li>
<li>The <code>set</code> implementation supports all standard set operations</li>
</ul></li>
<li>It’s important to understand client requirements when developing a program</li>
</ul>
</section>
<section id="questions-and-answers" class="level2">
<h2 class="anchored" data-anchor-id="questions-and-answers">Questions and Answers</h2>
<ol type="1">
<li><p><em>Do I have to use a class hierarchy if I want to store many related items?</em></p>
<ul>
<li>No</li>
<li>They are useful when you want to use polymorphism
<ul>
<li>i.e.&nbsp;treat them all as one common object</li>
<li>But have each specific type behave differently</li>
</ul></li>
</ul></li>
<li><p><em>What turns an object into a software component?</em></p>
<ul>
<li>A component is cohesive</li>
<li>It can perform all the functions of it’s domain without needing another object</li>
<li>e.g.&nbsp;<code>StockItem</code>’s methods only rely on it’s internal state and some passed in basic parameters
<ul>
<li>No need to reach out to another external object instance</li>
<li><code>FashionShop</code> or <code>FashionShopApplication</code> may call methods on <code>StockItem</code> objects
<ul>
<li>These are internally encapsulated in the object</li>
<li>So all good, these are still cohesive</li>
</ul></li>
<li>We don’t want to be calling out to <em>external</em> objects</li>
<li>Poor cohesion would have methods like <code>add_stock</code> and <code>sell_stock</code> outside in a separate class</li>
</ul></li>
<li>Considering how easy it would be to swap the class for one with a similar interface is a good test of how cohesive a class is
<ul>
<li>If the class is cohesive this should be easy</li>
<li>For example if we wanted to swap <code>FashionShop</code> from a dictionary implementation to a database implementation with the same interface</li>
</ul></li>
<li>When using component based design, it’s a good idea to ensure you define your components <em>before</em> you start implementing a design
<ul>
<li>Need to ensure that you understand correctly what data is needed where and how components will communicate</li>
</ul></li>
<li>Components can then be implemented individually</li>
</ul></li>
<li><p><em>Do I have to use object-oriented design to make my programs?</em></p>
<ul>
<li>No</li>
<li>Python uses duck-typing, which means if we try to call a method on an object, it will be called so long as it’s defined</li>
<li>Thus we can implement polymorphism without a rigid class hierarchy</li>
<li>The downside is without a clear class hierarchy it can be hard to propagate method or design changes between related implementations</li>
<li>Remember that typically the largest time cost of code is maintaining and understanding existing code</li>
</ul></li>
<li><p><em>Why is the relationship between a subclass and a superclass so confusing?</em></p>
<ul>
<li>Recall that the <em>sub</em> and <em>super</em> names derive from set theory</li>
<li>So while a <em>super</em> class may have less functionality than a <em>sub</em> class that is because every subclass is an instance of a superclass</li>
<li>A subclass can be thought of as a more specialised implementation of a superclass</li>
</ul></li>
<li><p><em>What exactly happens when a method in a class is overridden?</em></p>
<ul>
<li>When the method is called in python, python first looks for the method on the object class</li>
<li>If it exists, it’s used, else it looks in the next superclass</li>
<li>This continues until the base class for all python instances <code>object</code> is found</li>
<li>If the object is <em>still</em> not found an error will be found, for example with the <code>int</code> object below we try to call the fictitious method <code>foo</code></li>
</ul>
<div id="60e84808" class="cell" data-execution_count="81">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a> x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a> x.foo()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[81]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> x = <span class="ansi-green-fg">10</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span class="ansi-yellow-bg">x</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">foo</span>()

<span class="ansi-red-fg">AttributeError</span>: 'int' object has no attribute 'foo'</pre>
</div>
</div>
</div>
<ul>
<li>Overriding methods can slow a program down as this method resolution takes time</li>
<li>This is typically not a bottleneck in python programs</li>
</ul></li>
<li><p><em>What things in my class should be made static?</em></p>
<ul>
<li>Static items are always present</li>
<li>They are associated with the class, not a specific instance</li>
<li>static data attributes are good for storing class wide values
<ul>
<li>For example variables associated with validating data such as a max and min value</li>
<li>We don’t want to store a copy of these for every object instance</li>
<li>So we instead store it as a class attribute</li>
</ul></li>
<li>static methods are for methods that don’t need an instance of the class
<ul>
<li>Validation or object creation methods are a common use case</li>
<li>Keeps code associated with the class packaged with the class</li>
<li>For example <code>load</code> on <code>FashionShop</code>, there’s no <code>FashionShop</code> instance to load into yet</li>
</ul></li>
</ul></li>
<li><p><em>When do I use abstraction?</em></p>
<ul>
<li>Used when thinking about an object</li>
<li>Abstraction helps reducing noise when considering a system
<ul>
<li>e.g.&nbsp;rather than considering a range of different customers we just consider a <em>Customer</em>
<ul>
<li>We can then define the basic operations we need on a customer</li>
<li>Later we might then specialise for different customers</li>
</ul></li>
</ul></li>
</ul></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>