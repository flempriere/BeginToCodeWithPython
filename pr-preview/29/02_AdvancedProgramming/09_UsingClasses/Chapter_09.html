<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 9: Use Classes to Store Data – Beginning to Code with Python: Notes, Examples and Exercises</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-fd21d93db373728c2f8fcda4b672d2ec.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Beginning to Code with Python: Notes, Examples and Exercises</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html">Advanced Programming</a></li><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html">Chapter 9: Use Classes to Store Data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Programming Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/02_PythonAndProgramming/Chapter_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 2: Python and Programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/03_PythonProgramStructure/Chapter_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 3: Python Program Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/04_WorkingWithVariables/Chapter_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 4: Working With Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/05_MakingDecisions/Chapter_05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 5: Making Decisions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/06_RepeatingActionsWithLoops/Chapter_06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 6: Repeating Actions with Loops</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/07_UsingFunctions/Chapter_07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 7: Using Functions to Simplify Programs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../01_ProgrammingFundamentals/08_StoringCollectionsOfData/Chapter_08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 8: Storing Collections of Data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Chapter 9: Use Classes to Store Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09_ExtensionExercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extended Exercises for Chapter 9</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../02_AdvancedProgramming/10_UseClassesToCreateActiveObjects/Chapter_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 10: Using Classes to Create Active Objects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../02_AdvancedProgramming/11_ObjectBasedSolutionDesign/Chapter_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chapter 11: Object-based Solution Design</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#notes" id="toc-notes" class="nav-link active" data-scroll-target="#notes">Notes</a>
  <ul>
  <li><a href="#make-a-tiny-contacts-app" id="toc-make-a-tiny-contacts-app" class="nav-link" data-scroll-target="#make-a-tiny-contacts-app">Make a Tiny Contacts App</a>
  <ul>
  <li><a href="#make-a-prototype" id="toc-make-a-prototype" class="nav-link" data-scroll-target="#make-a-prototype">Make a Prototype</a>
  <ul>
  <li><a href="#code-analysis-the-contacts-application-prototype" id="toc-code-analysis-the-contacts-application-prototype" class="nav-link" data-scroll-target="#code-analysis-the-contacts-application-prototype">Code Analysis: The Contacts Application Prototype</a></li>
  </ul></li>
  <li><a href="#store-contact-details-in-separate-lists" id="toc-store-contact-details-in-separate-lists" class="nav-link" data-scroll-target="#store-contact-details-in-separate-lists">Store Contact Details in Separate Lists</a>
  <ul>
  <li><a href="#code-analysis-the-find_contact-function" id="toc-code-analysis-the-find_contact-function" class="nav-link" data-scroll-target="#code-analysis-the-find_contact-function">Code Analysis: The <code>find_contact</code> Function</a></li>
  </ul></li>
  <li><a href="#use-a-class-to-store-contact-details" id="toc-use-a-class-to-store-contact-details" class="nav-link" data-scroll-target="#use-a-class-to-store-contact-details">Use a Class to Store Contact Details</a>
  <ul>
  <li><a href="#make-something-happen-creating-a-class" id="toc-make-something-happen-creating-a-class" class="nav-link" data-scroll-target="#make-something-happen-creating-a-class">Make Something Happen: Creating a Class</a></li>
  </ul></li>
  <li><a href="#use-the-contact-class-in-the-tiny-contacts-program" id="toc-use-the-contact-class-in-the-tiny-contacts-program" class="nav-link" data-scroll-target="#use-the-contact-class-in-the-tiny-contacts-program">Use the <code>Contact</code> class in the Tiny Contacts Program</a>
  <ul>
  <li><a href="#code-analysis-the-class-based-find_contact-function" id="toc-code-analysis-the-class-based-find_contact-function" class="nav-link" data-scroll-target="#code-analysis-the-class-based-find_contact-function">Code Analysis: The class-based <code>find_contact</code> function</a></li>
  <li><a href="#exercise-duplicate-names" id="toc-exercise-duplicate-names" class="nav-link" data-scroll-target="#exercise-duplicate-names">Exercise: Duplicate Names</a></li>
  </ul></li>
  <li><a href="#edit-contacts" id="toc-edit-contacts" class="nav-link" data-scroll-target="#edit-contacts">Edit Contacts</a>
  <ul>
  <li><a href="#refactor-the-tiny-contacts-program" id="toc-refactor-the-tiny-contacts-program" class="nav-link" data-scroll-target="#refactor-the-tiny-contacts-program">Refactor the Tiny Contacts Program</a>
  <ul class="collapse">
  <li><a href="#code-analysis-the-refactored-find_contact-function" id="toc-code-analysis-the-refactored-find_contact-function" class="nav-link" data-scroll-target="#code-analysis-the-refactored-find_contact-function">Code Analysis: The refactored <code>find_contact</code> function</a></li>
  </ul></li>
  <li><a href="#contact-objects-and-references" id="toc-contact-objects-and-references" class="nav-link" data-scroll-target="#contact-objects-and-references">Contact Objects and References</a>
  <ul class="collapse">
  <li><a href="#code-analysis-understanding-lists-and-references" id="toc-code-analysis-understanding-lists-and-references" class="nav-link" data-scroll-target="#code-analysis-understanding-lists-and-references">Code Analysis: Understanding Lists and References</a></li>
  <li><a href="#immutability" id="toc-immutability" class="nav-link" data-scroll-target="#immutability">Immutability</a></li>
  </ul></li>
  <li><a href="#edit-a-contact" id="toc-edit-a-contact" class="nav-link" data-scroll-target="#edit-a-contact">Edit a Contact</a></li>
  </ul></li>
  <li><a href="#save-contacts-in-a-file-using-pickle" id="toc-save-contacts-in-a-file-using-pickle" class="nav-link" data-scroll-target="#save-contacts-in-a-file-using-pickle">Save Contacts in a File using <code>pickle</code></a></li>
  <li><a href="#load-contacts-from-a-file-using-pickle" id="toc-load-contacts-from-a-file-using-pickle" class="nav-link" data-scroll-target="#load-contacts-from-a-file-using-pickle">Load Contacts from a file using <code>pickle</code></a>
  <ul>
  <li><a href="#code-analysis-loading-data-using-pickle" id="toc-code-analysis-loading-data-using-pickle" class="nav-link" data-scroll-target="#code-analysis-loading-data-using-pickle">Code Analysis: Loading Data using <code>pickle</code></a></li>
  </ul></li>
  <li><a href="#add-save-and-load-to-tiny-contacts" id="toc-add-save-and-load-to-tiny-contacts" class="nav-link" data-scroll-target="#add-save-and-load-to-tiny-contacts">Add <code>save</code> and <code>load</code> to Tiny Contacts</a>
  <ul>
  <li><a href="#code-analysis-saving-and-loading-contacts" id="toc-code-analysis-saving-and-loading-contacts" class="nav-link" data-scroll-target="#code-analysis-saving-and-loading-contacts">Code Analysis: Saving and Loading Contacts</a></li>
  </ul></li>
  <li><a href="#setup-class-instances" id="toc-setup-class-instances" class="nav-link" data-scroll-target="#setup-class-instances">Setup Class Instances</a>
  <ul>
  <li><a href="#the-python-initializer-method" id="toc-the-python-initializer-method" class="nav-link" data-scroll-target="#the-python-initializer-method">The Python Initializer Method</a>
  <ul class="collapse">
  <li><a href="#make-something-happen-create-an-initializer" id="toc-make-something-happen-create-an-initializer" class="nav-link" data-scroll-target="#make-something-happen-create-an-initializer">Make Something Happen: Create an Initializer</a></li>
  <li><a href="#code-analysis-parameters-and-the-__init__-method" id="toc-code-analysis-parameters-and-the-__init__-method" class="nav-link" data-scroll-target="#code-analysis-parameters-and-the-__init__-method">Code Analysis: Parameters and the <code>__init__</code> method</a></li>
  </ul></li>
  <li><a href="#use-default-arguments-in-a-constructor" id="toc-use-default-arguments-in-a-constructor" class="nav-link" data-scroll-target="#use-default-arguments-in-a-constructor">Use Default Arguments in a Constructor</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#dictionaries" id="toc-dictionaries" class="nav-link" data-scroll-target="#dictionaries">Dictionaries</a>
  <ul>
  <li><a href="#creating-a-dictionary" id="toc-creating-a-dictionary" class="nav-link" data-scroll-target="#creating-a-dictionary">Creating a Dictionary</a></li>
  <li><a href="#dictionary-management" id="toc-dictionary-management" class="nav-link" data-scroll-target="#dictionary-management">Dictionary Management</a></li>
  <li><a href="#return-a-dictionary-from-a-function" id="toc-return-a-dictionary-from-a-function" class="nav-link" data-scroll-target="#return-a-dictionary-from-a-function">Return a Dictionary from a Function</a></li>
  <li><a href="#use-a-dictionary-to-store-contacts" id="toc-use-a-dictionary-to-store-contacts" class="nav-link" data-scroll-target="#use-a-dictionary-to-store-contacts">Use a Dictionary to Store Contacts</a></li>
  </ul></li>
  <li><a href="#exercise-the-final-tiny-contacts-refactor" id="toc-exercise-the-final-tiny-contacts-refactor" class="nav-link" data-scroll-target="#exercise-the-final-tiny-contacts-refactor">Exercise: The Final Tiny Contacts Refactor</a></li>
  <li><a href="#further-exercises" id="toc-further-exercises" class="nav-link" data-scroll-target="#further-exercises">Further Exercises</a>
  <ul>
  <li><a href="#music-tracks" id="toc-music-tracks" class="nav-link" data-scroll-target="#music-tracks">Music Tracks</a></li>
  <li><a href="#recipe-register" id="toc-recipe-register" class="nav-link" data-scroll-target="#recipe-register">Recipe Register</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#questions-and-answers" id="toc-questions-and-answers" class="nav-link" data-scroll-target="#questions-and-answers">Questions and Answers</a></li>
  </ul>
<div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/flempriere/BeginToCodeWithPython/" target="_blank"><i class="bi bi-github"></i>GitHub Repo</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html">Advanced Programming</a></li><li class="breadcrumb-item"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09.html">Chapter 9: Use Classes to Store Data</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Chapter 9: Use Classes to Store Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<section id="make-a-tiny-contacts-app" class="level3">
<h3 class="anchored" data-anchor-id="make-a-tiny-contacts-app">Make a Tiny Contacts App</h3>
<ul>
<li><p>Let’s develop a lightweight program to store contact details</p>
<ol type="1">
<li>Names</li>
<li>Addresses</li>
<li>Telephone Numbers</li>
</ol></li>
<li><p>We storyboard the interface</p>
<pre class="text"><code>  Tiny Contacts

  1. New Contact
  2. Find Contact
  3. Exit Program

  Enter your command:</code></pre></li>
<li><p>We then want to extend the storyboard to the different interface options</p>
<pre class="text"><code>  Create new contact

  Enter the contact name: Rob Miles
  Enter the contact address: 18 Pussycat Mews, London, NE1 410S
  Enter the contact phone: +44(1234) 56789

  Contact record stored for Rob Miles</code></pre></li>
<li><p>The matching storyboard for find is then,</p>
<pre class="text"><code>  Find Contact

  Enter the contact name: Rob Miles
  Name: Rob Miles
  Address: 18 Pussycat Mews, London, NE1 410S
  Phone: +44(1234) 56789</code></pre>
<ul>
<li><p>With a matching storyboard for a contact not existing</p>
<pre class="text"><code>    Find Contact

    Enter the contact name: Fred Bloggs
    This name was not found</code></pre></li>
</ul></li>
</ul>
<section id="make-a-prototype" class="level4">
<h4 class="anchored" data-anchor-id="make-a-prototype">Make a Prototype</h4>
<ul>
<li>We start by making a prototype
<ul>
<li>We stub out the functions with mock messages</li>
</ul></li>
<li>This is good for demoing to the customer for their feedback
<ul>
<li>Also helps to start working out how the structure should flow</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Example 9.1 Tiny Contacts Prototype</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simple stub implementation of the Tiny Contacts Prototype</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="im">import</span> BTCInput</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> new_contact():</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">      Creates and adds a new contact to the contact book</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Create the new contact"</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>      BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>      BTCInput.read_text(<span class="st">"Enter the contact address: "</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>      BTCInput.read_text(<span class="st">"Enter the contact phone: "</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> find_contact():</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">      Displays the contact matching a user-specified name</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">      Prompts the user for a name, and searches the contacts list.</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">      If the contact is found in the list, their full contact details</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">      are displayed</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Find contact"</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>      name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> name <span class="op">==</span> <span class="st">"Rob Miles"</span>:</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Name: Rob Miles"</span>)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Address: 18 Pussycat News, London, NE1 410S"</span>)</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Phone: +44(1234) 56789"</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"This name was not found."</span>)</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>  menu <span class="op">=</span> <span class="st">"""Tiny Contacts</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a><span class="st">  1. New Contact</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="st">  2. Find Contact</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a><span class="st">  3. Exit Program</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="st">  Enter your command:"""</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>      command <span class="op">=</span> BTCInput.read_int_ranged(prompt<span class="op">=</span>menu, min_value<span class="op">=</span><span class="dv">1</span>, max_value<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> command <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>          new_contact()</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>          find_contact()</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>          <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Unexpected command id found: "</span> <span class="op">+</span> <span class="bu">str</span>(command))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<section id="code-analysis-the-contacts-application-prototype" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-the-contacts-application-prototype">Code Analysis: The Contacts Application Prototype</h5>
<p><em>The code above doesn’t introduce any new concepts, but it’s worth examining in detail to make sure you understand how all the parts work. Work through the following questions.</em></p>
<ol type="1">
<li><p><em>Is this code familiar?</em></p>
<ul>
<li>It should be!, It is very similar to the <a href="../../01_ProgrammingFundamentals/05_MakingDecisions/Chapter_05.html#use-decisions-to-make-an-application">ride-selector</a> and <a href="../../01_ProgrammingFundamentals/08_StoringCollectionsOfData/Chapter_08.html#lists-and-tracking-sales">Ice Cream Sales</a> programs</li>
<li>This menu structure is very common for imperative programs</li>
</ul></li>
<li><p><em>The value returned by the</em> <code>read_text</code> <em>functions are ignored by the program. Is this legal?</em></p>
<ul>
<li>Yes, it is perfectly legal.</li>
<li><code>read_text</code> is from the <a href="../../01_ProgrammingFundamentals/07_UsingFunctions/Chapter_07.html#build-reusable-functions">BTCInput</a> library, it returns a user-provided string
<ul>
<li>We have yet to decide how we store this, so we simply discard it</li>
<li>We emulate the behaviour of getting a contact, but not the process of storing it yet</li>
</ul></li>
</ul></li>
<li><p><em>How does the program stop?</em></p>
<ul>
<li>The main loop contains a special option that is used for exiting the program. This is achieved by calling <code>break</code> to get out of the loop, after which the program will finish</li>
</ul></li>
<li><p><em>Isn’t the prototype a bit basic? Why don’t you make it store data?</em></p>
<ul>
<li>The prototype is not designed to be functional
<ul>
<li>We minimise the initial work so that if the customer backs out we haven’t wasted too much time</li>
<li>We want to make it clear that the program is a prototype, so that the customer won’t immediately want to use it</li>
</ul></li>
</ul></li>
<li><p><em>How is the telephone number stored?</em></p>
<ul>
<li>Our plan is store the number as a string</li>
<li>While referred to as a number, telephone numbers typically have additional characters that make them much more like strings (e.g.&nbsp;+)</li>
</ul></li>
</ol>
</section>
</section>
<section id="store-contact-details-in-separate-lists" class="level4">
<h4 class="anchored" data-anchor-id="store-contact-details-in-separate-lists">Store Contact Details in Separate Lists</h4>
<ul>
<li><p>Start with storing Contact Details</p></li>
<li><p>Simplest implementation is to maintain a list for each different type of information we store</p>
<ul>
<li>the <span class="math inline">\(i\)</span>-th contact them has it’s details in the <span class="math inline">\(i\)</span>-th index of each list</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>  names <span class="op">=</span> []</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  addresses <span class="op">=</span> []</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  telephones <span class="op">=</span> []</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> new_contact():</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">      Creates and adds a new contact to the contact book</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Create the new contact"</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>      names.append(BTCInput.read_text(<span class="st">"Enter the contact name: "</span>))</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      addresses.append(BTCInput.read_text(<span class="st">"Enter the contact address: "</span>))</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      telephones.append(BTCInput.read_text(<span class="st">"Enter the contact phone: "</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>To find items we then get the index from the <code>names</code> list and use that to access the corresponding indices in the <code>addresses</code> and <code>telephones</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> find_contact():</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Displays the contact matching a user-specified name</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Prompts the user for a name, and searches the contacts list.</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">      If the contact is found in the list, their full contact details</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">      are displayed</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Find contact"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.strip()</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.lower()</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>      name_index <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> name <span class="kw">in</span> names:</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> name.strip()</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> name.lower()</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> name <span class="op">==</span> search_name:</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>              <span class="cf">break</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>          name_index <span class="op">=</span> name_index <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> name_position <span class="op">&lt;</span> <span class="bu">len</span>(names):</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Name: "</span>, names[name_index])</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Address: "</span>, addresses[name_index])</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"Telephone: "</span>, telephones[name_index])</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"This name was not found"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>You can view the complete program all put together in <a href="./Examples/02_TinyContactsParallelLists/TinyContactsParallelLists.py">TinyContactsParallelLists.py</a></p></li>
</ul>
<section id="code-analysis-the-find_contact-function" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-the-find_contact-function">Code Analysis: The <code>find_contact</code> Function</h5>
<p><em>The</em> <code>find_contact</code> <em>function is probably one of the more sophisticated pieces of code we’ve written. Work through the following questions to make sure you understand what is going on.</em></p>
<ol type="1">
<li><p><em>How does this code work?</em></p>
<ul>
<li>We look through the <code>names</code> list until we find a match</li>
<li>Once we’ve found it we can immediately stop looking
<ul>
<li>Keeping track of the index that we’ve been looking at</li>
</ul></li>
</ul></li>
<li><p><em>What is the</em> <code>name_index</code> <em>variable used for?</em></p>
<ul>
<li>The <code>name_position</code> variable is used to track which index of the <code>names</code> list matches the name we’re trying to find</li>
<li>We use this to then grab the address and phone from the <code>addresses</code> and <code>telephones</code> arrays</li>
<li>This technique is called <em>parallel lists</em></li>
</ul></li>
<li><p><em>How does the function know if a name has been found?</em></p>
<ul>
<li>If we reach the end of the list without finding a match, then <code>name_index</code> ends the loop as one past the actual last valid index of the loop
<ul>
<li>We can check this with <code>len</code></li>
<li>We use an <code>if</code> condition to check this</li>
</ul></li>
</ul></li>
<li><p><em>What do the calls of</em> <code>strip</code> <em>and</em> <code>lower</code> <em>do?</em></p>
<ul>
<li>These functions normalise the input, so that any extra whitespace or variations in upper and lower case are removed</li>
</ul></li>
<li><p><em>Can we save the user from having to type in all the names when they search?</em></p>
<ul>
<li><p>Yes, we can. We could use <code>startswith</code> to find a name that starts with whatever the user inputs</p></li>
<li><p>This means they might only need to put in the first name</p></li>
<li><p>There are more sophisticated search techniques that we could use, but they are outside the scope of this discussion</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> name.startswith(search_name):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>The above is integrated into the complete program in <a href="./Examples/03_TinyContactsQuickSearch/TinyContactsQuickSearch.py">TinyContactsQuickSearch.py</a></li>
</ul></li>
</ul></li>
</ol>
</section>
</section>
<section id="use-a-class-to-store-contact-details" class="level4">
<h4 class="anchored" data-anchor-id="use-a-class-to-store-contact-details">Use a Class to Store Contact Details</h4>
<ul>
<li>An issue with this set-up is we have to ensure that the parallel lists stay aligned</li>
<li>For example if we sort the <code>names</code> list alphabetically, we have to ensure we make the same transformations to the <code>addresses</code> and <code>telephones</code> lists</li>
<li>We instead would prefer to have <em>one</em> object or <em>container</em> that holds all three values together</li>
<li>One option is to use a tuple or a list
<ul>
<li>But then we have to remember how values are stored</li>
</ul></li>
<li>Alternative is the <em>class</em></li>
<li>In object-oriented programming we use <em>classes</em> to define and construct <em>objects</em>
<ul>
<li>A class is a type, an object is the instance</li>
</ul></li>
</ul>
<section id="make-something-happen-creating-a-class" class="level5">
<h5 class="anchored" data-anchor-id="make-something-happen-creating-a-class">Make Something Happen: Creating a Class</h5>
<p><em>Open the python interpreter and work through the following steps and questions to understand classes</em></p>
<p><em>Enter the statements below</em></p>
<div id="21e87d22" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Contact:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Stores Contact Information</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Attributes</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">    name : str</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">        Contact Name</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">    address : str</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Contact's postal or street address.</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">    telephone : str</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">        Contact phone number (stored as a string).</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><em>The line</em> <code>class Contact:</code> <em>begins a class definition</em> - <em>The class contents is given as an indented block</em> - <em>We use</em> <code>pass</code> <em>To make an empty placeholder class</em></p>
<ol type="1">
<li><p><em>Why does the name</em> <code>Contact</code> <em>begin with a capital letter?</em></p>
<ul>
<li>It’s convention, in python
<ul>
<li>Variables and functions start with lowercase letters</li>
<li>Classes start with uppercase letters</li>
</ul></li>
</ul></li>
<li><p><em>Why does the</em> <code>Contact</code> <em>class contain a Python</em> <code>pass</code> <em>statement?</em></p>
<ul>
<li><p>The class definition expects an indented block</p></li>
<li><p>We haven’t yet decided the contents of the class so we use <code>pass</code> to give an placeholder statement</p></li>
<li><p><em>We can create an instance of a</em> <code>Contact</code> <em>with</em></p>
<div id="8e46425a" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> Contact()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
</ul></li>
<li><p><em>This looks like a function call. Are we calling a function here?</em></p>
<ul>
<li>Technically this is a call to a function called a constructor</li>
<li>Which is responsible for creating an instance of a <code>Contact</code></li>
<li>By using capital letters it’s clear that this is an object instantiation</li>
</ul></li>
<li><p><em>What’s an instance?</em></p>
<ul>
<li><p>An instance is the <strong>realisation</strong> of a class</p></li>
<li><p>Class is the design, object is the actual thing</p></li>
<li><p>You can add data attributes to an instance</p>
<div id="78223c8b" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>  x.name <span class="op">=</span> <span class="st">"Rob Miles"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
</ul></li>
<li><p><em>What’s a data attribute?</em></p>
<ul>
<li><p>Provide information about a specific instance</p></li>
<li><p>For a contact we would want it to have <code>name</code>, <code>address</code>, and <code>phone</code></p></li>
<li><p>methods can also be thought of as attributes</p></li>
<li><p>You can use and manipulate data attributes</p>
<div id="cde335d5" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x.name)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  x.name <span class="op">=</span> x.name <span class="op">+</span> <span class="st">" is a star"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x.name)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rob Miles
Rob Miles is a star</code></pre>
</div>
</div></li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Attributes in Python classes can be confusing</strong></p>
<p>The ability to add attributes to an instance is not common across programming languages. For example Java, c# and c++ all prevent this.</p>
<p>In these languages a class definition must be fully specified including the attributes before it can be instantiated.</p>
<p>Both this static definition and pythons dynamic definitions have it’s advantages and disadvantages. The latter is easier for prototyping and development, but the former is much more type-safe</p>
</div>
</div>
</section>
</section>
<section id="use-the-contact-class-in-the-tiny-contacts-program" class="level4">
<h4 class="anchored" data-anchor-id="use-the-contact-class-in-the-tiny-contacts-program">Use the <code>Contact</code> class in the Tiny Contacts Program</h4>
<ul>
<li><p>We can use the <code>Contact</code> class to eliminate the needs for multiple lists (see <a href="./Examples/04_TinyContactsClass/TinyContactsClass.py">TinyContactsClass.py</a> highlighted below)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>  contacts <span class="op">=</span> []</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> new_contact():</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">      Creates and adds a new contact to the contact book</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">      Contact : class for storing contact information</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Create the new contact"</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>      new_contact <span class="op">=</span> Contact()</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>      new_contact.name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>      new_contact.address <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact address: "</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>      new_contact.telephone <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact phone: "</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>      contacts.append(new_contact)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> find_contact():</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">      Displays the contact matching a user-specified name</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">      Prompts the user for a name, and searches the contacts list.</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">      If the contact is found in the list, their full contact details</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">      are displayed</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co">      Notes</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="co">      -----</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">      Matches any name prefixed by the search name</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Find contact"</span>)</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.strip()</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.lower()</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>      result <span class="op">=</span> <span class="va">None</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> contact <span class="kw">in</span> contacts:</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> contact.name</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> name.strip()</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> name.lower()</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> name.startswith(search_name):</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>              result <span class="op">=</span> contact</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>              <span class="cf">break</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<section id="code-analysis-the-class-based-find_contact-function" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-the-class-based-find_contact-function">Code Analysis: The class-based <code>find_contact</code> function</h5>
<p><em>Answer the following questions about the new</em> <code>find_contact</code> <em>implementation</em></p>
<ol type="1">
<li><p><em>How does this code work?</em></p>
<ul>
<li>This functions like the previous search, we look for a contact that has a match to the search name</li>
<li>Rather than use the index of the match, we set a reference to the object itself iin the variable* <code>result</code></li>
<li>We use <code>None</code> to indicate no match was found</li>
</ul></li>
<li><p><em>What does the value</em> <code>None</code> <em>mean?</em></p>
<ul>
<li><code>None</code> in python is used to refer to a value that does not exist</li>
<li>Semantically here it is used to indicate that no match was found</li>
</ul></li>
</ol>
</section>
<section id="exercise-duplicate-names" class="level5">
<h5 class="anchored" data-anchor-id="exercise-duplicate-names">Exercise: Duplicate Names</h5>
<p><em>This program has a fault in that if multiple contacts have the same name as an existing one only the first one will be returned. Modify the program to correct this problem</em></p>
<p>We have two solutions that we could use,</p>
<ol type="1">
<li>When a duplicate name is encountered we simply replace the old one
<ul>
<li>This is the simplest approach, however it is quite common for people to have the same names</li>
</ul></li>
<li>The program returns all the valid matches
<ul>
<li><p>This is a bit more complicated</p></li>
<li><p>Our search function now rather than returning one <code>Contact</code> returns a list containing all matching Contacts</p></li>
<li><p>We only have to change the <code>find_contacts</code> function (the full code is given in <a href="./Exercises/01_TinyContactsDuplicates/TinyContactsDuplicates.py">TinyContactsDuplicates.py</a>)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> find_contact():</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Displays the contact matching a user-specified name</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Prompts the user for a name, and searches the contacts list.</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">      If the contact is found in the list, their full contact details</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">      are displayed</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Find contact"</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.strip()</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.lower()</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      results <span class="op">=</span> []</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> contact <span class="kw">in</span> contacts:</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> contact.name</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> name.strip()</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> name.lower()</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> name.startswith(search_name):</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>              results.append(contact)</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="bu">len</span>(results) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> result <span class="kw">in</span> results:</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"Name: "</span>, result.name)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"Address: "</span>, result.address)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>              <span class="bu">print</span>(<span class="st">"Telephone: "</span>, result.telephone, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>          <span class="bu">print</span>(<span class="st">"This name was not found"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Look for problems when you receive the specification</strong></p>
<p>When you discuss a specification there’s no guarantee ambiguities like how to deal with duplicate names will be discussed. You will need to consider cases like this that may arise and define the behaviour for them. This behaviour will need to match what the client expects to happen. The best way to make sure that happens is to make sure that is included in the specification</p>
</div>
</div>
</section>
</section>
<section id="edit-contacts" class="level4">
<h4 class="anchored" data-anchor-id="edit-contacts">Edit Contacts</h4>
<ul>
<li><p>It might be quite common for contacts to change their contact details</p></li>
<li><p>We would like to be able to update an existing contact</p></li>
<li><p>The new interface</p>
<pre class="text"><code>  Tiny Contacts

  1. New Contact
  2. Find Contact
  3. Edit Contact
  4. Exit Program

  Enter your command:</code></pre></li>
<li><p>We then storyboard out the program,</p>
<ul>
<li>Our storyboard will be slightly different to the book implementation to better handle duplicates</li>
</ul>
<pre class="text"><code>  Edit Contact
  Enter the contact name: Rob
  Found 1 match

  Name: Robert Miles
  Address: 18 Pussycat News, London, NE1 410S
  Telephone: +44(1234) 56789

  Edit this contact? (1 - Yes, 0 - No): 1

  Enter new name or . to leave unchanged: .
  Enter new address or . to leave unchanged: .
  Enter new telephone or . to leave unchanged: +44 (1482) 465079</code></pre></li>
<li><p>The edit program first needs us to find search for the contact we wish to edit</p></li>
<li><p>We then report the number of matches found</p></li>
<li><p>For each match, we then print the current details and ask the user if this is the contact they want to edit</p></li>
<li><p>We then give the user the option of editing each attribute or leaving it unchanged with <code>.</code></p></li>
</ul>
<section id="refactor-the-tiny-contacts-program" class="level5">
<h5 class="anchored" data-anchor-id="refactor-the-tiny-contacts-program">Refactor the Tiny Contacts Program</h5>
<ul>
<li><p>Our program is starting to get some structure</p>
<ul>
<li>Good time to consider a refactor</li>
</ul></li>
<li><p>We now have two features that need to search for a contact by name</p>
<ol type="1">
<li>Find and <em>display</em> a contact</li>
<li>Find and <em>edit</em> a contact</li>
</ol></li>
<li><p>One option is to copy the <code>find_contact</code> for <code>edit_contact</code> and replace the display code by the edit code</p>
<ul>
<li>Now we have to maintain two different copies of the search functionality</li>
<li>Easy for these to become desynchronised if in the future we want to change how the search works (or need to fix a book)</li>
</ul></li>
<li><p>For our refactor, we’ll do the following</p>
<ol type="1">
<li>Factor out a core <code>find_contacts</code> function that takes a search name and returns the matches</li>
<li>Change the name of the old <code>find_contact</code> function to <code>display_contacts</code> function</li>
</ol></li>
<li><p>Here’s the book’s implementation, (we’ll use something different in <a href="./Examples/05_TinyContactsRefactor/TinyContactsRefactor.py">our implementation</a> to account for duplicates)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> find_contact(search_name):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Finds the contacts with the matching name</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">      search_name : str</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">          Name to search for (uses prefix matching)</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">      list[Contact]</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">          list of contacts matching the `search_name`, if no</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">          matches exist the list is empty</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>      search_name <span class="op">=</span> search_name.strip().lower()</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>      result <span class="op">=</span> <span class="va">None</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> contact <span class="kw">in</span> contacts:</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>          name <span class="op">=</span> contact.name.strip().lower()</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> name.startswith(search_name):</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>              <span class="cf">return</span> result</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="va">None</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<section id="code-analysis-the-refactored-find_contact-function" class="level6">
<h6 class="anchored" data-anchor-id="code-analysis-the-refactored-find_contact-function">Code Analysis: The refactored <code>find_contact</code> function</h6>
<p><em>Answer the following questions, about this new version of</em> <code>find_contact</code></p>
<ol type="1">
<li><p><em>Why does the function contain two</em> <code>return</code> <em>statements?</em></p>
<ul>
<li>Only one return will actually be executed</li>
<li>If a match is found then the match is returned</li>
<li>If not then the program will exit the <code>for</code> loop at which point it encounters the second return and returns <code>None</code></li>
</ul></li>
<li><p><em>What would happen if another program tried to use the return value of the</em> <code>find_contact</code> <em>function, and the</em> <code>find_contact</code> <em>function had returned</em> <code>None</code></p>
<ul>
<li><p>Depends on what the function tries to do</p></li>
<li><p>If the function tried to something with that value, then an exception is thrown</p>
<div id="e054a8cf" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> <span class="va">None</span> <span class="co">#emulate failed find from find_contact</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x.address)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[5]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> x = <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-style:italic;color:rgb(95,135,135)">#emulate failed find from find_contact</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">x</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">address</span>)

<span class="ansi-red-fg">AttributeError</span>: 'NoneType' object has no attribute 'address'</pre>
</div>
</div>
</div></li>
<li><p>Since <code>find_contact</code> documents that it can return <code>None</code> it is the responsibility of the consumer of the function to ensure they don’t misuse the <code>None</code></p></li>
</ul></li>
</ol>
</section>
</section>
<section id="contact-objects-and-references" class="level5">
<h5 class="anchored" data-anchor-id="contact-objects-and-references">Contact Objects and References</h5>
<ul>
<li><code>find_contact</code> searches through contacts for a match</li>
<li>Returned object is a <em>reference</em> to the memory object</li>
<li>e.g.&nbsp;<code>rob = find_contact("Rob Miles")</code> graphically looks like,</li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
config:
  flowchart:
    htmlLabels: false
---


flowchart TD
    A@{shape: tag-doc, label: "Rob"}
    B@{shape: div-rect, label: "Name: Rob Miles
    Address: 18 Pussycat Mews, London, NE 410S
    Telephone: +44(1234) 5678"}

    A--&gt;B
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>We have multiple references to an object, e.g.&nbsp;<code>test = rob</code> creates a new reference <code>test</code></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
config:
  flowchart:
    htmlLabels: false
---


flowchart TD
    A@{shape: tag-doc, label: "Rob"}
    B@{shape: div-rect, label: "Name: Rob Miles
    Address: 18 Pussycat Mews ..
    Telephone: +44(1234) 5678"}
    C@{shape: tag-doc, label: "test"}

    A--&gt;B
    C--&gt;B
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>Changes from one reference to the underlying memory object are seen in the other references</li>
<li>e.g.&nbsp;<code>test.name = "Robert Miles Man of Mystery"</code> gives the state as,</li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
config:
  flowchart:
    htmlLabels: false
---


flowchart TD
    A@{shape: tag-doc, label: "Rob"}
    B@{shape: div-rect, label: "Name: Rob Miles Man ...
    Address: 18 Pussycat Mews ..
    Telephone: +44(1234) 5678"}
    C@{shape: tag-doc, label: "test"}

    A--&gt;B
    C--&gt;B
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>This behaviour is sometimes referred to as shallow copying since we have multiple copies of the object, but they are not distinct, changes are propagated between all the references
<ul>
<li>There is only one memory object</li>
</ul></li>
</ul>
<section id="code-analysis-understanding-lists-and-references" class="level6">
<h6 class="anchored" data-anchor-id="code-analysis-understanding-lists-and-references">Code Analysis: Understanding Lists and References</h6>
<p><em>The figure below illustrates how lists and references work. It shows a Tiny Contacts data store with three contacts registered. Each of the tags in the contacts list refers to a different Contact instance in the memory. Work through the following questions to develop your understanding of references</em></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">---
config:
flowchart:
    htmlLabels: false
---


    flowchart TD

        subgraph Contacts
            A@{shape: tag-doc, label: "0"}
            B@{shape: tag-doc, label: "1"}
            C@{shape: tag-doc, label: "2"}
        end

        A1@{shape: div-rect, label: "Name: Fred Smith
        Address: 1605 Main St,
        New York
        Telephone: (560) 567-5209"}

        B1@{shape: div-rect, label: "Name: Joe Bloggs
        Address: 2312 Pine Street,
        Seattle
        Telephone: (453) 545-1232"}

        C1@{shape: div-rect, label: "Name: Rob Miles
        Address: 18 Pussycat Mews,
         London, NE1 410S
        Telephone: +44(1234) 5678"}
        D@{shape: tag-doc, label: "rob"}

        A--&gt;A1
        B--&gt;B1
        C--&gt;C1
        D--&gt;C1
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ol type="1">
<li><p><em>The diagram contains four references. How many data objects does it contain?</em></p>
<ul>
<li>There are three data objects, the <code>Contact</code> items themselves</li>
<li>One (Rob Miles) is referenced by the list index <span class="math inline">\(2\)</span> <em>and</em> the variable <code>rob</code></li>
</ul></li>
<li><p><em>What would happen if the program performed the following statement?</em></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a> contacts[<span class="dv">0</span>] <span class="op">=</span> contacts[<span class="dv">1</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>The <span class="math inline">\(0\)</span> index in the list now references the same memory object as that in the <span class="math inline">\(1\)</span> index, the state now looks like,</li>
</ul></li>
</ol>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    subgraph Contacts
        A@{shape: tag-doc, label: "0"}
        B@{shape: tag-doc, label: "1"}
        C@{shape: tag-doc, label: "2"}
    end

    A1@{shape: div-rect, label: "Name: Fred Smith
    Address: 1605 Main St,
    New York
    Telephone: (560) 567-5209"}

    B1@{shape: div-rect, label: "Name: Joe Bloggs
    Address: 2312 Pine Street,
    Seattle
    Telephone: (453) 545-1232"}

    C1@{shape: div-rect, label: "Name: Rob Miles
    Address: 18 Pussycat Mews,
    London, NE1 410S
    Telephone: +44(1234) 5678"}
    D@{shape: tag-doc, label: "rob"}

    A--&gt;B1
    B--&gt;B1
    C--&gt;C1
    D--&gt;C1
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>Looping through the list would thus refer to the Joe Bloggs Contact twice</li>
<li>Note that we have now lost the reference to Fred Smith, <em>we can never get it back!</em>
<ul>
<li>Unreferenced memory objects will be removed by python in a process called <em>garbage collection</em></li>
</ul></li>
<li>References make it easy to work with large data objects
<ul>
<li>Avoid the need to create expensive copies</li>
</ul></li>
</ul>
</section>
<section id="immutability" class="level6">
<h6 class="anchored" data-anchor-id="immutability">Immutability</h6>
<ul>
<li><p>Everything in Python is an object</p></li>
<li><p><code>30</code> is an instance of an <code>int</code></p></li>
<li><p>The following creates a <em>reference</em> <code>age</code> to <code>30</code></p>
<div id="735b9090" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>  age <span class="op">=</span> <span class="dv">30</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>Which we can visualise,</p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">    flowchart TD
        A@{shape: tag-doc, label: "age"}

        A1["`int
            30`"]

        A--&gt;A1
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><p>and verify,</p>
<div id="d0483014" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>  <span class="bu">type</span>(age)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>int</code></pre>
</div>
</div></li>
<li><p><code>type</code> is a built-in function</p>
<ul>
<li>Takes a reference as an argument</li>
<li>Returns the type of the referenced object</li>
</ul></li>
<li><p>Now, suppose we define another reference <code>temp</code> via</p>
<div id="4d7a0200" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>  temp <span class="op">=</span> age</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>Which we can again visualise as,</p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">    flowchart TD
        A@{shape: tag-doc, label: "age"}
        B@{shape: tag-doc, label: "temp"}

        A1["`int
            30`"]

        A--&gt;A1
        B--&gt;A1
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><p><code>age</code> and <code>temp</code> now refer to the same object instance</p></li>
<li><p>What happens if we assign <code>temp</code> a new value?</p>
<div id="42821c97" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>  temp <span class="op">=</span> <span class="dv">99</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(age)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(temp)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>30
99</code></pre>
</div>
</div></li>
<li><p>So we have the final state,</p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">    flowchart TD
        A@{shape: tag-doc, label: "age"}
        B@{shape: tag-doc, label: "temp"}

        A1["`int
            30`"]
        B1["`int
            99`"]

        A--&gt;A1
        B--&gt;B1
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li><p><code>age</code> has not been modified</p></li>
<li><p>Instead a new <code>int</code> with a value of <span class="math inline">\(99\)</span> was created</p></li>
<li><p>This is because <code>int</code> is an <em>immutable</em> type</p>
<ul>
<li>i.e.&nbsp;once an <code>int</code> has been created its value can’t be reassigned</li>
<li>Value assignments thus create a <em>new</em> instance of an <code>int</code></li>
</ul></li>
<li><p><code>string</code> is also an immutable type</p>
<div id="54579282" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>  name <span class="op">=</span> <span class="st">"Rob"</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  temp <span class="op">=</span> name</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"temp is"</span>, temp, <span class="st">"name is"</span>, name)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  temp <span class="op">=</span> <span class="st">"Fred"</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"temp is now"</span>, temp, <span class="st">"name is now"</span>, name)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>temp is Rob name is Rob
temp is now Fred name is now Rob</code></pre>
</div>
</div></li>
</ul>
<ol type="1">
<li><em>Why does python use immutable data types?</em>
<ul>
<li><p><em>For some procedures, like simple numerical calculations, treating variables as values is often the most desired approach, e.g.</em></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>  pi <span class="op">=</span> <span class="fl">3.1415</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> pi</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> <span class="fl">99.99</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We don’t want the above to accidentally change the value of the constant <code>pi</code></p></li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Programming Languages work with values differently</strong></p>
<p>Languages handle the distinction between references and values differently. References make it easy to work with large data as the objects remain stationary in memory. However value types make it easy to perform data manipulation with types such as <code>int</code>, <code>bool</code>, <code>float</code> and <code>string</code></p>
<p>C# has a similar concept of <em>value types</em>. Java has <em>primitive types</em>, C++ has <em>references</em>. Python implements <code>int</code>, <code>bool</code>, <code>float</code> and <code>string</code> are immutable types, and behave like values</p>
<p>Remember that the <code>tuple</code> collection type is also immutable</p>
</div>
</div>
</section>
</section>
<section id="edit-a-contact" class="level5">
<h5 class="anchored" data-anchor-id="edit-a-contact">Edit a Contact</h5>
<ul>
<li><p>Once we have found a reference we can read and modify the attributes</p></li>
<li><p>Our program implementation, uses a simple interface optionally modify each attribute one at a time</p>
<ul>
<li>Need to read a user string for each modifiable attribute</li>
<li><a href="./Examples/06_TinyContactsWithEdit/TinyContactsWithEdit.py">Our duplicates implementation</a> also needs to read an int to indicate if we want to modify a specific contact (and print the current contact)</li>
</ul></li>
<li><p>The book implementation is,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> edit_contact():</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">"""</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">  Reads in a name to search for an then allows the user</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co">  to edit the details of that contact. If there is no</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co">  contact, the function displays a message indicating</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co">  that the name was not found</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co">  """</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Edit Contact"</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  search_name <span class="op">=</span> read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  contact<span class="op">=</span>find_contact(search_name)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> contact <span class="op">!=</span> <span class="va">None</span>:</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Name: "</span>, contact.name)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>      new_name <span class="op">=</span> read_text(<span class="st">"Enter new name or . to leave unchanged"</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> new_name <span class="op">!=</span> <span class="st">'.'</span>:</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>          contact.name <span class="op">=</span> new_name</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>      new_address <span class="op">=</span> read_text(<span class="st">"Enter new address or . to leave unchanged"</span>)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> new_address <span class="op">!=</span> <span class="st">'.'</span>:</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>          contact.address <span class="op">=</span> new_address</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>      new_phone <span class="op">=</span> read_text(<span class="st">"Enter new phone or . to leave unchanged"</span>)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> new_phone <span class="op">!=</span> <span class="st">'.'</span>:</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>          contact.telephone <span class="op">=</span> new_phone</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"This name was not found"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Editing as configured performs modifications of the live data</p>
<ul>
<li>Referred to as <em>in-place</em> because it occurs on the original object not a copy</li>
</ul></li>
<li><p>Can’t easily rollback if there is an error or ask the user wishes to cancel</p></li>
<li><p>To do so, <code>edit_contact</code> would need to work on a copy of the data</p></li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Missing Attributes</strong></p>
<p><code>edit_function</code> calls <code>find_contact</code> to match a given name. <code>find_contact</code> returns <code>None</code> if no match is found. However, another possible fault in a contact is returned without all the attributes defined, e.g.&nbsp;a contact with a name but no address. Then the program would fail, as the code below demonstrates</p>
<div id="bdda9419" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Contact:</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># fake contact "returned without address"</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>contact <span class="op">=</span> Contact()</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>contact.name <span class="op">=</span> <span class="st">"Hello"</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Attempt to access address</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"contact address is"</span>, contact.address)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[11]</span><span class="ansi-green-fg">, line 9</span>
<span class="ansi-green-fg">      6</span> contact.name = <span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">Hello</span><span class="ansi-yellow-fg">"</span>
<span class="ansi-green-fg">      8</span> <span style="font-style:italic;color:rgb(95,135,135)"># Attempt to access address</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">9</span> <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-fg">"</span><span class="ansi-yellow-fg">contact address is</span><span class="ansi-yellow-fg">"</span>, <span class="ansi-yellow-bg">contact</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">address</span>)

<span class="ansi-red-fg">AttributeError</span>: 'Contact' object has no attribute 'address'</pre>
</div>
</div>
</div>
<p>Some programming languages e.g.&nbsp;Java, C#, C++ check for these errors before a program executes. Python does not. This means that minor typos e.g.&nbsp;writing <code>address</code> instead of <code>address</code> can lead to runtime errors</p>
</div>
</div>
</section>
</section>
<section id="save-contacts-in-a-file-using-pickle" class="level4">
<h4 class="anchored" data-anchor-id="save-contacts-in-a-file-using-pickle">Save Contacts in a File using <code>pickle</code></h4>
<ul>
<li><p>We saw in <a href="../../01_ProgrammingFundamentals/08_StoringCollectionsOfData/Chapter_08.html#store-data-in-a-file">Chapter 8</a> that we can save and load data to files</p>
<ul>
<li>There we used a human-readable text representation</li>
</ul></li>
<li><p>We could replicate this for large class based structures</p>
<ul>
<li>e.g.&nbsp;write out all attributes as comma, separated values</li>
</ul></li>
<li><p>Python provides a process called <em>pickling</em> for storing large data structures</p>
<ul>
<li>pickled data is stored as <em>binary</em></li>
<li>Data is therefore computer-readable and more compressed than human text</li>
</ul></li>
<li><p>Pickling is done through the <code>pickle</code> library, import it to use it</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>  <span class="im">import</span> pickle</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>jpeg, mp3, zip are all different formats of binary data</p>
<ul>
<li>Commonly a <em>file extension</em> is used to identify what a binary file represents</li>
<li>e.g.
<ol type="1">
<li>myhouse.jpg</li>
<li>track1.mp3</li>
</ol></li>
<li>Different programs are written to work with different binary file formats</li>
</ul></li>
<li><p><code>.txt</code> defines a generic text file</p></li>
<li><p><code>.py</code> defines a text file that is valid python code</p></li>
<li><p>Technically text is also a binary file, just with those binary values associated to human-readable characters</p></li>
<li><p>Python programs can use the <code>b</code> mode flag to read files as binary, e.g.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>  out_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">"contacts.pickle"</span>, <span class="st">"wb"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>The above opens the file <code>contacts.pickle</code> for writing (<code>w</code>) as a binary file (<code>b</code>)</li>
<li><code>.pickle</code> indicates the file is a pickled python data object</li>
</ul></li>
<li><p>pickle supplies the <code>dump</code> function to write a data structure to a file</p>
<ul>
<li>The file must be opened for writing in binary</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>  pickle.dump(contacts, out_file)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li><code>contacts</code> is the variable to pickle</li>
<li><code>out_file</code> is the variable storing the file save the data to</li>
</ul></li>
<li><p>You can open and modify pickle files</p>
<ul>
<li>While they may contain some readable text, they will also contain a mix of improperly rendered binary
<ul>
<li>(Unless you have a specially set up text editor like a hexadecimal reader)</li>
</ul></li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./Examples/07_TinyContactsWithLoadAndSave/pickle_content.png" class="img-fluid figure-img"></p>
<figcaption>Pickled content of the Tiny Contacts app, a mix of human-readable characters and improperly rendered binary is displayed</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Be careful modifying pickle files by hand</strong></p>
<p>Pickle files are not designed to be human-readable. While most text editors will happily let you edit and save a pickle file this is very likely to end up in you breaking the binary format and the file no longer loading properly</p>
</div>
</div>
<ul>
<li><code>save_contacts</code> below saves the <code>contacts</code> list into a given file (passed as a path name)
<ul>
<li>As in <a href="../../01_ProgrammingFundamentals/08_StoringCollectionsOfData/Chapter_08.html#use-the-with-construction-to-tidy-up-file-access">Chapter 8 we use <code>with</code></a> to handle managing the file access</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_contacts(file_name):</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">"""</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">  Saves the contacts to the given file name</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">  Contacts are stored in binary as a pickled file</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">  Parameters</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">  ----------</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">  file_name : str</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">      string giving the path to the file to store the contacts data in</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">  Returns</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">  -------</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">  None</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">  Raises</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">  ------</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">      Exceptions are raised if contacts could not be saved</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co">  See Also</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co">  --------</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="co">  load_contacts : loads contacts from a pickled file</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co">  """</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"save contacts"</span>)</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">with</span> <span class="bu">open</span>(file_name, <span class="st">"wb"</span>) <span class="im">as</span> out_file:</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>      pickle.dump(contacts, out_file)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>This function does not perform any exception handling</li>
<li>This will cause the program to crash if the save fails
<ul>
<li>Probably fine for a program of this size</li>
<li><strong>Note:</strong> You should never hide a failed save from the user!</li>
</ul></li>
<li>If we wanted to handle exceptions, we would do that in the code outside <code>save_contacts</code></li>
</ul></li>
</ul>
</section>
<section id="load-contacts-from-a-file-using-pickle" class="level4">
<h4 class="anchored" data-anchor-id="load-contacts-from-a-file-using-pickle">Load Contacts from a file using <code>pickle</code></h4>
<ul>
<li><p>pickle provides <code>load</code> to read a pickle file</p>
<ul>
<li>returns the reconstructed data object</li>
<li>As a result, needs only the file</li>
</ul></li>
<li><p>file needs to be open for reading <code>r</code> and in binary mode <code>b</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> load_contacts(file_name):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Loads the contacts from the given file</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Contacts are stored in binary as a pickled file</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">      Parameters</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co">      ----------</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">      file_name : str</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co">          string giving the path to the file where the contacts data is stored</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co">          Contact detail is loaded into the global `contacts` value</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co">      Raises</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co">      ------</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co">          Exceptions if contacts failed to load</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="co">      save_contacts : saves contacts to a pickled file</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>      <span class="kw">global</span> contacts <span class="co">#connect to the global contacts variable</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"load contacts"</span>)</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>      <span class="cf">with</span> <span class="bu">open</span>(file_name, <span class="st">"rb"</span>) <span class="im">as</span> input_file:</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>          contacts<span class="op">=</span>pickle.load(input_file)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<section id="code-analysis-loading-data-using-pickle" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-loading-data-using-pickle">Code Analysis: Loading Data using <code>pickle</code></h5>
<p><em>Work through the following questions to make sure you understand how</em> <code>load_contacts</code> <em>works</em></p>
<ol type="1">
<li><p><em>What does the</em> <code>global contacts</code> <em>statement do? Why do we need it only in the</em> <code>load</code> <em>function and not the</em> <code>save</code> <em>function?</em></p>
<ul>
<li>The <code>load_contacts</code> function is used to modify the values of the <code>contacts</code> variable</li>
<li>The <code>contacts</code> holds all the current contacts, held in the program</li>
<li><code>save_contacts</code> needs the reference to find the list
<ul>
<li>Does not modify the list itself</li>
</ul></li>
<li><code>load_contacts</code> does modify the <code>contacts</code> list
<ul>
<li>Need to explicitly link to the global variable to write to it</li>
</ul></li>
</ul></li>
<li><p><em>How does the pickle</em> <code>load</code> <em>function know what kind of data to make when loading?</em></p>
<ul>
<li>The information is encoded in the pickle file</li>
<li>In a pickle file you should be able to identify the data attributes (<code>name</code> etc.) and their values</li>
<li>Also contains the class name</li>
<li><code>load</code> looks for matching classes in the program loading the data
<ul>
<li>Constructs object instances based on those classes</li>
<li>Means the class <code>Contact</code> must be defined before pickle is used to load any contact data</li>
</ul></li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Version Control</strong></p>
<p>Pickle is a tool called a <em>serializer</em> because it converts a data structure is a <em>serial stream</em> (i.e.&nbsp;ordered sequence of data) that can be sent to another program and/or stored in a file.</p>
<p>This introduces the need for <em>version control.</em> If the design of a class e.g.&nbsp;<code>Contact</code> (say we added an email attribute) then all previously pickled data may no longer load since the class definition is mismatched. To resolve this you need to version control both the version of the class and the pickled files so that data can be migrated (or converted) between versions</p>
</div>
</div>
</section>
</section>
<section id="add-save-and-load-to-tiny-contacts" class="level4">
<h4 class="anchored" data-anchor-id="add-save-and-load-to-tiny-contacts">Add <code>save</code> and <code>load</code> to Tiny Contacts</h4>
<ul>
<li><p>Let’s add the <code>save</code> and <code>load</code> functionality to the Tiny Contacts Program</p></li>
<li><p>There are two options for how we implement this,</p>
<ol type="1">
<li>The user manually declares they want to save and load</li>
<li>We hardcode a data file
<ul>
<li>Load from this file on program start</li>
<li>Save to this file as part of the exit process</li>
</ul></li>
</ol></li>
<li><p>For a small contacts app the user probably doesn’t want to manually have to handle saving and loading files</p></li>
<li><p>More likely to want to have it “just work”</p>
<ul>
<li>We’ll go with option 2</li>
</ul></li>
<li><p>The new interface now looks like below (see our <a href="./Examples/07_TinyContactsWithLoadAndSave/TinyContactsWithLoadAndSave.py">full implementation</a> which contains an <a href="./Examples/07_TinyContactsWithLoadAndSave/contacts.pickle">example pickle file</a>)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Example 9.7 Tiny Contacts with Load and Save</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="im">import</span> pickle</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Load contacts from file or create empty list if it fails to load</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  file_name <span class="op">=</span> <span class="st">"contacts.pickle"</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">try</span>:</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>      load_contacts(file_name)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">except</span>:</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Contacts file not found"</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>      contacts<span class="op">=</span>[]</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>      command <span class="op">=</span> BTCInput.read_int_ranged(prompt<span class="op">=</span>menu, min_value<span class="op">=</span><span class="dv">1</span>, max_value<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> command <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>          new_contact()</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>          display_contact()</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>          edit_contact()</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>          save_contacts(file_name) <span class="co">#save contacts on exit</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>          <span class="cf">break</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>          <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Unexpected value encountered"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
<section id="code-analysis-saving-and-loading-contacts" class="level5">
<h5 class="anchored" data-anchor-id="code-analysis-saving-and-loading-contacts">Code Analysis: Saving and Loading Contacts</h5>
<p><em>Consider the following questions about the code above</em></p>
<ol type="1">
<li><p><em>What happens if the</em> <code>load_contacts</code> <em>function raises an exception?</em></p>
<ul>
<li><code>load_contacts</code> raises an exception if the contacts file can’t be found, or if the <code>load</code> function in <code>pickle</code> fails</li>
<li>In this case the exception is caught, an error message is printed and an empty contacts list is created</li>
</ul></li>
<li><p><em>Why does the program not catch the exceptions raised by</em> <code>save_contacts</code><em>?</em></p>
<ul>
<li>You could add this if you wanted</li>
<li>If the program crashes, the user should probably expect the save failed</li>
<li>Since they were trying to quit anyway they probably don’t care</li>
<li>My implementation adds <code>try...except</code> block that prints an error message if the save fails (as the book suggests you consider)</li>
</ul></li>
<li><p><em>Why does the program use a variable for the file name of the pickled file?</em></p>
<ul>
<li>The contacts are held in a file called* <code>contacts.pickle</code></li>
<li>This file is used in two places* <code>load_contacts</code> and <code>save_contacts</code>
<ul>
<li>We could put the string literal in both places</li>
<li>Instead use a variable</li>
<li>Means we can change the file name in one place and the program works</li>
</ul></li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Avoiding Magic Constants</strong></p>
<p>A magic constant is a literal value that appears in multiple places in code without an apparent reason. For example if we just used <code>contacts.pickle</code> that would be a magic constant. The string is a constant but there is no context to explain what the value means. Magic constants are problematic because they are hard to find and if we want to change them we have to find all the places they’re used and then resolve the issue of does <em>this</em> <code>2</code> correspond to <em>this</em> magic constant or <em>another</em> magic constant</p>
<p>It is a good idea to instead put these constants in a variable so that we need only change the value in one place and we can clearly explain <em>what</em> the constant means</p>
</div>
</div>
</section>
</section>
<section id="setup-class-instances" class="level4">
<h4 class="anchored" data-anchor-id="setup-class-instances">Setup Class Instances</h4>
<ul>
<li><p>Tiny Contacts builds the <code>Contact</code> instance after we create one</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>  new_contact <span class="op">=</span> Contact()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  new_contact.name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  new_contact.address <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact address: "</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  new_contact.telephone <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact phone: "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>This makes the program fragile</p>
<ul>
<li>We could misspell an attribute</li>
<li>Forget to set one</li>
</ul></li>
<li><p>Ideally want to create a <code>Contact</code> and ensure values are set as part of creation</p></li>
<li><p>We can do so with a <em>Constructor</em>, a special method called to create the object</p>
<ul>
<li>Also sometimes called an <em>initializer</em> method</li>
</ul></li>
<li><p>A method attribute is like a data attribute but as an attached function</p></li>
</ul>
<section id="the-python-initializer-method" class="level5">
<h5 class="anchored" data-anchor-id="the-python-initializer-method">The Python Initializer Method</h5>
<ul>
<li>Held inside a python class</li>
<li>Named <code>__init__</code>
<ul>
<li>python uses “dunder methods” marked <code>__function_name__</code> to mark special functions defined by the language</li>
</ul></li>
</ul>
<section id="make-something-happen-create-an-initializer" class="level6">
<h6 class="anchored" data-anchor-id="make-something-happen-create-an-initializer">Make Something Happen: Create an Initializer</h6>
<p><em>Open the python interpreter and work through the following steps to create an understand an initializer, answering the questions</em></p>
<p><em>Type the below code in to define a class</em></p>
<div id="0713ff13" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> InitPrint:</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"you made an InitPrint instance"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><em>The above defines the class</em> <code>InitPrint</code> <em>it defines an initializer method that prints a method. Note the double underscore</em> <em>before and after the</em> <code>init</code> <em>are required, as is the parameter</em> <code>self</code><em>. The last line of the class is an empty line</em></p>
<ol type="1">
<li><p><em>The initializer looks remarkably like a function why is that?</em></p>
<ul>
<li><p>An initializer is a function that is called when a class instance is created.</p></li>
<li><p><em>Type in the code below, which creates an instance of</em> <code>InitPrint</code> <em>and assigns it to the variable</em> <code>x</code><em>,observe that the</em> <code>__init__</code> <em>method is called even without us explicitly putting it</em></p>
<div id="1d4a81fe" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> InitPrint()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>you made an InitPrint instance</code></pre>
</div>
</div></li>
</ul></li>
<li><p><em>How is the</em> <code>__init__</code> <em>function made to run?</em></p>
<ul>
<li>It is handled by the python interpreter and how objects are constructed</li>
<li>It will run each time an instance of the <code>InitPrint</code> class is created</li>
</ul></li>
</ol>
<ul>
<li><p><em>Now define the</em> <code>InitName</code> <em>class as below</em></p>
<div id="5b90a969" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> InitName:</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, new_name):</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.name <span class="op">=</span> new_name</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>The initializer can take arguments like any other function, here it takes <code>new_name</code></p></li>
<li><p>Initializer no longer prints a message but rather sets a <code>name</code> attribute on the variable <code>self</code></p></li>
<li><p><code>self</code> is a reference to the object running the method</p>
<ul>
<li>In the initializer this is the object being created</li>
<li><code>self</code> is always the first parameter of a method, and must be included</li>
</ul></li>
<li><p>Now replicate the code below to see how the new <code>__init__</code> method works</p>
<div id="aae1a92b" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> InitName(<span class="st">"Fred"</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x.name)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Fred</code></pre>
</div>
</div></li>
<li><p>When creating an <code>InitName</code> object we now have to pass the <code>new_name</code> parameter</p></li>
<li><p>Observe we don’t explicitly pass <code>self</code></p></li>
</ul></li>
<li><p>Once an initializer is defined, it is the only way to create an instance</p>
<ul>
<li>Attempting otherwise leads to an error, e.g.&nbsp;if we exclude the <code>new_name</code></li>
</ul>
<div id="26e19f29" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> InitName()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[16]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> y = <span class="ansi-yellow-bg">InitName</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-red-fg">TypeError</span>: InitName.__init__() missing 1 required positional argument: 'new_name'</pre>
</div>
</div>
</div></li>
<li><p>This is a way of enforcing that an object is created with a full set of attributes</p></li>
<li><p>Our <code>Contact</code> class, should accept three parameters</p>
<div id="dd49cfad" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Contact:</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, address, telephone):</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">          Create a new `Contact` instance</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co">          name : str</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co">              Contact Name</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co">          address : str</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co">              Contact's postal or street address</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co">          telephone : str</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="co">              Contact phone number (stored as a string)</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.address <span class="op">=</span> address</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.telephone <span class="op">=</span> telephone</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
</ul>
</section>
<section id="code-analysis-parameters-and-the-__init__-method" class="level6">
<h6 class="anchored" data-anchor-id="code-analysis-parameters-and-the-__init__-method">Code Analysis: Parameters and the <code>__init__</code> method</h6>
<p><em>Work through the following questions to ensure you understand the</em> <code>__init__</code> <em>method</em></p>
<ol type="1">
<li><p><em>It looks like you’ve written the assignments in the initializer so that a value is assigned to itself. What’s going on?</em></p>
<ul>
<li><p>Consider a statement</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>  <span class="va">self</span>.telephone <span class="op">=</span> telephone</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>This looks like assigning <code>telephone</code> to <code>telephone</code> it, does not</p></li>
<li><p>The left is the <code>telephone</code> attribute on the <code>self</code> object</p></li>
<li><p>The right is the <code>telephone</code> parameter passed to the initializer</p></li>
<li><p>Python variable names are <em>namespaced</em></p>
<ul>
<li>namespaces are regions in which names are uniquely identified</li>
</ul></li>
<li><p>One namespace is the local namespace of the <code>__init__</code> method</p></li>
<li><p>The other namespace is the attribute namespace of the <code>self</code> object</p></li>
<li><p>namespaces allow different contexts to use the same variable name distinct from each other</p></li>
<li><p>Generally it is convention to give initializer parameters the same name as their associated object attributes</p></li>
</ul></li>
<li><p><em>What happens if the user of the constructor supplies silly arguments to it?</em></p>
<ul>
<li>Currently the constructor doesn’t validate the input</li>
<li>e.g.&nbsp;we could pass <code>name</code> a number, empty string or even <code>None</code>
<ul>
<li>Still generates a <code>Contact</code></li>
</ul></li>
<li>You can add error handling code to the constructor and raise exceptions if the provided values are invalid
<ul>
<li>For a more robust application this might be required</li>
<li>For a small toy program we can generally expect valid input</li>
</ul></li>
</ul></li>
</ol>
<ul>
<li>If we want to create a new <code>Contact</code> now we can just call,</li>
</ul>
<div id="1a5e5d6c" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>    rob <span class="op">=</span> Contact(name <span class="op">=</span> <span class="st">"Rob Miles"</span>, address<span class="op">=</span><span class="st">"18 Pussycat Mews, London, NE1 410S"</span>, telephone<span class="op">=</span><span class="st">"+44(1234) 56789"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li><p>We can integrate this into <a href="./Examples/08_TinyContactsWithConstructor/TinyContactsWithConstructor.py">our Tiny Contacts implementation</a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> new_contact():</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">      Creates and adds a new contact to the contact book</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co">      None</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co">      See Also</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="co">      --------</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co">      Contact : class for storing contact information</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"Create new contact"</span>)</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>      name <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact name: "</span>)</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>      address <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact address: "</span>)</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>      telephone <span class="op">=</span> BTCInput.read_text(<span class="st">"Enter the contact phone: "</span>)</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>      new_contact <span class="op">=</span> Contact(name<span class="op">=</span>name, address<span class="op">=</span>address, telephone<span class="op">=</span>telephone)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>      contacts.append(new_contact)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
</ul>
</section>
</section>
<section id="use-default-arguments-in-a-constructor" class="level5">
<h5 class="anchored" data-anchor-id="use-default-arguments-in-a-constructor">Use Default Arguments in a Constructor</h5>
<ul>
<li><p>The <code>__init__</code> method supports default arguments</p></li>
<li><p>For example if we don’t want to make the telephone mandatory we could write</p>
<div id="a661795f" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Contact:</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>      <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name, address, telephone<span class="op">=</span><span class="st">"No Telephone"</span>):</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>          <span class="co">"""</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">          Create a new Contact instance</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co">          Parameters</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co">          ----------</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="co">          name : str</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co">              Contact Name</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="co">          address : str</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co">              Contact's postal or street address</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="co">          telephone : str</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="co">              Contact phone number (stored as a string)</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co">          """</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.address <span class="op">=</span> address</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>          <span class="va">self</span>.telephone <span class="op">=</span> telephone</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>We could then create create a <code>Contact</code> as,</p>
<div id="75b5d21a" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>  rob <span class="op">=</span> Contact(name<span class="op">=</span><span class="st">"Rob Miles"</span>, address<span class="op">=</span><span class="st">"18 Pussycat Mews, London, NE1 410S"</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(rob.telephone)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>No Telephone</code></pre>
</div>
</div>
<ul>
<li>Observe that the <code>telephone</code> attribute still exists and has the default value <code>"No Telephone"</code></li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="dictionaries" class="level3">
<h3 class="anchored" data-anchor-id="dictionaries">Dictionaries</h3>
<ul>
<li>A <em>Dictionary</em> is another collection type like <code>list</code> and <code>tuple</code></li>
<li>Dictionaries store data as <em>key-value</em> pairs
<ul>
<li>A <em>value</em> is looked up by its <em>key</em></li>
<li>You can think of a <code>list</code> as a dictionary where the <em>key</em> is the index</li>
</ul></li>
</ul>
<section id="creating-a-dictionary" class="level4">
<h4 class="anchored" data-anchor-id="creating-a-dictionary">Creating a Dictionary</h4>
<ul>
<li><p>Let’s consider creating a dictionary for a coffee shop</p></li>
<li><p>We want to key coffee products to their price (value)</p></li>
<li><p>We create an empty dictionary using <code>{}</code></p>
<div id="b4a30500" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>  prices <span class="op">=</span> {}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>Items can be added using the indexing operator to assign a value,</p>
<div id="1310c943" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"latte"</span>] <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"latte"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>3.5</code></pre>
</div>
</div></li>
<li><p>We can see <code>prices</code> has the key <code>latte</code> and the associated value of <span class="math inline">\(3.5\)</span></p></li>
<li><p>We can redefine dictionary values as for lists</p>
<div id="da975e38" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"latte"</span>] <span class="op">=</span> <span class="fl">3.6</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"latte"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>3.6</code></pre>
</div>
</div></li>
<li><p>Keys are case-sensitive and must be spelled correctly, else a <code>KeyError</code> occurs,</p>
<div id="a0a83265" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"Latte"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[24]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">prices</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-fg ansi-yellow-bg">Latte</span><span class="ansi-yellow-fg ansi-yellow-bg">"</span><span class="ansi-yellow-bg">]</span>

<span class="ansi-red-fg">KeyError</span>: 'Latte'</pre>
</div>
</div>
</div></li>
<li><p>We can search a dictionary for keys using the <code>in</code> operator</p>
<div id="26b691cf" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'latte'</span> <span class="kw">in</span> prices)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'flat white'</span> <span class="kw">in</span> prices)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>True
False</code></pre>
</div>
</div></li>
<li><p>We can print an entire dictionary just like with lists and tuples</p>
<div id="957a59be" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"espresso"</span>] <span class="op">=</span> <span class="fl">3.0</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  prices[<span class="st">"tea"</span>] <span class="op">=</span> <span class="fl">2.5</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  prices</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>{'latte': 3.6, 'espresso': 3.0, 'tea': 2.5}</code></pre>
</div>
</div></li>
<li><p>Observe that the <em>key-value</em> pairs are printed with the format <code>key : value</code></p></li>
<li><p>We can also create a dictionary with value using the same syntax like the printed output</p>
<div id="6df7dabe" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>  prices <span class="op">=</span> {<span class="st">'Latte'</span> : <span class="fl">3.6</span>, <span class="st">'Espresso'</span> : <span class="fl">3.0</span>, <span class="st">"Tea"</span> : <span class="fl">2.5</span>, <span class="st">"Americano"</span> : <span class="fl">2.5</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
</ul>
</section>
<section id="dictionary-management" class="level4">
<h4 class="anchored" data-anchor-id="dictionary-management">Dictionary Management</h4>
<ul>
<li><p>Dictionary elements use the <code>"key:item"</code> format</p></li>
<li><p>Keys and values can be a mix of types, e.g.&nbsp;<code>str</code>, <code>int</code>, <code>float</code> e.g.,</p>
<div id="4333f1c6" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>  access_control <span class="op">=</span> {<span class="dv">1234</span> : <span class="st">"complete"</span>, <span class="dv">1111</span> : <span class="st">"limited"</span>, <span class="dv">4342</span> : <span class="st">"limited"</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></li>
<li><p>Values can be duplicated</p></li>
<li><p><strong>But</strong> keys must be unique</p></li>
<li><p>Consider a dictionary that controls access to a burglar alarm</p>
<ul>
<li>Users provide an access code</li>
<li>Code keys a dictionary</li>
<li>Access is determined by the value in the dictionary</li>
<li>A missing key (code) indicates no access permissions</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Example 9.9 Alarm Access Control</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Demonstrates the use of a dictionary as a lookup table to translate</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keys into associated values</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="im">import</span> BTCInput</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  access_control <span class="op">=</span> {<span class="dv">1234</span>: <span class="st">"complete"</span>, <span class="dv">1111</span>: <span class="st">"limited"</span>, <span class="dv">4342</span>: <span class="st">"limited"</span>}</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  access_code <span class="op">=</span> BTCInput.read_int(<span class="st">"Enter your access code: "</span>)</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> access_code <span class="kw">in</span> access_control:</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"You have"</span>, access_control[access_code], <span class="st">"access"</span>)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="st">"You are not allowed access"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>We can delete dictionary entries using the <code>del</code> keyword, e.g.</p>
<div id="a12646b5" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">del</span>(access_control[<span class="dv">1111</span>])</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(access_control[<span class="dv">1111</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[29]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="font-weight:bold;color:rgb(0,135,0)">del</span>(access_control[<span class="ansi-green-fg">1111</span>])
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span style="color:rgb(0,135,0)">print</span>(<span class="ansi-yellow-bg">access_control</span><span class="ansi-yellow-bg">[</span><span class="ansi-green-fg ansi-yellow-bg">1111</span><span class="ansi-yellow-bg">]</span>)

<span class="ansi-red-fg">KeyError</span>: 1111</pre>
</div>
</div>
</div></li>
<li><p>The <code>KeyError</code> above shows that the key-value has been eliminated</p></li>
<li><p><code>del</code> can also be used to remove elements of a list</p></li>
<li><p><code>del</code> will raise an exception if the object being deleted doesn’t exist</p></li>
</ul>
</section>
<section id="return-a-dictionary-from-a-function" class="level4">
<h4 class="anchored" data-anchor-id="return-a-dictionary-from-a-function">Return a Dictionary from a Function</h4>
<ul>
<li>We’ve seen that programs can use dictionaries as lookup tables</li>
<li>Can also return a dictionary from a function
<ul>
<li>e.g.&nbsp;our Pirates Treasure map from <a href="../../01_ProgrammingFundamentals/08_StoringCollectionsOfData/Chapter_08.html#tuples">Chapter 8</a> could use a <code>dict</code> instead</li>
</ul>
<div id="db7ba065" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Example 9.10: Pirate Treasure Dictionary</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Implementation of the Pirates Treasure map that uses a</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dictionary rather than a tuple to provide contextual</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># key-value pairs</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> get_treasure_location():</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>      <span class="co">"""</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co">      Get the location of the treasure</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="co">      Returns</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="co">      -------</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="co">      dict</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="co">          Dictionary containing the location of the treasure, containing</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="co">          the following keys</span></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="co">          `"start"` : str</span></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a><span class="co">              landmark to start at</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a><span class="co">          `"n"` : int</span></span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a><span class="co">              number of paces to walk north relative to the</span></span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a><span class="co">              start</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a><span class="co">          `"e"` : int</span></span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a><span class="co">              number of paces to walk east relative to the</span></span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a><span class="co">              start</span></span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a><span class="co">      """</span></span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> {<span class="st">"start"</span>: <span class="st">"The old oak tree"</span>, <span class="st">"n"</span>: <span class="dv">20</span>, <span class="st">"e"</span>: <span class="dv">30</span>}</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>  location <span class="op">=</span> get_treasure_location()</span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(</span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Start at"</span>,</span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a>      location[<span class="st">"start"</span>],</span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a>      <span class="st">"walk"</span>,</span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>      location[<span class="st">"n"</span>],</span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>      <span class="st">"paces north, and"</span>,</span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>      location[<span class="st">"e"</span>],</span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a>      <span class="st">"paces east"</span>,</span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start at The old oak tree walk 20 paces north, and 30 paces east</code></pre>
</div>
</div></li>
<li>Dictionaries let us assign contextual meaning to the returned parameters</li>
<li>Harder to work with than tuple unpacking though</li>
</ul>
</section>
<section id="use-a-dictionary-to-store-contacts" class="level4">
<h4 class="anchored" data-anchor-id="use-a-dictionary-to-store-contacts">Use a Dictionary to Store Contacts</h4>
<ul>
<li>We could use dictionaries to store contacts in Tiny Contacts
<ul>
<li><p>Rather than use a class we could represent a contact with a dictionary like</p>
<div id="e9ebe19d" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>  rob_contact <span class="op">=</span> {<span class="st">"name"</span> : <span class="st">"Rob Miles"</span>, <span class="st">"address"</span> : <span class="st">"18 Pussycat Mews"</span>, <span class="st">"telephone"</span> : <span class="st">"+44(1234) 56789"</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ul>
<li>But the we lost some of the nice class behaviours
<ul>
<li>like attributes being accessible via <code>Contact.name</code> etc. and we would instead have to use the string literal keys everywhere</li>
</ul></li>
</ul></li>
<li><p>Another option is storing the contacts themselves in a dictionary rather than a list</p>
<div id="389a4852" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a> contact_dictionary <span class="op">=</span> {}</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a> rob <span class="op">=</span> Contact(name <span class="op">=</span> <span class="st">"Rob Miles"</span>, address <span class="op">=</span> <span class="st">"18 Pussycat Mews"</span>, telephone <span class="op">=</span> <span class="st">"+44(1234) 56789"</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a> contact_dictionary[rob.name] <span class="op">=</span> rob</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a> <span class="bu">print</span>(contact_dictionary)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'Rob Miles': &lt;__main__.Contact object at 0x7f06a0f4cf20&gt;}</code></pre>
</div>
</div></li>
<li><p>We can then search for a contact by just querying the key</p>
<div id="dae68a50" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>  contact_dictionary[<span class="st">"Rob Miles"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>&lt;__main__.Contact at 0x7f06a0f4cf20&gt;</code></pre>
</div>
</div></li>
<li><p>However the user would have to type the correct full name</p>
<ul>
<li>Also case sensitive</li>
<li>We could fix the case sensitivity by rather than using the name directly using a normalised key
<ul>
<li>such as by using <code>strip().lower()</code> to strip excess whitespace and convert to lowercase</li>
</ul></li>
</ul></li>
<li><p>Our current implementation uses <code>startswith</code> to provide more flexible matching</p></li>
<li><p>In general though, dictionaries provide fast queries for finding objects when we can easily use the key as a unique identifier</p></li>
</ul></li>
</ul>
</section>
</section>
<section id="exercise-the-final-tiny-contacts-refactor" class="level3">
<h3 class="anchored" data-anchor-id="exercise-the-final-tiny-contacts-refactor">Exercise: The Final Tiny Contacts Refactor</h3>
<p><em>The Tiny contacts program is a useful template for any kind of program that stores data and lets a user work with it. You can even add some of the sorting and data-processing features from the ice-cream sales program to make applications that not only store data but let you do interesting things with it.</em></p>
<p><em>Expand on the Tiny Contacts Program to implement the following,</em></p>
<ol type="1">
<li><em>The Tiny Contacts program will print all contacts if the <code>find_contacts</code> search string is blank, document this for the user</em></li>
<li><em>Add the sorting features from the ice-cream sales program to print contacts in alphabetical order</em></li>
<li><em>Identify more common between functions in Tiny Contacts and see what further refactors you can make</em></li>
</ol>
<p>The first step is straightforward. We update the program is two places. First we document the behaviour in the responsible function, <code>find_contacts</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_contacts(search_name):</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Finds the contacts with the matching name</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="co">    If the empty string is given, all contacts</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="co">    are matched</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="co">    search_name : str</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a><span class="co">        Name to search for (uses prefix matching)</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a><span class="co">    list[Contact]</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a><span class="co">        list of contacts matching `search_name`, if no</span></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a><span class="co">        matches exist the list is empty</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>    search_name <span class="op">=</span> search_name.strip().lower()</span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> []</span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> contact <span class="kw">in</span> contacts:</span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> contact.name.strip().lower()</span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> name.startswith(search_name):</span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>            results.append(contact)</span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> results</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This helps anyone who in the future has to edit or maintain our code. However it doesn’t provide much help to the user of the program. So we also document this in the user facing code (<code>display_contacts</code>)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> display_contacts():</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Prompts the user for a contact name and</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">    displays all matching contacts</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co">    None</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="co">    display_contact : displays a single contact</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Find contact"</span>)</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>    contacts <span class="op">=</span> find_contacts(</span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>        BTCInput.read_text(<span class="st">"Enter the contact name (Press enter to display all): "</span>)</span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(contacts) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> contact <span class="kw">in</span> contacts:</span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a>            display_contact(contact)</span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"This name was not found"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The relevant line being,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>    BTCInput.read_text(<span class="st">"Enter the contact name (Press enter to display all): "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>To add the sorting functionality we first need to put the sorting code in,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sort_contacts():</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="co">    sorts the contacts list into alphabetical order</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co">    None</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Sort contacts"</span>)</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> sort_pass <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(contacts)):</span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>        done_swap <span class="op">=</span> <span class="va">False</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> count <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(contacts) <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> sort_pass):</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> contacts[count].name <span class="op">&gt;</span> contacts[count <span class="op">+</span> <span class="dv">1</span>].name:</span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> contacts[count]</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>                contacts[count] <span class="op">=</span> contacts[count <span class="op">+</span> <span class="dv">1</span>]</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>                contacts[count <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> temp</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>                done_swap <span class="op">=</span> <span class="va">True</span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> done_swap:</span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This code is basically the same as the sorting code in the ice-cream stand example except there might be something that looks odd. namely the line</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>contacts[count].name <span class="op">&gt;</span> contacts[count <span class="op">+</span> <span class="dv">1</span>].name</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This is because we want to sort the <code>Contact</code> objects alphabetical on the <code>name</code> field. So we have to compare against this field. <code>contacts[count]</code> <em>is a reference</em> to the <code>Contact</code> object stored at the index <code>count</code> so we can access the attributes on the underlying object</p>
<p>We then need to include the sorting option in the display menu</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>menu <span class="op">=</span> <span class="st">"""Tiny Contacts</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="st">1. New Contact</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="st">2. Find Contact</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="st">3. Edit Contact</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="st">4. Sort Contacts</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="st">5. Exit Program</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="st">Enter your command: """</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>file_name <span class="op">=</span> <span class="st">"contacts.pickle"</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>    load_contacts(file_name)</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span>:  <span class="co"># noqa: E722</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Contacts file not found"</span>)</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    contacts <span class="op">=</span> []</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>    command <span class="op">=</span> BTCInput.read_int_ranged(prompt<span class="op">=</span>menu, min_value<span class="op">=</span><span class="dv">1</span>, max_value<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> command <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>        new_contact()</span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a>        display_contacts()</span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a>        edit_contacts()</span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a>        sort_contacts()</span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> command <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a>            save_contacts(file_name)</span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:  <span class="co"># noqa: E722</span></span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Contacts failed to save"</span>)</span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">"Unexpected command id found: "</span> <span class="op">+</span> <span class="bu">str</span>(command))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>To answer the final question of what functionality we can pull out we can see that both <code>display_contacts</code> and <code>edit_contacts</code> contain code for displaying an individual <code>Contact</code>. We can pull this code out into a distinct <code>display_contact</code> function responsible for displaying a single <code>Contact</code>. We can then update <code>display_contacts</code> and <code>edit_contacts</code> to defer the display functionality to <code>display_contact</code></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> display_contact(contact):</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Displays the Contact details for the supplied contact</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co">    contact : Contact</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="co">        contact to display</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="co">    None</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a><span class="co">    display_contacts : Displays all contacts matching a search name</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Name:"</span>, contact.name)</span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Address:"</span>, contact.address)</span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Telephone:"</span>, contact.telephone, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The new <code>display_contacts</code> now looks like,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> display_contacts():</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Prompts the user for a contact name and</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co">    displays all matching contacts</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="co">    None</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="co">    See Also</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co">    --------</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a><span class="co">    display_contact : displays a single contact</span></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Find contact"</span>)</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>    contacts <span class="op">=</span> find_contacts(</span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>        BTCInput.read_text(<span class="st">"Enter the contact name (Press enter to display all): "</span>)</span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(contacts) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> contact <span class="kw">in</span> contacts:</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>            display_contact(contact)</span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"This name was not found"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>and <code>edit_contacts</code> looks similar</p>
</section>
<section id="further-exercises" class="level3">
<h3 class="anchored" data-anchor-id="further-exercises">Further Exercises</h3>
<p>This Chapter also contains two further examples which demonstrate building data storage applications that handle more functionality than tiny contacts.</p>
<p>Due to the size of the discussion required for each exercise they are linked on <a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09_ExtensionExercises.html">a separate page</a></p>
<section id="music-tracks" class="level4">
<h4 class="anchored" data-anchor-id="music-tracks"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09_ExtensionExercises.html#make-something-happen-music-storage-app">Music Tracks</a></h4>
<p>Focuses on demonstrating adding additional functionality to a basic storage application for data interrogation</p>
<ul>
<li>Develops an application that can store music tracks</li>
<li>Implements searching and sorting based on length of the track</li>
<li>Supports the ability to create and save playlists</li>
<li>Playlists can be interrogated for their total length</li>
<li>The program can suggest playlists that match the user’s target runtime</li>
</ul>
</section>
<section id="recipe-register" class="level4">
<h4 class="anchored" data-anchor-id="recipe-register"><a href="../../02_AdvancedProgramming/09_UsingClasses/Chapter_09_ExtensionExercises.html#make-something-happen-recipe-storage-app">Recipe Register</a></h4>
<p>Demonstrates working with larger more complicated objects in data storage</p>
<ul>
<li>Develops and application for storing recipes</li>
<li>Users can search for recipes by their name or their ingredients</li>
<li>Supports different mechanisms for viewing details about a recipe
<ol type="1">
<li>Viewing the ingredients</li>
<li>Viewing the steps</li>
<li>Stepping through the recipe, step by step</li>
</ol></li>
</ul>
<p>You are encouraged to work through or examine these exercises</p>
</section>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li>Python lets you define Classes
<ul>
<li>Classes can have data attributes</li>
<li>data attributes can be defined at construction via a <em>constructor</em></li>
<li>data attributes can be added dynamically at runtime</li>
<li>classes may define a constructor via <code>__init__</code> to control how they are created</li>
</ul></li>
<li>Python variables are references to memory objects
<ul>
<li>If there are multiple references to one object then changing the object via one reference will be propagated to the other references</li>
</ul></li>
<li>Some fundamental python types <code>int</code>, <code>str</code>, <code>float</code>, are immutable
<ul>
<li>Assigning a value to a variable holding an immutable type creates a new memory object with that value
<ul>
<li>Other references to the original object are untouched</li>
</ul></li>
<li>This allows them to be manipulated as simple values</li>
</ul></li>
<li><code>pickle</code> is a library for serialising python objects as binary data</li>
<li>Python provides a dictionary data object that can be used to store a collection of <em>key-value</em> pairs</li>
</ul>
</section>
<section id="questions-and-answers" class="level2">
<h2 class="anchored" data-anchor-id="questions-and-answers">Questions and Answers</h2>
<ol type="1">
<li><em>If an object has</em> <code>name</code><em>,</em> <code>address</code> <em>and</em> <code>telephone</code> <em>attributes can a program treat it as a</em> <code>Contact</code> <em>instance?</em>
<ul>
<li>Yes, Python uses what is called duck-typing
<ul>
<li>“If it walks like a duck, quacks like a duck, it is a duck”</li>
<li>Means that if it behaves like a <code>Contact</code> it can be used as a <code>Contact</code></li>
<li>If the programmer makes a mistake however, a runtime exception is created</li>
</ul></li>
<li>This means we could define a <code>Customer</code> with the same fields and treat it as a <code>Contact</code></li>
<li>Python does provide mechanisms for explicit type checking
<ul>
<li>We’ve seen one for example (<code>type</code>)</li>
</ul></li>
<li>Other languages have different rules</li>
<li>Java, C# and C++ are “Strongly Typed”
<ul>
<li>The type of the variable is fixed and we can only work with objects, functions and operators that support that type</li>
</ul></li>
<li>“Strongly Typed” languages typically allow you catch mismatched type errors at compile-time before a program is run</li>
</ul></li>
<li><em>Can an object contain a reference to itself?</em>
<ul>
<li>Yes, though this is usually not a good idea</li>
<li>Typically objects are daisy-chained together
<ul>
<li>Object A references Object B references Object C etc.</li>
<li>The most basic structure is called a <em>linked list</em></li>
<li>More complex structures like trees have more complicated referential structures</li>
</ul></li>
</ul></li>
<li><em>Is an object forced to have a constructor / initializer?</em>
<ul>
<li>No, we saw this with the first <code>Contact</code> which was a simple blank class</li>
<li><code>__init__</code> provides greater ability to ensure that objects are created properly though</li>
</ul></li>
<li><em>Can you stop a program from adding new attributes to an object?</em>
<ul>
<li>No</li>
<li>This has the impact of allowing us to create incompatible and distinct instances of the same class where for some reason one has been augmented with an additional attribute</li>
</ul></li>
<li><em>Can you remove attributes from an object?</em>
<ul>
<li><p>Yes, you can use the <code>del</code> operator to delete an attribute</p>
<div id="183da570" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">del</span>(rob.name)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(rob.address)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  rob.name</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>18 Pussycat Mews</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[34]</span><span class="ansi-green-fg">, line 3</span>
<span class="ansi-green-fg">      1</span> <span style="font-weight:bold;color:rgb(0,135,0)">del</span>(rob.name)
<span class="ansi-green-fg">      2</span> <span style="color:rgb(0,135,0)">print</span>(rob.address)
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">3</span> <span class="ansi-yellow-bg">rob</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">name</span>

<span class="ansi-red-fg">AttributeError</span>: 'Contact' object has no attribute 'name'</pre>
</div>
</div>
</div></li>
</ul></li>
<li><em>What is immutable again?</em>
<ul>
<li>immutable means an unchangeable object</li>
<li>When we try to change an immutable object python instead creates a copy with the new values</li>
<li>immutability improves data storage especially for primitive types</li>
<li>e.g.&nbsp;We might have a story of one million words
<ul>
<li>The story string itself consists of words stored as strings which are immutable</li>
<li>A list of words uses references to refer to each word</li>
<li>Certain words are probably referred to multiple times (e.g.&nbsp;the)</li>
<li>Since the words are immutable we can reference <em>one</em> instance of the string <code>"the"</code> rather than having a distinct memory object for each instance (which we would need if they were mutable)</li>
</ul></li>
</ul></li>
<li><em>How does the operating system know its storing a binary file?</em>
<ul>
<li>It doesn’t</li>
<li>Really all files are binary</li>
<li>File system simply responsible for locating and retrieving files</li>
<li>Programs are the ones that impose meaning on a file
<ul>
<li>file extensions are there to help an operating system or user associate different file formats with their respective programs</li>
</ul></li>
</ul></li>
<li><em>Can two items in a dictionary have the same key?</em>
<ul>
<li>Strictly no, if you wish to store multiple objects with the same key you would have to use a dictionary where the value was some form of collection e.g.&nbsp;a list or tuple.</li>
<li>You would then access the list via the dictionary key
<ul>
<li>Then have to search through the list to get the specific value you were interested in</li>
</ul></li>
</ul></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>